[Data]
life = 1000
attack = 100
defence = 100
fall.defence_up = 50
liedown.time = 60
airjuggle = 15
sparkno = 2
guard.sparkno = 40
KO.echo = 0
volume = 0
IntPersistIndex = 55
FloatPersistIndex = 35

[Size]
xscale = 0.33
yscale = 0.33
ground.back = 16
ground.front = 16
air.back = 12
air.front = 12
height = 60
attack.dist = 160
proj.attack.dist = 90 
proj.doscale = 0
head.pos = 0, -80
mid.pos = 0, -57
shadowoffset = 0
draw.offset = 0,0

[Velocity]
walk.fwd  = 2.4
walk.back = -2
run.fwd  = 9, 0
run.back = -4.5,-3.8
jump.neu = 0,-9
jump.back = -3
jump.fwd = 3
runjump.back = -2.55,-8.1
runjump.fwd = 5,-9
airjump.neu = 0,-7


[Movement]
yaccel = .5
stand.friction = .85
crouch.friction = .85
airjump.num = 1
airjump.height = 50

[Quotes]
victory1 = "ke ke ke ke ke"
victory2 = "ufu fu fu fu fu"

;---------------------------------------------------------------------------
; Variable usage:
; var(0) Jump turn thing
; var(1) High jump time
; var(2) Buffer System
; var(3) Cornerpush
; var(4) Cornerpush
; var(5) Just Guard
; var(6) Just Guard
; var(7) Counter
; var(8) Trip Detection
; var(9) MAX MODE
; var(10) Colour Select
; var(11) Cheap KO
; var(12) Gauge Offline
; var(13) Colour Select
; var(14) Buffer System 2
; var(15) Ground Break No Recovery Limiter
; var(16) Charge Command
; var(17) Custom Target Retainer
; var(18) Counter Connect Flag
; var(19) Fully Offline
; var(20) Black Orbiter Distance
; var(30) Tech Time Decay
; var(31) Stun Time
; var(32) Opponent Fall Time
; var(55) Colour Select 
; var(56) Win Count
; var(57) Lose Count

;fvar(0) Gauge pointer angle
;fvar(2) Cornerpush
;fvar(3) Throw Tech
;fvar(9) DAMPENER: Base Damage
;fvar(10) DAMPENER: P1 Proration
;fvar(11) DAMPENER: P2 Proration
;fvar(12) DAMPENER: Ping
;fvar(13) DAMPENER: Fall Correction
;fvar(14) DAMPENER: Repeat Proration
;fvar(35) Gauge meter value
;fvar(38) Standard


;---------------------------------------------------------------------------
; Stand
[Statedef 0]
type = S
physics = S
sprpriority = 0

[State 0]
type = changeanim
trigger1 = prevstateno = [120,159]
trigger2 = anim = [120,155]
value = 140
persistent = 0

[State 0]
type = changestate
triggerall = ctrl = 1
trigger1 = command = "holdfwd"
trigger1 = command = "holdback"
value = 20
ctrl = 1

[State 0]
type = changeanim
triggerall = time = 0
trigger1 = anim = 48 && prevstateno = 52
trigger2 = anim = 63 && prevstateno = 62
value = 5
persistent = 0

[State 0]
type = changeanim
triggerall = time = 0
trigger1 = anim = 3026 && prevstateno = 3001
value = 3028
persistent = 0

[State 0, 1]
type = ChangeAnim
trigger1 = Anim != 0 && Anim != 5 && Anim != 140 && anim != 2 && anim != 3028
trigger2 = Anim = 5 && AnimTime = 0 ;Turn anim over
trigger3 = anim = 140 && animtime = 0
trigger4= anim = 3028 && animtime = 0
value = 0

[State 0, 1]
type = ChangeAnim
triggerall = Random = [0,400]
triggerall = roundstate >= 2
triggerall = enemynear,stateno != [190,199]
triggerall = anim != 2
trigger1 = time = 300
trigger2 = time = 650
trigger3 = time = 1000
trigger4 = time = 1350
trigger5 = time = 1700
trigger6 = time = 2050
trigger7 = time = 2400
trigger8 = time = 2750
trigger9 = time = 3100
value = 2
persistent = 1
[State 0]
type = playsnd
trigger1 = anim = 2 && animelemtime(1) = 1
value = 18,random%2
channel = 0

[State 0, 2]
type = VelSet
trigger1 = Time = 0
y = 0

[State 0, 3] ;Stop moving if low velocity or 4 ticks pass
type = VelSet
trigger1 = abs(vel x) < Const(movement.stand.friction.threshold)
x = 0

[State 0, 4] ;Are you dead?
type = ChangeState
trigger1 = !alive
value = 5050
ctrl = 0

;---------------------------------------------------------------------------
; Crouching
[Statedef 11]
type    = C
physics = C
sprpriority = 0

[State 0]
type = changeanim
trigger1 = anim = 141 && animtime = 0
trigger2 = anim != 141 && anim != 11 && anim != 6
trigger3 = anim = 6 && animtime = 0
value = 11

[State 0]
type = changeanim
trigger1 = prevstateno = [130,159]
value = 141
persistent = 0

[State 0]
type = velset
triggerall = prevstateno = 20
trigger1 = time = 0
x = 0

[State 11, 1] ;Change from turning animation
type = ChangeAnim
trigger1 = Anim = 6 && AnimTime = 0
trigger2 = anim = 141 && animtime = 0
value = 11


[State 11, 2] ;Stop moving if low velocity
type = VelSet
trigger1 = abs(vel x) < Const(movement.crouch.friction.threshold)
x = 0

;---------------------------------------------------------------------------
; Walk
[Statedef 20]
type    = S
physics = S
sprpriority = 0

[State 20, 1]
type = VelSet
trigger1 = command = "holdfwd"
x = const(velocity.walk.fwd.x)

[State 20, 2]
type = VelSet
trigger1 = command = "holdback"
x = const(velocity.walk.back.x)

[State 20, 3]
type = ChangeAnim
triggerall = vel x > 0
trigger1 = Anim != 20 && Anim != 5
trigger2 = Anim = 5 && AnimTime = 0
value = 20

[State 20, 4]
type = ChangeAnim
triggerall = vel x < 0
trigger1 = Anim != 21 && Anim != 5
trigger2 = Anim = 5 && AnimTime = 0
value = 21

;---------------------------------------------------------------------------
; Jump Start
[Statedef 40]
type    = S
physics = S
ctrl = 0
anim = 40
sprpriority = 1
facep2 = 1
velset = 0,0

[State 40, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 40, 2]
type = VarSet
trigger1 = command = "holdfwd"
trigger2 = prevstateno = 100
trigger3 = ailevel != 0
sysvar(1) = 1

[State 40, 3]
type = VarSet
trigger1 = command = "holdback"
sysvar(1) = -1

[State 0]
type = playsnd
triggerall = var(1) != 0
trigger1=animtime = 0
value = 0,2 

[State 0, Explod]
type = Explod
triggerall = var(1) != 0
trigger1=animtime = 0
anim = 6090
id = 6090
pos = 0,9
scale = 1,1
postype = p1
bindtime = 1
removetime = -2
sprpriority = 2
ignorehitpause = 1
removeongethit = 0
ownpal = 1
supermovetime = 999

[State 0]
type=AfterImage
triggerall = var(12 != [1799,1800]);var(12) != [899,900]
triggerall = var(1) != 0
trigger1=animtime = 0
time=-1
trans = add
timegap = 1
framegap = 1
length = 9
palbright = 0,0,0
palcontrast = 40,40,40
palpostbright = 0,0,0
paladd = 0,0,0
palmul = .8,.8,.8

[State 40, 4]
type = VelSet
trigger1 = AnimTime = 0
x = ifelse(sysvar(1)=0, const(velocity.jump.neu.x), ifelse(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))
y = ifelse(var(1)!=0,const(velocity.jump.y)-2,const(velocity.jump.y))

[State 40, 5]
type = VelSet
triggerall = anim = [40,49]
trigger1 = AnimTime = 0
trigger1 = prevstateno = 100 ;RUN_FWD
trigger1 = sysvar(1) = 1
x = const(velocity.runjump.fwd.x)

[State 0]
type = playsnd
trigger1 = animtime = 0
value = 0,1

[State 40, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

;---------------------------------------------------------------------------
; AirJump Start
[Statedef 45]
type    = A
physics = N
ctrl = 0
velset = 0,0

[State 45, 1]
type = ChangeAnim
trigger1 = SelfAnimExist(44)
value = 44

[State 45, 2]
type = ChangeAnim
trigger1 = !SelfAnimExist(44)
value = 41

[State 45, 3]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 45, 4]
type = VarSet
trigger1 = command = "holdfwd"
trigger2 = ailevel != 0
sysvar(1) = 1

[State 45, 5]
type = VarSet
trigger1 = command = "holdback"
sysvar(1) = -1

[State 45, 6]
type = VelSet
trigger1 = Time = 2
x = ifelse(sysvar(1)=0, const(velocity.airjump.neu.x), ifelse(sysvar(1)=1, const(velocity.airjump.fwd.x), const(velocity.airjump.back.x)))
y = const(velocity.airjump.y)

[State 45, 7]
type = ChangeState
trigger1 = Time = 2
value = 50
ctrl = 1



;---------------------------------------------------------------------------
; Jump Up
[Statedef 50]
type    = A
physics = A

[State 50, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 50, 2]
type = ChangeAnim
triggerall = prevstateno != [130,139]
trigger1 = Time = 0
value = ifelse((vel x)=0, 41, ifelse((vel x)>0, 42, 43))

[State 50, 3]
type = ChangeAnim
triggerall = prevstateno != [130,139]
trigger1 = Vel y > Const720p(-8)
trigger1 = SelfAnimExist(anim + 3)
trigger1 = anim >= 41 && anim <= 43
persistent = 0
value = Anim + 3

;----------

[State 0, Explod]
type = Explod
triggerall = prevstateno = 45 && vel x > 0
trigger1 = time = 0
anim = 6060
id = 6060
pos = 30,-80
scale = 0.5*0.75,0.5*0.75
postype = p1
bindtime = 1
removetime = -2
sprpriority = 2
ignorehitpause = 1
removeongethit = 0
ownpal = 1
angle = 10
vfacing = -1
supermovetime = 999
[State 0, Explod]
type = Explod
triggerall = prevstateno = 45 && vel x > 0
trigger1 = time = 0
anim = 6032
id = 6032
pos = 0,-60
scale = 0.5*0.75,0.2*0.75
postype = p1
bindtime = 1
removetime = -2
sprpriority = 2
ignorehitpause = 1
removeongethit = 0
ownpal = 1
angle = -10
supermovetime = 999
[State 0, Explod]
type = Explod
triggerall = prevstateno = 45 && vel x > 0
trigger1 = time = 0
anim = 6032
id = 6032
pos = 0,-60
scale = 0.3*0.75,0.12*0.75
postype = p1
bindtime = 1
removetime = -2
sprpriority = 2
ignorehitpause = 1
removeongethit = 0
ownpal = 1
angle = -10
supermovetime = 999

[State 0, Explod]
type = Explod
triggerall = prevstateno = 45 && vel x < 0
trigger1 = time = 0
anim = 6060
id = 6060
pos = -15,-75
scale = 0.5*0.75,0.5*0.75
postype = p1
bindtime = 1
removetime = -2
sprpriority = 2
ignorehitpause = 1
removeongethit = 0
ownpal = 1
angle = -75
vfacing = -1
supermovetime = 999
[State 0, Explod]
type = Explod
triggerall = prevstateno = 45 && vel x < 0
trigger1 = time = 0
anim = 6032
id = 6032
pos = 0,-60
scale = 0.5*0.75,0.2*0.75
postype = p1
bindtime = 1
removetime = -2
sprpriority = 2
ignorehitpause = 1
removeongethit = 0
ownpal = 1
angle = 10
supermovetime = 999
[State 0, Explod]
type = Explod
triggerall = prevstateno = 45 && vel x < 0
trigger1 = time = 0
anim = 6032
id = 6032
pos = 0,-60
scale = 0.3*0.75,0.12*0.75
postype = p1
bindtime = 1
removetime = -2
sprpriority = 2
ignorehitpause = 1
removeongethit = 0
ownpal = 1
angle = 10
supermovetime = 999

[State 0, Explod]
type = Explod
triggerall = prevstateno = 45 && vel x = 0
trigger1 = time = 0
anim = 6060
id = 6060
pos = 0,-80
scale = 0.5*0.75,0.5*0.75
postype = p1
bindtime = 1
removetime = -2
sprpriority = 2
ignorehitpause = 1
removeongethit = 0
ownpal = 1
angle = -40
vfacing = -1
supermovetime = 999
[State 0, Explod]
type = Explod
triggerall = prevstateno = 45 && vel x = 0
trigger1 = time = 0
anim = 6032
id = 6032
pos = 0,-60
scale = 0.5*0.75,0.2*0.75
postype = p1
bindtime = 1
removetime = -2
sprpriority = 2
ignorehitpause = 1
removeongethit = 0
ownpal = 1
angle = 0
supermovetime = 999
[State 0, Explod]
type = Explod
triggerall = prevstateno = 45 && vel x = 0
trigger1 = time = 0
anim = 6032
id = 6032
pos = 0,-60
scale = 0.3*0.75,0.12*0.75
postype = p1
bindtime = 1
removetime = -2
sprpriority = 2
ignorehitpause = 1
removeongethit = 0
ownpal = 1
angle = 0
supermovetime = 999

;----------

;---------------------------------------------------------------------------
; Jump Land
[Statedef 52]
type    = S
physics = S
ctrl = 0
anim = ifelse(anim=46,ifelse(var(0)=1,50,49),ifelse(var(0)=1,48,47))
facep2 = 1

[State 0]
type = velset
trigger1 = prevstateno = 820
x = 0

[State 0]
type = removeexplod
trigger1 = time = 0
id = 6502

[State 0, Explod]
type = Explod
trigger1= time = 0
anim = 6090
id = 6090
pos = 0,0
scale = 0.5,0.5
postype = p1
bindtime = 1
removetime = -2
sprpriority = 2
ignorehitpause = 1
removeongethit = 0
ownpal = 1
supermovetime = 999

[State 52, 1]
type = VelSet
trigger1 = Time = 0
y = 0

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 52, 3]
type = CtrlSet
triggerall = helper(6001),var(3) = 0
trigger1 = Time = helper(6001),var(2)
value = 1
[State 52, 3]
type = CtrlSet
triggerall = helper(6001),var(3) = 1
trigger1 = Time = 3
value = 1

[State 52, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Jump Up
[Statedef 59]
type    = A
physics = A

[State 50, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 0]
type = changestate
trigger1 = command = "holdfwd" || command = "holdback" || command = "holdup"
value = 45

[State 50, 2]
type = ChangeAnim
trigger1 = Time = 0
value = 690

;---------------------------------------------------------------------------
;Evasive Air Dash (ground)
[Statedef 60]
type    = S
physics = S
ctrl = 0
anim = 60
facep2 = 1

[State 0]
type = playsnd
trigger1 = animelem = 2
value = 15,0
channel = 0

[State 0, Explod]
type = Explod
trigger1= animelemtime(2) = 0
anim = 6093
id = 6093
pos = 0,5
scale = 0.5,0.5
postype = p1
bindtime = 1
facing = -1
removetime = -2
sprpriority = 2
ignorehitpause = 1
removeongethit = 0
ownpal = 1
supermovetime = 999

[State 0, Explod]
type = Explod
trigger1 = animelem = 2
anim = 6060
id = 6060
pos = 30,-100
scale = 0.5,0.5
postype = p1
bindtime = 1
removetime = -2
sprpriority = 2
ignorehitpause = 1
removeongethit = 0
ownpal = 1
angle = 30
vfacing = -1
supermovetime = 999
[State 0, Explod]
type = Explod
trigger1 = animelem = 1
anim = 6032
id = 6032
pos = 0,-80
scale = 0.5,0.2
postype = p1
bindtime = 1
removetime = -2
sprpriority = 2
ignorehitpause = 1
removeongethit = 0
ownpal = 1
angle = -30
supermovetime = 999
[State 0, Explod]
type = Explod
trigger1 = animelem = 1
anim = 6032
id = 6032
pos = 0,-60
scale = 0.3,0.12
postype = p1
bindtime = 1
removetime = -2
sprpriority = 2
ignorehitpause = 1
removeongethit = 0
ownpal = 1
angle = -30
supermovetime = 999

[State 0]
type = sprpriority
trigger1 = animelemtime(2) >= 0
value = -1

[State 0]
type = nothitby
trigger1 = animelemtime(2) >= 0 && animelemtime(9) < 0
value = ,AP
time = 1
ignorehitpause = 1

[State 0]
type = statetypeset
trigger1 = animelem = 2
statetype = A
physics = N

[State 0]
type = playsnd
trigger1=animelem = 2
value = 101,1

[State 0]
type = velset
trigger1 = animelem = 2
x = 6
y = -6.5

[State 0]
type = playerpush
trigger1 = animelemtime(2) >= 0 && animelemtime(9) < 0
value = 0

[State 0]
type = ctrlset
trigger1 = animelem = 7
value = 1

[State 0]
type = veladd
trigger1 = animelemtime(2) > 0
y = .5

[State 105]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 62
ctrl = 0

;---------------------------------------------------------------------------
;Evasive Air Dash (AIR)
[Statedef 61]
type    = A
physics = N
velset = 0,0
ctrl = 0
anim = 61

[State 0]
type = playsnd
trigger1 = animelem = 2
value = 15,0
channel = 0

[State 0, Explod]
type = Explod
trigger1 = animelem = 2
anim = 6060
id = 6060
pos = 30,-100
scale = 0.5,0.5
postype = p1
bindtime = 1
removetime = -2
sprpriority = 2
ignorehitpause = 1
removeongethit = 0
ownpal = 1
angle = 30
vfacing = -1
supermovetime = 999
[State 0, Explod]
type = Explod
trigger1 = animelem = 1
anim = 6032
id = 6032
pos = 0,-80
scale = 0.5,0.2
postype = p1
bindtime = 1
removetime = -2
sprpriority = 2
ignorehitpause = 1
removeongethit = 0
ownpal = 1
angle = -30
supermovetime = 999
[State 0, Explod]
type = Explod
trigger1 = animelem = 1
anim = 6032
id = 6032
pos = 0,-60
scale = 0.3,0.12
postype = p1
bindtime = 1
removetime = -2
sprpriority = 2
ignorehitpause = 1
removeongethit = 0
ownpal = 1
angle = -30
supermovetime = 999


[State 0]
type = nothitby
trigger1 = animelemtime(2) >= 0 && animelemtime(11) < 0
value = ,AP
time = 1
ignorehitpause = 1

[State 0]
type = sprpriority
trigger1 = animelemtime(2) >= 0
value = -1

[State 0]
type = velset
trigger1 = animelem = 2
x = 6
y = -6.2

[State 0]
type = playsnd
trigger1=animelem = 2
value = 101,1

[State 0]
type = playerpush
trigger1 = animelemtime(2) >= 0 && animelemtime(11) < 0
value = 0

[State 0]
type = veladd
trigger1 = animelemtime(2) > 0
y = .5

[State 0]
type = ctrlset
trigger1 = animelem = 9
value = 1

[State 105]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 62
ctrl = 0

;---------------------------------------------------------------------------
;Evasive Air Dash (land)
[Statedef 62]
type    = S
physics = N
ctrl = 0
anim = ifelse(var(0)=1,63,62)
facep2 = 1

[State 0, Explod]
type = Explod
trigger1=time = 0
anim = 6090
id = 6090
pos = 0,0
scale = ifelse(var(1)!=0,1,0.5),ifelse(var(1)!=0,1,0.5)
postype = p1
bindtime = 1
removetime = -2
sprpriority = 2
ignorehitpause = 1
removeongethit = 0
ownpal = 1
supermovetime = 999

[State 5100, 6] ;Reduce speed
type = VelMul
triggerall = vel x != 0
trigger1 = 1
x = 0.5

[State 0]
type = velset
trigger1 = time = 0
y = 0

[State 0]
type = posset
trigger1 = time = 0
y = 0

[State 0]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;ROLL
[Statedef 65]
type    = S
physics = N
ctrl = 0
anim = 65
velset = 0,0
facep2 = 1

[State 0]
type = playsnd
trigger1 = animelem = 1
value = 16,random%3
channel = 0

[State 0]
type = playerpush
trigger1 = anim = 65
value = 0

[State 750]
type = Velset
trigger1 = anim = 65
x = (16*exp((-0.0825)*(time-0)))

[State 0]
type = nothitby
trigger1 = anim = 65
value = SCA

[State 0]
type = varset
trigger1 = time = 0
sysvar(0) = 1

[State 0]
type = varset
trigger1 = p2dist x < 0
sysvar(0) = 2

[State 0]
type = statetypeset
trigger1 = anim != 65
physics = S

[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 6091
id = 6091
pos = 0,0
scale = 0.5,0.5
postype = p1
bindtime = 1
removetime = -2
sprpriority = 2
ignorehitpause = 1
removeongethit = 0
ownpal = 1
supermovetime = 999
[State 0, Explod]
type = Explod
triggerall = anim = 66 || anim = 67
trigger1 = animelemtime(1) =0
trigger2 = animelemtime(1) =2
anim = 6092
id = 6092
pos = 0,-5
scale = 0.5,0.5
postype = p1
bindtime = 1
facing = -1
removetime = -2
sprpriority = 2
ignorehitpause = 1
removeongethit = 0
ownpal = 1
supermovetime = 999

[State 0]
type = changeanim
triggerall = anim = 65 && animtime = 0
trigger1 = sysvar(0) = 1
value = 67
[State 0]
type = changeanim
triggerall = anim = 65 && animtime = 0
trigger1 = sysvar(0) = 2
value = 66

[State 0]
type = turn
trigger1 = anim = 66
persistent = 0

[State 0]
type = changestate
trigger1 = anim = 66 && animtime = 0
trigger2 = anim = 67 && animtime = 0
value = 0
ctrl = 1

[State 0]
type = ctrlset
trigger1 = anim = 66 && animelem = 3
trigger2 = anim = 67 && animelem = 3
value = 1




;---------------------------------------------------------------------------
; Run forward
[Statedef 100]
type    = S
physics = N
movetype = I
anim = 100
ctrl = 0
facep2 = 1

[State 0]
type=AfterImage
trigger1=prevstateno = [1000,1002]
time=-1
trans = add
timegap = 1
framegap = 1
length = 9
palbright = 0,0,0
palcontrast = 40,40,40
palpostbright = 0,0,0
paladd = 0,0,0
palmul = .8,.8,.8


[State 0]
type = playsnd
trigger1 = animelem = 1
value = 0,12

[State 0]
type = playsnd
trigger1 = animelem = 1
value = 17,random%2
channel = 0

[State 0]
type = width
trigger1 = animelemtime(2) >= 0
player = 24,24
ignorehitpause = 1

[State 0, Explod]
type = Explod
trigger1 = animelem = 2
anim = 6091
id = 6091
pos = 0,0
scale = 0.5,0.5
postype = p1
bindtime = 1
removetime = -2
sprpriority = 2
ignorehitpause = 1
removeongethit = 0
ownpal = 1
supermovetime = 999
[State 0, Explod]
type = Explod
trigger1 = animelemtime(4) =0
trigger2 = animelemtime(8) =0
anim = 6092
id = 6092
pos = 0,-5
scale = 0.5,0.5
postype = p1
bindtime = 1
facing = -1
removetime = -2
sprpriority = 2
ignorehitpause = 1
removeongethit = 0
ownpal = 1
supermovetime = 999

[State 100, 1]
type = VelSet
trigger1 = animelem = 2
x = const(velocity.run.fwd.x)

[State 100, 2] ;Prevent run from canceling into walk
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 100, 3] ;Prevent from turning
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 100, 4]
type = ChangeState
triggerall = time > 15
trigger1 = command != "holdfwd"
trigger2 = ailevel != 0 && p2bodydist x <= 40
value = 101
ctrl = 0

[State 99]
type = ChangeState
trigger1 = command = "holdup"
value = 40

;---------------------------------------------------------------------------
; Run End
[Statedef 101]
type    = S
physics = N
anim = 101
facep2 = 1

[State 0]
type = width
trigger1 = animelemtime(1) = 0
player = 32,32
ignorehitpause = 1

[State 0]
type = posadd
trigger1 = animelemtime(2) = 0
x = const720p(100)
[State 0]
type = posadd
trigger1 = animelemtime(5) = 0
x = const720p(50)

[State 0]
type = playsnd
trigger1 = animelem = 1
value = 0,13

[State 0, Explod]
type = Explod
trigger1 = animelem = 2
anim = 6091
id = 6091
pos = 10,0
scale = 0.5,0.5
postype = p1
bindtime = 1
removetime = -2
sprpriority = 2
ignorehitpause = 1
removeongethit = 0
facing = -1
ownpal = 1
supermovetime = 999


[State 5100, 6] ;Reduce speed
type = VelMul
triggerall = vel x != 0
trigger1 = 1
x = 0.5

[State 100, 3] ;Prevent from turning
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 100, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Hop Backwards
[Statedef 105]
type    = S
physics = S
anim = 105
ctrl = 0
facep2 = 1

[State 0]
type = hitby
trigger1 = time = [0,7]
value = ,AP, HA
time = 1
ignorehitpause = 1

[State 0]
type = nothitby
trigger1 = time = [0,7]
value = ,AT, NA, SA
time = 1
ignorehitpause = 1

[State 0]
type = playsnd
trigger1 = animelem = 1
value = 16,random%3
channel = 0

[State 0]
type = velset
trigger1 = animelem = 2
x = -7
y = -3

[State 0]
type = veladd
trigger1 = animelemtime(2) > 0
y = .5

[State 105]
type = StateTypeSet
trigger1 = animelem = 2
Statetype = A
Physics = N

[State 0]
type = playsnd
trigger1 = animelem = 2
value = 0,1

[State 0, Explod]
type = Explod
trigger1 = animelem = 2
anim = 6092
id = 6092
pos = 0,-5
scale = 0.5,0.5
postype = p1
bindtime = 1
facing = -1
removetime = -2
sprpriority = 2
ignorehitpause = 1
removeongethit = 0
ownpal = 1
supermovetime = 999

[State 105]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 106

;---------------------------------------------------------------------------
; Hop Backwards (Land)
[Statedef 106]
type    = S
physics = N
anim = 106
ctrl = 0
velset = 0,0

[State 0]
type = posadd
trigger1 = time = 0
x = -24

[State 0, Explod]
type = Explod
trigger1= time = 0
anim = 6090
id = 6090
pos = 0,0
scale = 0.5,0.5
postype = p1
bindtime = 1
removetime = -2
sprpriority = 2
ignorehitpause = 1
removeongethit = 0
ownpal = 1
supermovetime = 999

[State 0]
type = playsnd
trigger1 = time = 0
value = 0,0

[State 106]
type = posset
trigger1 = time = 0
y = 0

[State 106]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Hop Backwards (Land)
[Statedef 107]
type    = U
physics = U
anim = 106
velset = -10,0
ctrl = 0

[State 0]
type = velset
trigger1 = animelem = 1
y = 0

[State 106]
type = posset
trigger1 = animelem = 1
y = 0

[State 0, Explod]
type = Explod
trigger1 = animelem = 3
anim = 6090
id = 6090
pos = 0,0
scale = 0.5,0.5
postype = p1
bindtime = 1
removetime = -2
sprpriority = 2
ignorehitpause = 1
removeongethit = 0
ownpal = 1
supermovetime = 999

[State 0]
type = velset
trigger1 = animelem = 3
x = 0

[State 0]
type = statetypeset
trigger1 = animelem = 3
statetype = S
physics = S

[State 106]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; GUARD (start)
[Statedef 120]
type = U    ;Leave state type unchanged
physics = U ;Leave physics unchanged

[State 120, 2]
type = StateTypeSet
trigger1 = Time = 0 && statetype = S
physics = S

[State 120, 3]
type = StateTypeSet
trigger1 = Time = 0 && statetype = C
physics = C

[State 120, 4]
type = StateTypeSet
trigger1 = Time = 0 && statetype = A
physics = A

[State 0]
type = changestate
triggerall = statetype = S
trigger1 = time = 0
value = 20
ctrl = 1
[State 0]
type = changestate
triggerall = statetype = C
trigger1 = time = 0
value = 11
ctrl = 1
[State 0]
type = changestate
triggerall = statetype = A
trigger1 = time = 0
value = 50
ctrl = 1

[State 120, 1]
type = ChangeAnim
trigger1 = Time = 0
value = 120 + (statetype = C) + (statetype = A)*2

[State 120, Hi to Lo]
type = StateTypeSet
trigger1 = statetype = S && command = "holddown"
statetype = C
physics = C

[State 120, Lo to Hi]
type = StateTypeSet
trigger1 = statetype = C && command != "holddown"
statetype = S
physics = S

[State 120, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 130 + (statetype = C) + (statetype = A)*2

[State 120, Stop Guarding]
type = ChangeState
trigger1 = command != "holdback"
trigger2 = !inguarddist
value = 140

;---------------------------------------------------------------------------
; Air guard (guarding)
[Statedef 132]
type    = A
physics = N

[State 132, 1]
type = ChangeAnim
trigger1 = Anim != 132
value = 132

[State 132, 2]
type = VelAdd
trigger1 = 1
y = Const(movement.yaccel)

[State 132, 3]
type = VarSet
trigger1 = 1
sysvar(0) = (pos y >= 0) && (vel y > 0)

[State 132, 4]
type = VelSet
trigger1 = sysvar(0)
y = 0

[State 132, 5]
type = PosSet
trigger1 = sysvar(0)
y = 0

[State 132, 6]
type = ChangeState
trigger1 = sysvar(0)
trigger1 = command = "holdback"
trigger1 = inguarddist
value = 130

[State 132, 7]
type = ChangeState
trigger1 = sysvar(0)
value = 52

[State 130, Stop Guarding]
type = ChangeState
trigger1 = command != "holdback"
trigger1 = !inguarddist
value = 140
ctrl = 1

[State 130, Stop Guarding]
type = ChangeState
trigger1 = movetype = H
value = 140
ctrl = 1

;---------------------------------------------------------------------------
; Guard (end)
[Statedef 140]
type = U    ;Leave state type unchanged
physics = U ;Leave physics unchanged
ctrl = 1

[State 0]
type = changestate
triggerall = statetype = S
trigger1 = time = 0
value = 0
ctrl = 1
[State 0]
type = changestate
triggerall = statetype = C
trigger1 = time = 0
value = 11
ctrl = 1

[State 140, 1]
type = ChangeAnim
trigger1 = Time = 0
value = 140 + (statetype = C) + (statetype = A)*2

[State 140, 2]
type = StateTypeSet
trigger1 = Time = 0 && statetype = S
physics = S

[State 140, 3]
type = StateTypeSet
trigger1 = Time = 0 && statetype = C
physics = C

[State 140, 4]
type = StateTypeSet
trigger1 = Time = 0 && statetype = A
physics = A

[State 140, Hi to Lo]
type = StateTypeSet
trigger1 = statetype = S && command = "holddown"
statetype = C
physics = C

[State 140, Lo to Hi]
type = StateTypeSet
trigger1 = statetype = C && command != "holddown"
statetype = S
physics = S

[State 0]
type = changestate
triggerall = anim = 142
trigger1 = animelem = 3
value = 51
ctrl = 1

;---------------------------------------------------------------------------
; Stand guard hit (shaking)
[Statedef 150]
type    = S
movetype= H
physics = N
velset = 0,0

;----------------JUST GUARD
[State 0]
type = varset
trigger1 = time = [1,4]
trigger1 = command = "back"
var(5) = 0
[State 0]
type = varset
trigger1 = time = [1,4]
trigger1 = command = "back"
var(6) = 1
[State 0]
type = varset
triggerall = var(5) < 9
trigger1 = time = 0
var(6) = 1
[State 0, PalFX]; Just Guard Glow
type = PalFX
triggerall = var(5) < 9
trigger1 = time = 0
time = 10
sinadd = 128,128,128,20
invertall = 0
color = 256
;persistent = 0
ignorehitpause = 1

;---------------------------------

[State 150, 1]
type = ChangeAnim
trigger1 = 1
value = 150

[State 150, 2]
type = ChangeState
trigger1 = HitShakeOver
value = 151 + 2*(command = "holddown")

[State 150, Hi to Lo]
type = StateTypeSet
trigger1 = statetype = S && command = "holddown"
statetype = C
physics = C

[State 150, Lo to Hi]
type = StateTypeSet
trigger1 = statetype = C && command != "holddown"
statetype = S
physics = S

[State 150, 3]
type = ForceFeedback
trigger1 = time = 0
waveform = square
time = 3

;---------------------------------------------------------------------------
; Crouch guard hit (shaking)
[Statedef 152]
type    = C
movetype= H
physics = N
velset = 0,0

;----------------JUST GUARD
[State 0]
type = varset
trigger1 = time = [1,4]
trigger1 = command = "back"
var(5) = 0
[State 0]
type = varset
trigger1 = time = [1,4]
trigger1 = command = "back"
var(6) = 1
[State 0]
type = varset
triggerall = var(5) < 9
trigger1 = time = 0
var(6) = 1
[State 0, PalFX]; Just Guard Glow
type = PalFX
triggerall = var(5) < 9
trigger1 = time = 0
time = 10
sinadd = 128,128,128,20
invertall = 0
color = 256
;persistent = 0
ignorehitpause = 1

;---------------------------------

[State 152, 1]
type = ChangeAnim
trigger1 = 1
value = 151

[State 152, 3]
type = ChangeState
trigger1 = HitShakeOver
value = 151 + 2*(command = "holddown")

[State 152, Hi to Lo]
type = StateTypeSet
trigger1 = statetype = S && command = "holddown"
statetype = C
physics = C

[State 152, Lo to Hi]
type = StateTypeSet
trigger1 = statetype = C && command != "holddown"
statetype = S
physics = S

[State 152, 4]
type = ForceFeedback
trigger1 = time = 0
waveform = square
time = 4

;---------------------------------------------------------------------------
; Air guard hit (shaking)
[Statedef 154]
type    = A
movetype= H
physics = N
velset = 0,0

;----------------JUST GUARD
[State 0]
type = varset
trigger1 = time = [1,4]
trigger1 = command = "back"
var(5) = 0
[State 0]
type = varset
trigger1 = time = [1,4]
trigger1 = command = "back"
var(6) = 1
[State 0]
type = varset
triggerall = var(5) < 9
trigger1 = time = 0
var(6) = 1
[State 0, PalFX]; Just Guard Glow
type = PalFX
triggerall = var(5) < 9
trigger1 = time = 0
time = 10
sinadd = 128,128,128,20
invertall = 0
color = 256
;persistent = 0
ignorehitpause = 1

;---------------------------------

[State 154, 1]
type = ChangeAnim
trigger1 = 1
value = 152

[State 154, 2]
type = ChangeState
trigger1 = HitShakeOver
value = 155 ;AGUARDHIT2
ctrl = 1

[State 154, 3]
type = ForceFeedback
trigger1 = time = 0
waveform = square
time = 4

;---------------------------------------------------------------------------
; Air guard hit (knocked away)
[Statedef 155]
type    = A
movetype= H
physics = N
anim = 153

[State 151, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 155, 2]
type = VelAdd
trigger1 = 1
y = Const(movement.yaccel)

[State 151, 4]
type = Changeanim
triggerall = anim != 154
trigger1 = Time = GetHitVar(ctrltime)
value = 154

[State 155, 3]
type = null;CtrlSet
trigger1 = anim = 154
value = 1

[State 0]
type = changestate
triggerall = roundstate >= 2
triggerall = anim = 154
trigger1= command = "FF"
trigger2 = command = "a" && command =  "holdfwd"
value = 61

[State 155, 4]
type = VarSet
trigger1 = 1
sysvar(0) = (pos y >= 0) && (vel y > 0)

[State 155, 5]
type = VelSet
trigger1 = sysvar(0)
y = 0

[State 155, 6]
type = PosSet
trigger1 = sysvar(0)
y = 0

[State 155, 6]
type = ChangeState
trigger1 = sysvar(0)
trigger1 = command = "holdback"
trigger1 = inguarddist
value = 130

[State 155, 7]
type = ChangeState
trigger1 = sysvar(0)
value = 52

;---------------------------------------------------------------------------
; Stand guard hit (knocked back)
[Statedef 151]
type    = S
movetype= H
physics = S
anim = 150

[State 151, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 151, 2]
type = VelSet
trigger1 = ifelse(var(6)=1,Time = GetHitVar(slidetime)/2,Time = GetHitVar(slidetime))
trigger2 = HitOver
x = 0

[State 151, 3]
type = CtrlSet
trigger1 = ifelse(var(6)=1,Time = GetHitVar(slidetime)/2,Time = GetHitVar(slidetime))
value = 1

[State 151, Hi to Lo]
type = StateTypeSet
trigger1 = statetype = S && command = "holddown"
statetype = C
physics = C

[State 151, Lo to Hi]
type = StateTypeSet
trigger1 = statetype = C && command != "holddown"
statetype = S
physics = S

[State 151, 4]
type = ChangeState
trigger1 = HitOver
value = 130
ctrl = 1

;---------------------------------------------------------------------------
; Crouch guard hit (knocked back)
[Statedef 153]
type    = C
movetype= H
physics = C
anim = 151

[State 153, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 153, 2]
type = VelSet
trigger1 = ifelse(var(6)=1,Time = GetHitVar(slidetime)/2,Time = GetHitVar(slidetime))
trigger2 = HitOver
x = 0

[State 153, 3]
type = CtrlSet
trigger1 = ifelse(var(6)=1,Time = GetHitVar(slidetime)/2,Time = GetHitVar(slidetime))
value = 1

[State 153, Hi to Lo]
type = StateTypeSet
trigger1 = statetype = S && command = "holddown"
statetype = C
physics = C

[State 153, Lo to Hi]
type = StateTypeSet
trigger1 = statetype = C && command != "holddown"
statetype = S
physics = S

[State 153, 4]
type = ChangeState
trigger1 = HitOver
value = 131
ctrl = 1

;---------------------------------------------------------------------------
; Air guard hit (knocked away)
[Statedef 155]
type    = A
movetype= H
physics = N
anim = 152

[State 155, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 155, 2]
type = VelAdd
trigger1 = 1
y = Const(movement.yaccel)

[State 155, 3]
type = CtrlSet
trigger1 = ifelse(var(6)=1,Time = GetHitVar(ctrltime)/2,Time = GetHitVar(ctrltime))
value = 1

[State 155, 4]
type = VarSet
trigger1 = 1
sysvar(0) = (pos y >= 0) && (vel y > 0)

[State 155, 5]
type = VelSet
trigger1 = sysvar(0)
y = 0

[State 155, 6]
type = PosSet
trigger1 = sysvar(0)
y = 0

[State 155, 6]
type = ChangeState
trigger1 = sysvar(0)
trigger1 = command = "holdback"
trigger1 = inguarddist
value = 130

[State 155, 7]
type = ChangeState
trigger1 = sysvar(0)
value = 52

;---------------------------------------------------------------------------
;Rapid
[Statedef 808]
type=A
movetype=I
physics=N
velset = 0,0
anim = 1
ctrl=0
sprpriority=9

[State 0]
type = playsnd
trigger1 = time = 0
value = 0,7

[State 0]
type = varset
triggerall = root,HitPauseTime = 0
trigger1 = root,stateno = [0,9999]
var(1) = 1
[State 0]
type = varadd
trigger1 = var(1) = 1
var(10) = 1

[State 0]
type=DestroySelf
trigger1= var(10) = 10

;---------------------------------------------------------------------------
; Stand get-hit (shaking)
[Statedef 5000]
type    = S
movetype= H
physics = N
velset = 0,0

[State 5000, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
triggerall = enemynear,statetype != A
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(groundtype) = 1),5000,5010) + GetHitVar(animtype)


[State 5000, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
triggerall = enemynear,statetype = A
triggerall = enemynear,pos y > -30
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = 5010 + GetHitVar(animtype)
[State 5000, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
triggerall = enemynear,statetype = A
triggerall = enemynear,pos y <= -30
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = 5000 + GetHitVar(animtype)




[State 5000, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030
[State 5000, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) ;5051 - 4 + type

[State 5000, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5000, 5] ;State type gets set to aerial if getting hit up
type = StateTypeSet
trigger1 = Time = 0
trigger1 = GetHitVar(yvel) != 0 || GetHitVar(fall)
trigger2 = Pos Y != 0
statetype = a

[State 5000, FFB Light]
type = ForceFeedback
trigger1 = anim = 5000
trigger2 = anim = 5010
persistent = 0
time = 6
waveform = square

[State 5000, FFB Medium]
type = ForceFeedback
trigger1 = anim = 5001
trigger2 = anim = 5011
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 5000, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5012
trigger2 = anim = 5002
trigger3 = anim = 5030
persistent = 0
time = 15
waveform = sinesquare
ampl = 140

[State 5000, 6]
type = ChangeState
trigger1 = HitShakeOver
trigger1 = GetHitVar(yvel) = 0 && !GetHitVar(fall)
value = 5001 ;Stand get-hit (knocked back)

[State 5000, 7]
type = ChangeState
trigger1 = HitShakeOver
value = 5030

;---------------------------------------------------------------------------
; Stand get-hit (knocked back)
[Statedef 5001]
type    = S
movetype= H
physics = S

[State 5001, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 5001, 2]
type = ChangeAnim
trigger1 = Anim = 5000
trigger1 = gethitvar(hittime) <= 4
trigger2 = Anim = 5001
trigger2 = gethitvar(hittime) <= 8
trigger3 = Anim = 5002
trigger3 = gethitvar(hittime) <= 12
value = 5005 + GetHitVar(animtype)
persistent = 0
[State 5001, 2]
type = ChangeAnim
trigger1 = Anim = 5010
trigger1 = gethitvar(hittime) <= 4
trigger2 = Anim = 5011
trigger2 = gethitvar(hittime) <= 8
trigger3 = Anim = 5012
trigger3 = gethitvar(hittime) <= 12
value = 5015 + GetHitVar(animtype)
persistent = 0


[State 5001, 3] ;Stop sliding back
type = VelMul
trigger1 = Time >= GetHitVar(slidetime)
x = .6

[State 5001, 4]
type = VelSet
trigger1 = HitOver
x = 0

[State 5001, 5]
type = DefenceMulSet
trigger1 = HitOver
value = 1

[State 5001, 6]
type = ChangeState
trigger1 = HitOver
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Crouch get-hit (knocked back)
[Statedef 5011]
type    = C
movetype= H
physics = C

[State 5011, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 5001, 2]
type = ChangeAnim
trigger1 = Anim = 5020
trigger1 = gethitvar(hittime) <= 4
trigger2 = Anim = 5021
trigger2 = gethitvar(hittime) <= 8
trigger3 = Anim = 5022
trigger3 = gethitvar(hittime) <= 12
value = 5025 + GetHitVar(animtype)
persistent = 0

[State 5011, 3] ;Stop sliding back
type = VelMul
trigger1 = Time >= GetHitVar(slidetime)
x = .6

[State 5011, 4]
type = VelSet
trigger1 = HitOver
x = 0

[State 5011, 5]
type = DefenceMulSet
trigger1 = HitOver
value = 1

[State 5011, 6]
type = ChangeState
trigger1 = HitOver
value = 11
ctrl = 1


;================================================================================
; Tripped get-hit (knocked away)
[Statedef 5071]
type    = A
movetype= H
physics = N

[State 5071, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 5071, 2] ;Acceleration
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5071, 3] ;Hit ground
trigger1 = Vel Y > 0
trigger1 = Pos Y + Vel y >= 0
type = ChangeState
value = 5102

;---------------------------------------------------------------------------
; Downed get-hit (shaking)
[Statedef 5080]
type    = L
movetype= H
physics = N
velset = 0,0

[State 0]
type = changeanim
trigger1 = var(8) = 1
value = 5081
ignorehitpause = 1

[State 5080, 1] ;Set default anim
type = VarSet
trigger1 = time = 0
sysvar(2) = ifelse (GetHitVar(yvel) = 0, 5080, 5090)

[State 5080, 2]
type = VarAdd
trigger1 = time = 0
trigger1 = (anim = [5081,5089]) || (anim = [5111,5119])
trigger1 = SelfAnimExist(sysvar(2) + (anim % 10))
sysvar(2) = anim % 10

[State 5080, 3] ;If 5090 doesn't exist, default to 5030
type = VarSet
trigger1 = time = 0
trigger1 = sysvar(2) = 5090
trigger1 = !SelfAnimExist(5090)
sysvar(2) = 5030

[State 5080, 3] ;Freeze
type = ChangeAnim
trigger1 = 1
value = sysvar(2)

[State 5080, 4]
type = ChangeState
trigger1 = HitShakeOver
trigger1 = GetHitVar(yvel) = 0
value = 5081 ;Downed get-hit (knocked back)

[State 5080, 5]
type = ChangeState
trigger1 = HitShakeOver
trigger1 = GetHitVar(yvel) != 0
value = 5030 ;Air get-hit (knocked away)

;---------------------------------------------------------------------------
; HIT_BOUNCE (hit ground)
[Statedef 5100]
type    = L
movetype= H
physics = N

[State 0]
type = changestate
triggerall = alive=1
triggerall = GetHitVar(fall.recover) = 1
trigger1 = command = "x"
trigger2 = command = "y"
trigger3 = command = "z"
value = 5201
ctrl = 0

[State 5100, HitByFix]
type = HitBy
trigger1 = 1
value = SCA, NA, SA, HA, NP, SP, HP, NT, ST, HT

[State 0]
type = varset
trigger1 = var(8) = 0
var(8) = 10

[State 0]
type = changestate
trigger1 = var(8) = 1
value = 5102
ignorehitpause = 1

[State 5100, 1]
type = VelSet
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) = 0
trigger1 = vel x > 1
x = 1

[State 5100, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State 5100, Var] ;Save fall velocity
type = VarSet
trigger1 = Time = 0
sysvar(1) = floor(vel y)

[State 5100, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
trigger1 = (anim != [5051,5059]) && (anim != [5061,5069])
trigger2 = !SelfAnimExist(5100 + (anim % 10))
value = 5100

[State 5100, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
trigger1 = time = 0
trigger1 = (anim = [5051,5059]) || (anim = [5061,5069])
trigger1 = SelfAnimExist(5100 + (anim % 10))
value = 5100 + (anim % 10)

[State 5100, 4]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5100, 5]
type = VelSet
trigger1 = Time = 0
y = 0

[State 5100, 6] ;Reduce speed
type = VelMul
trigger1 = Time = 0
x = 0.75

[State 5100, 9]
type = HitFallDamage
trigger1 = Time = 3

[State 0, Explod]
type = Explod
trigger1= time = 0
anim = 6090
id = 6090
pos = 0,0
scale = 0.7,0.7
postype = p1
bindtime = 1
removetime = -2
sprpriority = 2
ignorehitpause = 1
removeongethit = 0
ownpal = 1
supermovetime = 999

[State 0]
type = playsnd
trigger1 = time = 0
value = 0,4

[State 5100, 11]
type = PosFreeze
trigger1 = 1

[State 5100, 12]
type = ChangeState
trigger1 = AnimTime = 0
value = 5101

[State 5100, 13]
type = ForceFeedback
trigger1 = Time = 0
waveform = sinesquare
ampl = 128,-3,-.2,.005
time = 20

;---------------------------------------------------------------------------
; HIT_BOUNCE (bounce into air)
[Statedef 5101]
type    = L
movetype= H
physics = N

[State 5101, 1] ;Coming hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim != [5101,5109]
trigger2 = !SelfAnimExist(5160 + (anim % 10))
value = 5160

[State 5101, 2] ;Coming hit ground anim (for hit up)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim = [5101,5109]
trigger1 = SelfAnimExist(5160 + (anim % 10))
value = 5160 + (anim % 10)

[State 5101, 3]
type = HitFallVel
trigger1 = Time = 0

[State 5101, 4]
type = Null;PosSet
trigger1 = Time = 0
y = 20

[State 5101, 4]
type = VelSet
trigger1 = Time = 0
y = -3

[State 5101, 5] ;Acceleration
type = VelAdd
trigger1 = time > 0
y = .5;gethitvar(yaccel)

[State 5101, 6] ;Hit ground
trigger1 = Pos Y + Vel Y >= 0
type = ChangeState
value = 5110

;---------------------------------------------------------------------------
; HIT_BOUNCE (hit ground) 2
[Statedef 5102]
type    = L
movetype= H
physics = N

[State 0]
type = changestate
triggerall = alive=1
triggerall = GetHitVar(fall.recover) = 1
trigger1 = command = "x"
trigger2 = command = "y"
trigger3 = command = "z"
value = 5201
ctrl = 0

[State 5100, HitByFix]
type = HitBy
trigger1 = 1
value = SCA, NA, SA, HA, NP, SP, HP, NT, ST, HT

[State 5100, 1]
type = VelSet
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) = 0
trigger1 = vel x > 1
x = 1

[State 5100, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State 5100, Var] ;Save fall velocity
type = VarSet
trigger1 = Time = 0
sysvar(1) = floor(vel y)

[State 5100, 2] ;Hit ground anim (normal)
type = ChangeAnim
trigger1 = time = 0
value = 5071

[State 5100, 4]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5100, 5]
type = VelSet
trigger1 = Time = 0
y = 0

[State 0, Explod]
type = Explod
trigger1= time = 0
anim = 6090
id = 6090
pos = 0,0
scale = 0.7,0.7
postype = p1
bindtime = 1
removetime = -2
sprpriority = 2
ignorehitpause = 1
removeongethit = 0
ownpal = 1
supermovetime = 999

[State 0]
type = playsnd
trigger1 = time = 0
value = 0,4

[State 5100, 6] ;Reduce speed
type = VelMul
trigger1 = Time = 0
x = 0.75

[State 5100, 7]
type = ChangeState
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) = 0
value = 5110 ;HIT_LIEDOWN

[State 5100, 9]
type = HitFallDamage
trigger1 = Time = 3

[State 5100, 11]
type = PosFreeze
trigger1 = 1

[State 5100, 12]
type = ChangeState
trigger1 = AnimTime = 0
value = 5103

[State 5100, 13]
type = ForceFeedback
trigger1 = Time = 0
waveform = sinesquare
ampl = 128,-3,-.2,.005
time = 20

;---------------------------------------------------------------------------
; HIT_BOUNCE (bounce into air) 2
[Statedef 5103]
type    = L
movetype= H
physics = S

[State 5101, 1] ;Coming hit ground anim (normal)
type = ChangeAnim
trigger1 = time = 0
value = 5072

[State 5101, 3]
type = null;HitFallVel
trigger1 = Time = 0

[State 5101, 4]
type = Null;PosSet
trigger1 = Time = 0
y = 20

[State 5101, 4]
type = null;VelSet
trigger1 = Time = 0
y = -3

[State 5101, 5] ;Acceleration
type = null;VelAdd
trigger1 = time > 0
y = .5;gethitvar(yaccel)

[State 5101, 6] ;Hit ground
type = ChangeState
triggerall = animtime = 0
trigger1 = Pos Y + Vel Y >= 0
value = 5110

;---------------------------------------------------------------------------
; HIT_BOUNCE (hit ground) 99
[Statedef 5109]
type    = L
movetype= H
physics = N

[State 0]
type = changeanim
trigger1 = time = 0
value = 5100

[State 5100, HitByFix]
type = HitBy
trigger1 = 1
value = SCA, NA, SA, HA, NP, SP, HP, NT, ST, HT

[State 0]
type = varset
trigger1 = var(8) = 0
var(8) = 11

[State 5100, 1]
type = VelSet
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) = 0
trigger1 = vel x > 1
x = 1

[State 5100, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State 5100, Var] ;Save fall velocity
type = VarSet
trigger1 = Time = 0
sysvar(1) = floor(vel y)

[State 5100, 4]
type = PosSet
trigger1 = Time = 0
y = 0

[State 0, Explod]
type = Explod
trigger1= time = 0
anim = 6090
id = 6090
pos = 0,0
scale = 0.7,0.7
postype = p1
bindtime = 1
removetime = -2
sprpriority = 2
ignorehitpause = 1
removeongethit = 0
ownpal = 1
supermovetime = 999

[State 0]
type = playsnd
trigger1 = time = 0
value = 0,4

[State 5100, 5]
type = VelSet
trigger1 = Time = 0
y = 0

[State 5100, 6] ;Reduce speed
type = VelMul
trigger1 = Time = 0
x = 0.75

[State 5100, 9]
type = HitFallDamage
trigger1 = Time = 3

[State 5100, 11]
type = PosFreeze
trigger1 = 1

[State 5100, 12]
type = ChangeState
triggerall = anim = 5100
trigger1 = AnimTime = 0
value = 5101

[State 5100, 13]
type = ForceFeedback
trigger1 = Time = 0
waveform = sinesquare
ampl = 128,-3,-.2,.005
time = 20

;================================================================================
; HIT_LIEDOWN
[Statedef 5110]
type    = L
movetype= H
physics = N
[State 5110, 0]
type = ChangeState
trigger1 = 1
value = 5111
;================================================================================
; HIT_LIEDOWN
[Statedef 5111]
type    = L
movetype= H
physics = N
velset = 0,0

[State 5110, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State 5110, 1] ;For hit up/up-diag type (from state 5081)
type = ChangeAnim
persistent = 0
triggerall = anim != 5072
trigger1 = SelfAnimExist(5110 + (anim % 10))
trigger1 = anim = [5081,5089]
value = 5110 + (anim % 10)

[State 5110, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = anim != 5072
triggerall = time = 0
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim != [5161,5169]
trigger2 = !SelfAnimExist(5170 + (anim % 10))
value = 5170

[State 5110, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
triggerall = anim != 5072
triggerall = time = 0
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim = [5161,5169]
trigger1 = SelfAnimExist(5170 + (anim % 10))
value = 5170 + (anim % 10)

[State 5110, 4]
type = HitFallDamage
trigger1 = Time = 0

[State 5110, 5]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5110, Var] ;Get fall velocity
type = VarSet
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) != 0
sysvar(1) = floor(vel y)

[State 5110, 8]
type = VelSet
trigger1 = Time = 0
y = 0

[State 5110, 9] ;For hit up type
type = ChangeAnim
persistent = 0
triggerall = anim != 5072
triggerall = anim = [5171,5179]
triggerall = SelfAnimExist(5110 + (anim % 10))
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground anim
value = 5110 + (anim % 10)

[State 5110, 10] ;For normal
type = ChangeAnim
persistent = 0
triggerall = anim != 5072
triggerall = Anim != [5111,5119]
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
value = 5110

[State 5110, 11] ;If just died
type = ChangeState
triggerall = !alive
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
trigger3 = Anim = [5110,5119]
value = 5150

[State 5110, 11] ;If just died
type = ChangeState
trigger1 = anim = 5110
trigger1 = time = 14
trigger2 = anim = 5111 || anim = 5112
trigger2 = time = 12
trigger3 = time = 9 + 10*(anim=5111||anim=5112)
value = 5120

[State 5110, 12]
type = VarSet
trigger1 = SysVar(0)
trigger1 = Time = 0
sysvar(0) = 0

[State 5110, 13] ;Friction
type = VelMul
trigger1 = 1
x = 0.85

[State 5110, 14]
type = ForceFeedback
trigger1 = alive
trigger1 = Time = 0
time = 49
ampl = 240
waveform = sine

[State 5110, 15]
type = ForceFeedback
trigger1 = !alive
trigger1 = Time = 0
ampl = 200, 7, -.467
time = 71
waveform = sine

;================================================================================
; HIT_GETUP
[Statedef 5120]
type    = L
movetype= I
physics = N

[State 5120, 1a] ;Get up anim (normal)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim = 5072
value = 5122

[State 5120, 1a] ;Get up anim (normal)
type = ChangeAnim
triggerall = time = 0
triggerall = anim != 5072
triggerall = anim != 5122
trigger1 = anim != [5111,5119]
trigger2 = !SelfAnimExist(5120 + (anim % 10))
value = 5120

[State 5120, 1b] ;Get up anim (for hit up/diag-up)
type = ChangeAnim
triggerall = time = 0
triggerall = anim != 5072
trigger1 = anim = [5111,5119]
trigger1 = SelfAnimExist(5120 + (anim % 10))
value = 5120 + (anim % 10)

[State 0]
type = playsnd
trigger1= animelemtime(1) = 1
value = 27,random%2
channel = 0

[State 5120, 2]
type = VelSet
trigger1 = Time = 0
x = 0

[State 5120, 3]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 5120, 4]
type = HitFallSet
trigger1 = AnimTime = 0
value = 1

[State 5120, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------
[State 0]
type = posadd
trigger1 = anim = 5120
trigger1 = animelem = 3
trigger2 = anim = 5121
trigger2 = animelem = 7
trigger3 = anim = 5122
trigger3 = animelem = 7
x = const720p(29)

[State 0]
type = posadd
trigger1 = anim = 5121
trigger1 = animelem = 4
x = const720p(90)

;--------

;---------------------------------------------------------------------------
; Air get-hit (fall recovery on ground; still falling)
[Statedef 5200]
type    = A
movetype= H
physics = N

[State 5200, 1] ;Change anim if done with transition
type = ChangeAnim
trigger1 = Anim = 5035
trigger1 = AnimTime = 0
value = 5050

[State 5200, 2]
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5200, 3]
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= Const(movement.air.gethit.groundrecover.groundlevel)
trigger2 = time = 1
value = 5201

;---------------------------------------------------------------------------
; HIT_FALLRECOVER (on the ground)
[Statedef 5201]
type    = S
movetype= I
physics = N
anim = 5200
velset = 0,0

[State 0]
type = playsnd
trigger1= time = 0
value = 0,6

[State 0, Explod]
type = Explod
trigger1= time = 0
anim = 6062
id = 6062
pos = 0,-50
scale = 0.5,0.5
postype = p1
bindtime = 1
removetime = -2
sprpriority = 2
ignorehitpause = 1
removeongethit = 0
ownpal = 1
supermovetime = 999

[State 5210, “_–Å]
type = PalFX
trigger1 = time <= 10
trigger1 = time%2 = 0
time = 1
add = 12,222,12

[State 0]
type = playsnd
trigger1= animelem = 1
value = 25,random%2+10
channel = 0
[State 0]
type = playsnd
trigger1= animelem = 6
value = 0,1

[State 0, Explod]
type = Explod
trigger1 = prevstateno != [5100,5199]
trigger1= time = 0
trigger2= animelem = 6
anim = 6090
id = 6090
pos = -10,0
scale = 0.7,0.7
postype = p1
bindtime = 1
removetime = -2
sprpriority = 2
ignorehitpause = 1
removeongethit = 0
ownpal = 1
supermovetime = 999

[State 5201]
type = PosSet
trigger1 = Time = 0
y = 0

[State 0]
type = posadd
trigger1 = animelem = 3
x = -66
[State 0]
type = posadd
trigger1 = animelem = 4
x = -16

[State 5201]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 5201]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Air get-hit (fall recovery in air)
[Statedef 5210]
type    = A
movetype= I
physics = N
anim = 5210
ctrl = 0
facep2 = 1

[State 0]
type = playsnd
trigger1= animelem = 1
value = 25,random%3
channel = 0

[State 0]
type = playsnd
trigger1= time = 0
value = 0,6

[State 0, Explod]
type = Explod
trigger1= time = 0
anim = 6062
id = 6062
pos = 0,-100
scale = 0.5,0.5
postype = p1
bindtime = 1
removetime = -2
sprpriority = 2
ignorehitpause = 1
removeongethit = 0
ownpal = 1
supermovetime = 999

[State 0]
type = velset
triggerall = command != "holdfwd"
triggerall = command != "holdback"
trigger1 = time = 0
x = -1
y = -8

[State 0]
type = changestate
triggerall = time > 1
triggerall = time < 3
triggerall = command != "holdback"
trigger1 = command = "holdfwd"
value = 5211
ctrl = 0
[State 0]
type = changestate
triggerall = time > 1
triggerall = time < 3
triggerall = command != "holdfwd"
trigger1 = command = "holdback"
value = 5212
ctrl = 0

[State 5210, “_–Å]
type = PalFX
trigger1 = time <= 10
trigger1 = time%2 = 0
time = 1
add = 12,222,12

[State 0]
type = veladd
trigger1 = 1
y = .75

[State 5210, 3]
type = NotHitBy
trigger1 = 1
value = SCA

[State 5210, 5] ;Land on ground
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 52 ;Jump land
ctrl = 1

;---------------------------------------------------------------------------
; Air get-hit (fall recovery in air) FWD
[Statedef 5211]
type    = A
movetype= I
physics = N
ctrl = 0
velset = 4,-8
anim = 5210

[State 5210, “_–Å]
type = PalFX
trigger1 = time <= 10
trigger1 = time%2 = 0
time = 1
add = 12,222,12

[State 0]
type = veladd
trigger1 = 1
y = .75

[State 5210, 3]
type = NotHitBy
trigger1 = 1
value = SCA

[State 5210, 5] ;Land on ground
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 52 ;Jump land
ctrl = 1

;---------------------------------------------------------------------------
; Air get-hit (fall recovery in air) BACK
[Statedef 5212]
type    = A
movetype= I
physics = N
ctrl = 0
velset = -4,-8
anim = 5210

[State 5210, “_–Å]
type = PalFX
trigger1 = time <= 10
trigger1 = time%2 = 0
time = 1
add = 12,222,12

[State 0]
type = veladd
trigger1 = 1
y = .75

[State 5210, 3]
type = NotHitBy
trigger1 = 1
value = SCA

[State 5210, 5] ;Land on ground
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 52 ;Jump land
ctrl = 1

;---------------------------------------------------------------------------
; HIT_LIEDEAD
[Statedef 5150]
type    = L
movetype= H
physics = N
sprpriority = -3

[State 0]
type = ScreenBound
trigger1 = 1
movecamera = 0,0

[State 5150, 1] ;Normal anim
type = ChangeAnim
triggerall = Time = 0
triggerall = anim != 5072
trigger1 = anim = 5950
value = 5151

[State 5150, 1] ;Normal anim
type = ChangeAnim
triggerall = Time = 0
triggerall = anim != 5072
trigger1 = anim = 5112
value = 5151

[State 5150, 1] ;Normal anim
type = ChangeAnim
triggerall = Time = 0
triggerall = anim != 5072
trigger1 = anim = 5111
value = 5151

[State 5150, 1] ;Normal anim
type = ChangeAnim
triggerall = Time = 0
triggerall = anim != 5072
trigger1 = anim = 5110
value = 5150

[State 5150, 5] ;Switch to 5110 if liedead anim does not exist
type = ChangeAnim
triggerall = anim != 5072
trigger1 = PrevStateno != 5950
trigger1 = Time = 0
trigger1 = Anim != [5140,5159]
trigger1 = Anim != [5110,5119]
value = 5110

[State 5150, 6] ;Friction
type = VelMul
trigger1 = 1
x = 0.85

[State 5150, 7] ;Friction
type = VelSet
trigger1 = abs(Vel x) < Const(movement.down.friction.threshold)
persistent = 0
x = 0

[State 5150, 8]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
[Statedef 5205]
type=A
movetype=H
physics=N

[State 5205, End]; Sends character back to his own recovery states
type = selfstate
trigger1 = 1
;value = 5210
value = ifelse(pos y <-5, 5210, 5200)

;----------------------------------------------------------------------------------
; Cheap KO
[Statedef 5950]
physics = S
movetype = H
ctrl = 0
velset = 0,0

[State 5950, 4]
type = null;NotHitBy
trigger1 = 1
value = SCA
ignorehitpause = 1
pausemovetime = 99999999
supermovetime = 99999999

[State 0]
type = posset
trigger1 = time = 0
y = 0

[State 5950, 1]
type = HitVelSet
trigger1 = Time = 0
x = 2

[State 5950, 4]
type = VelSet
trigger1 = HitOver
x = 0

[State 5950, 4]
type = ChangeAnim
trigger1 = !HitOver
value = ifElse(Var(11)=0,5010,5020)

[State 190, 4]
type = ChangeAnim
trigger1 = HitOver
value = 5955
persistent = 0

[State 0, Explod]
type = Explod
trigger1= animelem = 9
anim = 6090
id = 6090
pos = 0,0
scale = 0.7,0.7
postype = p1
bindtime = 1
removetime = -2
sprpriority = 2
ignorehitpause = 1
removeongethit = 0
ownpal = 1
persistent = 0
supermovetime = 999
[State 0]
type = playsnd
trigger1 = animelem = 9
value = 0,4
persistent = 0

[State 1100, ChangeState]
type = ChangeState
trigger1 = anim = 5955
trigger1 = !animtime
trigger2 = anim = 5950
trigger2 = !animtime
value = 5150


;---------------------------------------------------------------------------
; Lose by Time Over
[Statedef 170]
type = S
ctrl = 0
anim = 2
velset = 0,0

[State 0]
type = playsnd
trigger1 = animelem = 1
value = 41,random%3
channel = 0

[State 0]
type = nothitby
trigger1 = 1
value = SCA
pausemovetime = 999999
supermovetime = 999999

;---------------------------------------------------------------------------
; Win state decider
[Statedef 180]
type = S

[State 180, 1]
type = ChangeState
triggerall = Time = 0
trigger1 = var(56) < 2
value = 181

[State 180, 1]
type = ChangeState
triggerall = Time = 0
trigger1 = var(56) >= 2
value = 182

;---------------------------------------------------------------------------
; Win pose 1
[Statedef 181]
type = S
ctrl = 0
anim = 181
velset = 0,0

[State 0]
type = playsnd
trigger1 = animelem = 1
value = 42,random%2
channel = 0
persistent = 0

[State 0]
type = playsnd
trigger1 = animelem = 4
value = 100,3
persistent = 0


;---------------------------------------------------------------------------
; Win pose 2
[Statedef 182]
type = S
ctrl = 0
anim = 181
velset = 0,0

[State 0]
type = playsnd
trigger1 = animelem = 1
value = 42,random%4+2
channel = 0
persistent = 0

[State 0]
type = playsnd
trigger1 = animelem = 4
value = 100,3
persistent = 0

;---------------------------------------------------------------------------
; Win pose FX
[Statedef 183]
type = A
ctrl = 0
anim = 1
velset = 0,0

[State 0]
type = destroyself
trigger1 = root,animelem = 6
removeexplods = 1 

[State 0]
type = bindtoroot
trigger1 = root,animelem = 1
pos = const720p(-44),const720p(-199)
[State 0]
type = bindtoroot
trigger1 = root,animelem = 2
pos = const720p(-70),const720p(-239)
[State 0]
type = bindtoroot
trigger1 = root,animelem = 3
pos = const720p(-69),const720p(-312)
[State 0]
type = bindtoroot
trigger1 = root,animelem = 4
pos = const720p(-48),const720p(-352)
[State 0]
type = bindtoroot
trigger1 = root,animelem = 5
pos = const720p(6),const720p(-410)

;--------

[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 183
id = 183
pos = 0,0
scale = const720p(1),const720p(1)
postype = p1
bindtime = -1
removetime = -1
sprpriority = 2
ignorehitpause = 1
removeongethit = 0
ownpal = 0

[State 0]
type = modifyexplod
trigger1 = root,animelem = 2
yangle = -30
id = 183

[State 0]
type = modifyexplod
trigger1 = root,animelemtime(3) >= 0
xangle = 4*(time-12)
id = 183



;---------------------------------------------------------------------------
;intro
[Statedef 190]
type = S
ctrl = 0
velset = 0,0

[State 0]
type = varset
trigger1 = time = 0
var(13) = 500

[State 190, 2] ;Go straight to intro.
type = ChangeState
trigger1 = Time = 0
value = 191;+random%2

;---------------------------------------------------------------------------
; Introduction
[Statedef 191]
type = S
ctrl = 0
anim = 0
velset = 0,0
anim = 191

[State 0]
type = playsnd
trigger1 = animelemtime(1) = 2
value = 40,random%4
channel = 1
persistent = 0

[State 0]
type = playsnd
trigger1 = animelem = 26
value = 100,3
persistent = 0

[State 0]
type = null
trigger1 = var(55) = 21
trigger1 = var(55) := 1
trigger2 = var(55) = 1
trigger2 = ifelse(teamside=2,command = "fwd",command = "back")
trigger2 = var(55) := 21
[State 0]
type = varadd
triggerall = var(13) > 1
trigger1 = command = "fwd" && teamside = 1
trigger2 = command = "back" && teamside = 2
var(55) = 1
[State 0]
type = varadd
triggerall = var(13) > 1
trigger1 = command = "back" && teamside = 1
trigger2 = command = "fwd" && teamside = 2
var(55) = -1
[State 0]
type = playsnd
triggerall = var(13) > 1
trigger1 = command = "fwd"
trigger2 = command = "back"
value = 1,2
abspan = 0
[State 0]
type = playsnd
trigger1 = var(13) < 1
value = 1,ifelse(ailevel != 0,-1,1)
abspan = 0
persistent = 0

[State -2] ;Hud
type=explod
triggerall = var(13) > 1
trigger1=1
anim=3065
id = 3050
bindtime=-1
removetime=1
facing=1-(teamside=2)*2
ontop=1
ownpal=1
scale = const480p(0.7),const480p(1)
pos=ifelse(teamside=1,const480p(-50),const480p(50)),-10
postype=p1
ontop = 1
ignorehitpause=1
[State -2] ;Hud
type=explod
triggerall = var(13) > 1
trigger1=1
anim=3050
id = 3050
bindtime=-1
removetime=1
facing=1-(teamside=2)*2
ontop=1
ownpal=1
scale = const480p(1),const480p(1)
pos=ifelse(teamside=1,const480p(-30),const480p(30)),-10
postype=p1
ontop = 1
ignorehitpause=1
[State -2] ;Ones
type=explod
triggerall = var(13) > 1
trigger1=1
anim=3051+(var(55)%10)
id = 3050
bindtime=-1
removetime=1
facing=1-(teamside=2)*2
ontop=1
ownpal=1
scale = const480p(1),const480p(1)
pos=ifelse(teamside=1,const480p(48),const480p(-48)),-10
postype=p1
ontop = 1
ignorehitpause=1
[State -2] ;Tens
type=explod
triggerall = var(13) > 1
trigger1=var(55)>=1  ;;  replace with ""1"" if you want them to appear even when their value is 0
anim=3051+((var(55)/10)%10)
id = 3050
bindtime=-1
removetime=1
facing=1-(teamside=2)*2
ontop=1
ownpal=1
scale = const480p(1),const480p(1)
pos=ifelse(teamside=1,const480p(30),const480p(-30)),-10
postype=p1
ontop = 1
ignorehitpause=1


[State 191, 1] ;Freeze animation until PreIntro is over
type = ChangeAnim
trigger1 = RoundState = 0
value = 191

[State 191, 2] ;Assert this until you want "round 1, fight" to begin
type = AssertSpecial
trigger1 = 1
flag = nobardisplay
flag2 = intro

[State 0]
type = changeanim
triggerall = anim = 191
trigger1 = animtime = 0
value = 0

[State 0]
type = varset
trigger1 = command = "up" || command = "down" || command = "start" 
trigger2 = ailevel != 0
var(13) = 1
persistent = 0

[State 191, 3] ;Change to stand state when done
type = ChangeState
triggerall = anim = 0
trigger1 = var(13) < 1
value = 0
ctrl = 0

;---------------------------------------------------------------------------
; Introduction 2
[Statedef 192]
type = S
ctrl = 0
anim = 0
velset = 0,0
anim = 192

[State 0]
type = playsnd
trigger1 = animelemtime(1) = 2
value = 41,random%2
channel = 1
persistent = 0

[State 0]
type = playsnd
trigger1 = animelemtime(1) = 2
value = 100,4
persistent = 0

[State 0]
type = playsnd
trigger1 = animelem = 24
value = 100,5
persistent = 0

[State 0]
type = null
trigger1 = var(55) = 21
trigger1 = var(55) := 1
trigger2 = var(55) = 1
trigger2 = ifelse(teamside=2,command = "fwd",command = "back")
trigger2 = var(55) := 21
[State 0]
type = varadd
triggerall = var(13) > 1
trigger1 = command = "fwd" && teamside = 1
trigger2 = command = "back" && teamside = 2
var(55) = 1
[State 0]
type = varadd
triggerall = var(13) > 1
trigger1 = command = "back" && teamside = 1
trigger2 = command = "fwd" && teamside = 2
var(55) = -1
[State 0]
type = playsnd
triggerall = var(13) > 1
trigger1 = command = "fwd"
trigger2 = command = "back"
value = 1,2
abspan = 0
[State 0]
type = playsnd
trigger1 = var(13) < 1
value = 1,ifelse(ailevel != 0,-1,1)
abspan = 0
persistent = 0

[State -2] ;Hud
type=explod
triggerall = var(13) > 1
trigger1=1
anim=3065
id = 3050
bindtime=-1
removetime=1
facing=1-(teamside=2)*2
ontop=1
ownpal=1
scale = const480p(0.7),const480p(1)
pos=ifelse(teamside=1,const480p(-50),const480p(50)),-10
postype=p1
ontop = 1
ignorehitpause=1
[State -2] ;Hud
type=explod
triggerall = var(13) > 1
trigger1=1
anim=3050
id = 3050
bindtime=-1
removetime=1
facing=1-(teamside=2)*2
ontop=1
ownpal=1
scale = const480p(1),const480p(1)
pos=ifelse(teamside=1,const480p(-30),const480p(30)),-10
postype=p1
ontop = 1
ignorehitpause=1
[State -2] ;Ones
type=explod
triggerall = var(13) > 1
trigger1=1
anim=3051+(var(55)%10)
id = 3050
bindtime=-1
removetime=1
facing=1-(teamside=2)*2
ontop=1
ownpal=1
scale = const480p(1),const480p(1)
pos=ifelse(teamside=1,const480p(48),const480p(-48)),-10
postype=p1
ontop = 1
ignorehitpause=1
[State -2] ;Tens
type=explod
triggerall = var(13) > 1
trigger1=var(55)>=1  ;;  replace with ""1"" if you want them to appear even when their value is 0
anim=3051+((var(55)/10)%10)
id = 3050
bindtime=-1
removetime=1
facing=1-(teamside=2)*2
ontop=1
ownpal=1
scale = const480p(1),const480p(1)
pos=ifelse(teamside=1,const480p(30),const480p(-30)),-10
postype=p1
ontop = 1
ignorehitpause=1

;--------------------

[State 0]
type = Helper
triggerall = anim = 192
trigger1 = animelemtime(4) = 1
pos = 18,-105
postype = p1
stateno = 193
helpertype = normal
sprpriority = 99
ownpal = 1
persistent = 0
ignorehitpause = 1
supermovetime = 9999999
pausemovetime = 9999999
size.xscale = 1
size.yscale = 1

[State 0]
type = Helper
trigger1 = animelem = 24
pos = 0,0
postype = p1
stateno = 4020
helpertype = normal
sprpriority = 99
ownpal = 1
persistent = 0
ignorehitpause = 1
supermovetime = 9999999
pausemovetime = 9999999
size.xscale = 1
size.yscale = 1

;--------------------

[State 191, 1] ;Freeze animation until PreIntro is over
type = ChangeAnim
trigger1 = RoundState = 0
value = 192

[State 191, 2] ;Assert this until you want "round 1, fight" to begin
type = AssertSpecial
trigger1 = 1
flag = nobardisplay
flag2 = intro

[State 0]
type = changeanim
triggerall = anim = 192
trigger1 = animtime = 0
value = 0

[State 0]
type = varset
trigger1 = command = "up" || command = "down" || command = "start" 
trigger2 = ailevel != 0
var(13) = 1
persistent = 0

[State 191, 3] ;Change to stand state when done
type = ChangeState
triggerall = anim = 0
trigger1 = var(13) < 1
value = 0
ctrl = 0

;---------------------------------------------------------------------------
;INTRO FX
[Statedef 193]
type = S
ctrl = 0
anim = 1
sprpriority = 2

[State 0, PalFX]
type = PalFX
trigger1 = root,var(55) = 1 || root,var(55) = 5 || root,var(55) = 6 || root,var(55) = 7 || root,var(55) = 8 || root,var(55) = 10
time = 500
mul = 256,0,0
sinadd = -224,-224,-224,40
persistent = 0
[State 0, PalFX]
type = PalFX
trigger1 = root,var(55) = 2 || root,var(55) = 14
time = 500;
mul = 0,240,256
sinadd = -224,-224,-224,40
persistent = 0
[State 0, PalFX]
type = PalFX
trigger1 = root,var(55) = 3
time = 500;
mul = 254,256,0
sinadd = -224,-224,-224,40
persistent = 0
[State 0, PalFX]
type = PalFX
trigger1 = root,var(55) = 4
time = 500;
mul = 182,0,256
sinadd = -224,-224,-224,36
persistent = 0
[State 0, PalFX]
type = PalFX
trigger1 = root,var(55) = 9
time = 500
mul =0,255,0
sinadd = -224,-224,-224,40
color = 256
persistent = 0
[State 0, PalFX]
type = PalFX
trigger1 = root,var(55) = 11 || root,var(55) = 17
time = 500
mul = 50,95,210
sinadd = -224,-224,-224,40
color = 256
persistent = 0
[State 0, PalFX]
type = PalFX
trigger1 = root,var(55) = 12
time = 100
mul = 255,80,0
sinadd = 0,0,0,255
color = 256
[State 0, PalFX]
type = PalFX
trigger1 = root,var(55) = 13
time = 100
mul = 147,148,152
sinadd = 0,0,0,255
color = 256
[State 0, PalFX]
type = PalFX
trigger1 = root,var(55) = 15 || root,var(55) = 18
time = 100
mul = 108,108,108
sinadd = 0,0,0,255
color = 256
[State 0, PalFX]
type = PalFX
trigger1 = root,var(55) = 16 || root,var(55) = 19
time = 100
mul = 251,74,155
sinadd = 0,0,0,255
color = 256
[State 0, PalFX]
type = PalFX
trigger1 = root,var(55) = 20
time = 100
mul = 54,54,54
sinadd = 0,0,0,255
color = 256

[State 0]
type = bindtoroot
trigger1 = root,animelem = 7
pos = 34,-106
[State 0]
type = bindtoroot
trigger1 = root,animelem = 9
pos = 39,-105
[State 0]
type = bindtoroot
trigger1 = root,animelem = 13
pos = 42,-105
[State 0]
type = bindtoroot
trigger1 = root,animelem = 16
pos = 43,-104
[State 0]
type = bindtoroot
trigger1 = root,animelem = 19
pos = 44,-104

[State 0, Explod]
type = Explod
trigger1 = time = 0
pos = 0,0
anim = 6507
id = 6507
scale = 0.3,0.5
postype = p1 
bindtime = -1
xangle = -60
removetime = -1
sprpriority = 90
ignorehitpause = 1
removeongethit = 1
ownpal = 1
supermovetime = 999
[State 0, Explod]
type = Explod
trigger1 = time = 0
pos = 0,0
anim = 6501
id = 6501
scale = 0.2,0.2
postype = p1 
bindtime = -1
removetime = -1
sprpriority = 90
ignorehitpause = 1
removeongethit = 1
ownpal = 0
supermovetime = 999
[State 0, Explod]
type = Explod
trigger1 = time = 0
pos = -4,0
anim = 7034
id = 7034
scale = 0.3,0.3
postype = p1 
bindtime = -1
removetime = -1
sprpriority = 90
trans = addalpha
alpha = 128,256
ignorehitpause = 1
removeongethit = 1
ownpal = 0
supermovetime = 999

[State 0]
type = modifyexplod
trigger1 = 1
angle = 20*(time-0)
id = 6501

[State 0]
type = destroyself
trigger1 = roundstate >= 2
trigger2 = root,animelem = 20
removeexplods = 1

;---------------------------------------------------------------------------
;Taunt
[Statedef 195]
type = S
ctrl = 0
anim = 195
velset = 0,0
movetype = I
physics = S
sprpriority = 2

[State 195, 1]
type = CtrlSet
trigger1 = Time = 40
value = 1

[State 195, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Chain Shift
[Statedef 3000]
type     = U
movetype = A
physics  = N
juggle   = 0
poweradd = 0
ctrl     = 0
anim     = 3025
facep2 = 1

[State 0]
type = varset
triggerall = time = 0
trigger1 = statetype != A
sysvar(0) = 1
[State 0]
type = varset
triggerall = time = 0
trigger1 = statetype = A
sysvar(0) = 2 

[State 750]
type = Velset
triggerall = sysvar(0) = 1
trigger1 = AnimElemTime(1) >= 0
y = (-24*exp((-0.6)*(time-0)))

[State 0]
type = statetypeset
trigger1 = animelem = 1
statetype = A

[State 0]
type = velset
trigger1 = animelem = 5
y = 0
ignorehitpause = 1

[State 0, PalFX]
type = PalFX
trigger1 = time = 0
time = 1
sinadd = 128,128,128,20
invertall = 0
color = 256
persistent = 0
ignorehitpause = 1

[State 0]
type=AfterImage
trigger1=time = 0
time=-1
trans = add
timegap = 1
framegap = 1
length = 10
palbright = 0,0,0
palcontrast = 80,80,80;40,40,40
palpostbright = 40,40,40;0,0,0
paladd = 0,0,0
palmul = .8,.8,.8

[State 0]
type = posset
triggerall = time = 0
trigger1 = statetype != A
y = 0
supermovetime = 9999999
pausemovetime = 9999999

[State 0]
type = statetypeset
triggerall = animelem = 1
trigger1 = statetype = C
statetype = S
supermovetime = 9999999
pausemovetime = 9999999

[State 0]
type = playsnd
trigger1 = animelem = 1
value = 19,random%2
;channel = 0

[State 0]
type = nothitby
trigger1 = animelemtime(4) < 0
value = SCA
ignorehitpause = 1

[State 0]
type = varset
triggerall = animelem = 1 && statetype = A
trigger1 = vel x = 0
sysvar(2) = 1
[State 0]
type = varset
triggerall = animelem = 1 && statetype = A
trigger1 = vel x > 0
sysvar(2) = 2
[State 0]
type = varset
triggerall = animelem = 1 && statetype = A
trigger1 = vel x < 0
sysvar(2) := 3

[State 0,2]
type = velset
trigger1 = animelem = 1
x = 0
y = 0
[State 0]
Type = EnvShake
trigger1 = animelem = 1
Time  = 15
Ampl  = 4
Freq  = 90
persistent = 0

[State 0]
type = Helper
trigger1 = animelem = 1
pos = 0,-80
postype = p1
stateno = 4050
helpertype = normal
sprpriority = -5
ownpal = 1
persistent = 0
ignorehitpause = 1
supermovetime = 9999999
pausemovetime = 9999999
size.xscale = 1
size.yscale = 1

[State 0]
type = Helper
triggerall = statetype != A
trigger1 = animelem = 1
pos = 40,10
postype = p1
stateno = 4501
helpertype = normal
sprpriority = -5
ownpal = 1
persistent = 0
ignorehitpause = 1
supermovetime = 9999999
pausemovetime = 9999999
size.xscale = 1
size.yscale = 1
[State 0]
type = Helper
triggerall = statetype != A
trigger1 = animelem = 1
pos = -40,16
postype = p1
facing = -1
stateno = 4502
helpertype = normal
sprpriority = 5
ownpal = 1
persistent = 0
ignorehitpause = 1
supermovetime = 9999999
pausemovetime = 9999999
size.xscale = 1
size.yscale = 1

[State 0]
type = playsnd
trigger1 = animelem = 1
value = 1,4
abspan = 0

[State 0,3]
type = varset
trigger1 = animelem = 1
var(9) = 1

[State 200, 1]
type = HitDef
triggerall = !movecontact
trigger1 = 1
attr = S, NA  
damage = 0,0
animtype = Up
air.animtype = Up
guardflag =
hitflag = MAFD
;--------------------------------------------
pausetime = 0,6
guard.pausetime = 0,6
;--------------------------------------------
getpower = 0,0
givepower = 0,0
;--------------------------------------------
guard.sparkno = S1
sparkno = S1
sparkxy = -15, -45
hitsound = s2,5
guardsound = S3,0
;--------------------------------------------
ground.type = High
ground.hittime =14
ground.slidetime =  14
air.hittime  = 14
;--------------------------------------------
guard.slidetime = 13
guard.hittime = 13
airguard.ctrltime = 15
;--------------------------------------------
ground.velocity = -16,-10.5
air.velocity     = -16,-10.5
;--------------------------------------------
fall.recover = 0
fall.recovertime = 500
fall = 1
air.fall = 1
;--------------------------------------------
palfx.time = ifelse(var(7)=1,10,0)
palfx.sinadd = 255,0,0,20
;--------------------------------------------
envshake.time = 15
envshake.freq =90
envshake.ampl =4
;--------------------------------------------
fall.envshake.time =5
fall.envshake.freq =140
fall.envshake.ampl =2
;--------------------------------------------
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
;--------------------------------------------
yaccel = .5
id=3000
p2stateno = 711

[State 0]
type = Helper
trigger1 = movecontact && numtarget(3000)
pos = 10,-60
postype = p2
stateno = ifelse(movehit=1,4003,4010)
helpertype = normal
sprpriority = 99
ownpal = 1
persistent = 0
ignorehitpause = 1
supermovetime = 9999999
pausemovetime = 9999999

[State 0,5]
type = changestate
trigger1= time = 25
value = 3001
ctrl = 0

;---------------------------------------------------------------------------
;Chain Shift (end)
[Statedef 3001]
type     = U
movetype = I
physics  = N
ctrl     = 0

[State 0]
type = changeanim
triggerall = time = 0
trigger1 = statetype != A
value = 3026

[State 0]
type = changestate
triggerall = anim = 3026
trigger1 = animtime = 0
value = 0
ctrl = 1

[State 0]
type = changeanim
triggerall = time = 0
trigger1 = statetype = A
value = 3027

[State 0]
type = velset
trigger1 = 1;anim =3027 && animtime = 0
x = ifelse(sysvar(2)=1,0,ifelse(sysvar(2)=2,2,-2))

[State 0]
type = veladd
;triggerall = anim = 691
trigger1 = 1
y = .7

[State 0]
type = changeanim
triggerall = anim = 3027
trigger1 = animtime = 0
value = 691

[State 0]
type = ctrlset
trigger1 = anim = 691 && animelemtime(1) = 0
value = 1

[State 0]
type = posset
trigger1 = pos y >= 0
y = 0

[State 105]
type = ChangeState
triggerall = anim = 3027 || anim = 691
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 52
ctrl = 0

;---------------------------------------------------------------------------
;Chain Shift GREEN
[Statedef 3002]
type     = U
movetype = A
physics  = N
juggle   = 0
poweradd = 0
ctrl     = 0
anim     = 3025
facep2 = 1

[State 0, PalFX]
type = PalFX
trigger1 = time = 0
time = 1
sinadd = 128,128,128,20
invertall = 0
color = 256
persistent = 0
ignorehitpause = 1

[State 0]
type = posset
triggerall = time = 0
trigger1 = statetype != A
y = 0
supermovetime = 9999999
pausemovetime = 9999999

[State 0]
type = statetypeset
triggerall = animelem = 1
trigger1 = statetype = C
statetype = S
supermovetime = 9999999
pausemovetime = 9999999

[State 0]
type = playsnd
trigger1 = animelem = 1
value = 19,random%2
;channel = 0

[State 0]
type = nothitby
trigger1 = animelemtime(4) < 0
value = SCA
ignorehitpause = 1

[State 0]
type = varset
triggerall = animelem = 1 && statetype = A
trigger1 = vel x = 0
sysvar(2) = 1
[State 0]
type = varset
triggerall = animelem = 1 && statetype = A
trigger1 = vel x > 0
sysvar(2) = 2
[State 0]
type = varset
triggerall = animelem = 1 && statetype = A
trigger1 = vel x < 0
sysvar(2) := 3

[State 0,2]
type = velset
trigger1 = animelem = 1
x = 0
y = 0
[State 0]
Type = EnvShake
trigger1 = animelem = 1
Time  = 15
Ampl  = 4
Freq  = 90
persistent = 0

[State 0]
type = Helper
trigger1 = animelem = 1
pos = 0,-80
postype = p1
stateno = 4050
helpertype = normal
sprpriority = -5
ownpal = 1
persistent = 0
ignorehitpause = 1
supermovetime = 9999999
pausemovetime = 9999999
size.xscale = 1
size.yscale = 1


[State 0]
type = Helper
triggerall = statetype != A
trigger1 = animelem = 1
pos = 40,10
postype = p1
stateno = 4501
helpertype = normal
sprpriority = -5
ownpal = 1
persistent = 0
ignorehitpause = 1
supermovetime = 9999999
pausemovetime = 9999999
size.xscale = 1
size.yscale = 1
[State 0]
type = Helper
triggerall = statetype != A
trigger1 = animelem = 1
pos = -40,16
postype = p1
facing = -1
stateno = 4502
helpertype = normal
sprpriority = 5
ownpal = 1
persistent = 0
ignorehitpause = 1
supermovetime = 9999999
pausemovetime = 9999999
size.xscale = 1
size.yscale = 1

[State 0]
type = playsnd
trigger1 = animelem = 1
value = 1,4
abspan = 0

[State 0,3]
type = varset
trigger1 = animelem = 1
var(9) = 2

[State 200, 1]
type = HitDef
triggerall = !movecontact
trigger1 = 1
attr = S, NA  
damage = 0,0
animtype = Up
air.animtype = Up
guardflag =
hitflag = MAFD
;--------------------------------------------
pausetime = 0,6
guard.pausetime = 0,6
;--------------------------------------------
getpower = 0,0
givepower = 0,0
;--------------------------------------------
guard.sparkno = S1
sparkno = S1
sparkxy = -15, -45
hitsound = s2,5
guardsound = S3,0
;--------------------------------------------
ground.type = High
ground.hittime =14
ground.slidetime =  14
air.hittime  = 14
;--------------------------------------------
guard.slidetime = 13
guard.hittime = 13
airguard.ctrltime = 15
;--------------------------------------------
ground.velocity = -16,-10.5
air.velocity     = -16,-10.5
;--------------------------------------------
fall.recover = 0
fall.recovertime = 500
fall = 1
air.fall = 1
;--------------------------------------------
palfx.time = ifelse(var(7)=1,10,0)
palfx.sinadd = 255,0,0,20
;--------------------------------------------
envshake.time = 15
envshake.freq =90
envshake.ampl =4
;--------------------------------------------
fall.envshake.time =5
fall.envshake.freq =140
fall.envshake.ampl =2
;--------------------------------------------
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
;--------------------------------------------
yaccel = .5
id=3000
p2stateno = 711

[State 0]
type = Helper
trigger1 = movecontact && numtarget(3000)
pos = 10,-60
postype = p2
stateno = ifelse(movehit=1,4003,4010)
helpertype = normal
sprpriority = 99
ownpal = 1
persistent = 0
ignorehitpause = 1
supermovetime = 9999999
pausemovetime = 9999999

[State 0,5]
type = changestate
trigger1= time = 25
value = 3001
ctrl = 0

;---------------------------------------------------------------------------
;External
[Statedef 3009]
type    = A
movetype= I
physics = N
ctrl = 0
anim = 1
[State 0]
type = removeexplod
triggerall = 1
trigger1 = time = 0
trigger2 = root,var(12) != 0
trigger3 = root,var(9) != 0
id = 3003
[State 0]
type = bindtoroot
trigger1 = 1
pos = 0,-5
[State 0]
type = changestate
trigger1 = root,fvar(35) >= 100
value = 3010

;---------------------------------------------------------------------------
;External
[Statedef 3010]
type    = A
movetype= I
physics = N
ctrl = 0
anim = 1
[State 0]
type = removeexplod
triggerall = 1
trigger1 = time = 0
trigger2 = root,var(12) != 0
trigger3 = root,var(9) != 0
id = 3003
[State 0]
type = bindtoroot
trigger1 = 1
pos = 0,-5
[State 0,P1 Main Gauge Filler]
type = Explod
triggerall = root,var(12) = 0
triggerall = root,var(9) = 0
triggerall = roundstate >= 2
triggerall = teamside = 1
triggerall = numexplod(3003) = 0
trigger1 = 1
space = space
anim = 3009+floor(root,fvar(35)/100)
facing = 1
id = 3003
pos =0,Screenheight-const720p(84)
scale = const720p(1.33), const720p(1.33)
postype = left
bindtime = -1
removetime = -1
ontop = 1
ignorehitpause = 0
removeongethit = 0
ownpal = 1
pausemovetime = 9999999
supermovetime = 9999999
[State 0,P2 Main Gauge Filler]
type = Explod
triggerall = root,var(12) = 0
triggerall = root,var(9) = 0
triggerall = roundstate >= 2
triggerall = teamside = 2
triggerall = numexplod(3003) = 0
trigger1 = 1
space = space
anim = 3009+floor(root,fvar(35)/100)
facing = -1
id = 3003
pos =0,Screenheight-const720p(84)
scale = const720p(1.33), const720p(1.33)
postype = right
bindtime = -1
removetime = -1
ontop = 1
ignorehitpause = 0
removeongethit = 0
ownpal = 1
pausemovetime = 9999999
supermovetime = 9999999
[State 0]
type = changestate
trigger1 = root,fvar(35) >= 200
value = 3011
[State 0]
type = changestate
trigger1 = root,fvar(35) < 100
value = 3009

[State 0, Explod]
type = Explod
triggerall = teamside = 1
triggerall = prevstateno = 3009
trigger1 = time = 0
space = space
pos =const240p(12),Screenheight-const240p(5)
scale = const720p(1), const720p(1)
anim = 3009
id = 3009
angle = -90
postype = left
bindtime = -1
ontop = 1
removetime = -2
ignorehitpause = 1
removeongethit = 0
ownpal = 1
pausemovetime = 9999999
supermovetime = 9999999
[State 0, Explod]
type = Explod
triggerall = teamside = 2
triggerall = prevstateno = 3009
trigger1 = time = 0
space = space
pos = -const240p(12),Screenheight-const240p(5)
scale = const720p(1), const720p(1)
anim = 3009
id = 3009
angle = 90
postype = right
bindtime = -1
ontop = 1
removetime = -2
ignorehitpause = 1
removeongethit = 0
ownpal = 1
pausemovetime = 9999999
supermovetime = 9999999

;---------------------------------------------------------------------------
;External
[Statedef 3011]
type    = A
movetype= I
physics = N
ctrl = 0
anim = 1
[State 0]
type = removeexplod
triggerall = 1
trigger1 = time = 0
trigger2 = root,var(12) != 0
trigger3 = root,var(9) != 0
id = 3003
[State 0]
type = bindtoroot
trigger1 = 1
pos = 0,-5
[State 0,P1 Main Gauge Filler]
type = Explod
triggerall = root,var(12) = 0
triggerall = root,var(9) = 0
triggerall = roundstate >= 2
triggerall = teamside = 1
triggerall = numexplod(3003) = 0
trigger1 = 1
space = space
anim = 3009+floor(root,fvar(35)/100)
facing = 1
id = 3003
pos =0,Screenheight-const720p(84)
scale = const720p(1.33), const720p(1.33)
postype = left
bindtime = -1
removetime = -1
ontop = 1
ignorehitpause = 0
removeongethit = 0
ownpal = 1
pausemovetime = 9999999
supermovetime = 9999999
[State 0,P2 Main Gauge Filler]
type = Explod
triggerall = root,var(12) = 0
triggerall = root,var(9) = 0
triggerall = roundstate >= 2
triggerall = teamside = 2
triggerall = numexplod(3003) = 0
trigger1 = 1
space = space
anim = 3009+floor(root,fvar(35)/100)
facing = -1
id = 3003
pos =0,Screenheight-const720p(84)
scale = const720p(1.33), const720p(1.33)
postype = right
bindtime = -1
removetime = -1
ontop = 1
ignorehitpause = 0
removeongethit = 0
ownpal = 1
pausemovetime = 9999999
supermovetime = 9999999
[State 0]
type = changestate
trigger1 = root,fvar(35) >= 300
value = 3012
[State 0]
type = changestate
trigger1 = root,fvar(35) < 200
value = 3010

[State 0, Explod]
type = Explod
triggerall = teamside = 1
triggerall = prevstateno = 3010
trigger1 = time = 0
space = space
pos =const240p(12),Screenheight-const240p(5)
scale = const720p(1), const720p(1)
anim = 3009
id = 3009
angle = -90
postype = left
bindtime = -1
ontop = 1
removetime = -2
ignorehitpause = 1
removeongethit = 0
ownpal = 1
pausemovetime = 9999999
supermovetime = 9999999
[State 0, Explod]
type = Explod
triggerall = teamside = 2
triggerall = prevstateno = 3010
trigger1 = time = 0
space = space
pos = -const240p(12),Screenheight-const240p(5)
scale = const720p(1), const720p(1)
anim = 3009
id = 3009
angle = 90
postype = right
bindtime = -1
ontop = 1
removetime = -2
ignorehitpause = 1
removeongethit = 0
ownpal = 1
pausemovetime = 9999999
supermovetime = 9999999

;---------------------------------------------------------------------------
;External
[Statedef 3012]
type    = A
movetype= I
physics = N
ctrl = 0
anim = 1
[State 0]
type = removeexplod
triggerall = 1
trigger1 = time = 0
trigger2 = root,var(12) != 0
trigger3 = root,var(9) != 0
id = 3003
[State 0]
type = bindtoroot
trigger1 = 1
pos = 0,-5
[State 0,P1 Main Gauge Filler]
type = Explod
triggerall = root,var(12) = 0
triggerall = root,var(9) = 0
triggerall = roundstate >= 2
triggerall = teamside = 1
triggerall = numexplod(3003) = 0
trigger1 = 1
space = space
anim = 3009+floor(root,fvar(35)/100)
facing = 1
id = 3003
pos =0,Screenheight-const720p(84)
scale = const720p(1.33), const720p(1.33)
postype = left
bindtime = -1
removetime = -1
ontop = 1
ignorehitpause = 0
removeongethit = 0
ownpal = 1
pausemovetime = 9999999
supermovetime = 9999999
[State 0,P2 Main Gauge Filler]
type = Explod
triggerall = root,var(12) = 0
triggerall = root,var(9) = 0
triggerall = roundstate >= 2
triggerall = teamside = 2
triggerall = numexplod(3003) = 0
trigger1 = 1
space = space
anim = 3009+floor(root,fvar(35)/100)
facing = -1
id = 3003
pos =0,Screenheight-const720p(84)
scale = const720p(1.33), const720p(1.33)
postype = right
bindtime = -1
removetime = -1
ontop = 1
ignorehitpause = 0
removeongethit = 0
ownpal = 1
pausemovetime = 9999999
supermovetime = 9999999
[State 0]
type = changestate
trigger1 = root,fvar(35) >= 400
value = 3013
[State 0]
type = changestate
trigger1 = root,fvar(35) < 300
value = 3011

[State 0, Explod]
type = Explod
triggerall = teamside = 1
triggerall = prevstateno = 3011
trigger1 = time = 0
space = space
pos =const240p(12),Screenheight-const240p(5)
scale = const720p(1), const720p(1)
anim = 3009
id = 3009
angle = -90
postype = left
bindtime = -1
ontop = 1
removetime = -2
ignorehitpause = 1
removeongethit = 0
ownpal = 1
pausemovetime = 9999999
supermovetime = 9999999
[State 0, Explod]
type = Explod
triggerall = teamside = 2
triggerall = prevstateno = 3011
trigger1 = time = 0
space = space
pos = -const240p(12),Screenheight-const240p(5)
scale = const720p(1), const720p(1)
anim = 3009
id = 3009
angle = 90
postype = right
bindtime = -1
ontop = 1
removetime = -2
ignorehitpause = 1
removeongethit = 0
ownpal = 1
pausemovetime = 9999999
supermovetime = 9999999

;---------------------------------------------------------------------------
;External
[Statedef 3013]
type    = A
movetype= I
physics = N
ctrl = 0
anim = 1
[State 0]
type = removeexplod
triggerall = 1
trigger1 = time = 0
trigger2 = root,var(12) != 0
trigger3 = root,var(9) != 0
id = 3003
[State 0]
type = bindtoroot
trigger1 = 1
pos = 0,-5
[State 0,P1 Main Gauge Filler]
type = Explod
triggerall = root,var(12) = 0
triggerall = root,var(9) = 0
triggerall = roundstate >= 2
triggerall = teamside = 1
triggerall = numexplod(3003) = 0
trigger1 = 1
space = space
anim = 3009+floor(root,fvar(35)/100)
facing = 1
id = 3003
pos =0,Screenheight-const720p(84)
scale = const720p(1.33), const720p(1.33)
postype = left
bindtime = -1
removetime = -1
ontop = 1
ignorehitpause = 0
removeongethit = 0
ownpal = 1
pausemovetime = 9999999
supermovetime = 9999999
[State 0,P2 Main Gauge Filler]
type = Explod
triggerall = root,var(12) = 0
triggerall = root,var(9) = 0
triggerall = roundstate >= 2
triggerall = teamside = 2
triggerall = numexplod(3003) = 0
trigger1 = 1
space = space
anim = 3009+floor(root,fvar(35)/100)
facing = -1
id = 3003
pos =0,Screenheight-const720p(84)
scale = const720p(1.33), const720p(1.33)
postype = right
bindtime = -1
removetime = -1
ontop = 1
ignorehitpause = 0
removeongethit = 0
ownpal = 1
pausemovetime = 9999999
supermovetime = 9999999
[State 0]
type = changestate
trigger1 = root,fvar(35) >= 500
value = 3014
[State 0]
type = changestate
trigger1 = root,fvar(35) < 400
value = 3012

[State 0, Explod]
type = Explod
triggerall = teamside = 1
triggerall = prevstateno = 3012
trigger1 = time = 0
space = space
pos =const240p(12),Screenheight-const240p(5)
scale = const720p(1), const720p(1)
anim = 3009
id = 3009
angle = -90
postype = left
bindtime = -1
ontop = 1
removetime = -2
ignorehitpause = 1
removeongethit = 0
ownpal = 1
pausemovetime = 9999999
supermovetime = 9999999
[State 0, Explod]
type = Explod
triggerall = teamside = 2
triggerall = prevstateno = 3012
trigger1 = time = 0
space = space
pos = -const240p(12),Screenheight-const240p(5)
scale = const720p(1), const720p(1)
anim = 3009
id = 3009
angle = 90
postype = right
bindtime = -1
ontop = 1
removetime = -2
ignorehitpause = 1
removeongethit = 0
ownpal = 1
pausemovetime = 9999999
supermovetime = 9999999

;---------------------------------------------------------------------------
;External
[Statedef 3014]
type    = A
movetype= I
physics = N
ctrl = 0
anim = 1
[State 0]
type = removeexplod
triggerall = 1
trigger1 = time = 0
trigger2 = root,var(12) != 0
trigger3 = root,var(9) != 0
id = 3003
[State 0]
type = bindtoroot
trigger1 = 1
pos = 0,-5
[State 0,P1 Main Gauge Filler]
type = Explod
triggerall = root,var(12) = 0
triggerall = root,var(9) = 0
triggerall = roundstate >= 2
triggerall = teamside = 1
triggerall = numexplod(3003) = 0
trigger1 = 1
space = space
anim = 3009+floor(root,fvar(35)/100)
facing = 1
id = 3003
pos =0,Screenheight-const720p(84)
scale = const720p(1.33), const720p(1.33)
postype = left
bindtime = -1
removetime = -1
ontop = 1
ignorehitpause = 0
removeongethit = 0
ownpal = 1
pausemovetime = 9999999
supermovetime = 9999999
[State 0,P2 Main Gauge Filler]
type = Explod
triggerall = root,var(12) = 0
triggerall = root,var(9) = 0
triggerall = roundstate >= 2
triggerall = teamside = 2
triggerall = numexplod(3003) = 0
trigger1 = 1
space = space
anim = 3009+floor(root,fvar(35)/100)
facing = -1
id = 3003
pos =0,Screenheight-const720p(84)
scale = const720p(1.33), const720p(1.33)
postype = right
bindtime = -1
removetime = -1
ontop = 1
ignorehitpause = 0
removeongethit = 0
ownpal = 1
pausemovetime = 9999999
supermovetime = 9999999
[State 0]
type = changestate
trigger1 = root,fvar(35) >= 600
value = 3015
[State 0]
type = changestate
trigger1 = root,fvar(35) < 500
value = 3013

[State 0, Explod]
type = Explod
triggerall = teamside = 1
triggerall = prevstateno = 3013
trigger1 = time = 0
space = space
pos =const240p(12),Screenheight-const240p(5)
scale = const720p(1), const720p(1)
anim = 3009
id = 3009
angle = -90
postype = left
bindtime = -1
ontop = 1
removetime = -2
ignorehitpause = 1
removeongethit = 0
ownpal = 1
pausemovetime = 9999999
supermovetime = 9999999
[State 0, Explod]
type = Explod
triggerall = teamside = 2
triggerall = prevstateno = 3013
trigger1 = time = 0
space = space
pos = -const240p(12),Screenheight-const240p(5)
scale = const720p(1), const720p(1)
anim = 3009
id = 3009
angle = 90
postype = right
bindtime = -1
ontop = 1
removetime = -2
ignorehitpause = 1
removeongethit = 0
ownpal = 1
pausemovetime = 9999999
supermovetime = 9999999

;---------------------------------------------------------------------------
;External
[Statedef 3015]
type    = A
movetype= I
physics = N
ctrl = 0
anim = 1
[State 0]
type = removeexplod
triggerall = 1
trigger1 = time = 0
trigger2 = root,var(12) != 0
trigger3 = root,var(9) != 0
id = 3003
[State 0]
type = bindtoroot
trigger1 = 1
pos = 0,-5
[State 0,P1 Main Gauge Filler]
type = Explod
triggerall = root,var(12) = 0
triggerall = root,var(9) = 0
triggerall = roundstate >= 2
triggerall = teamside = 1
triggerall = numexplod(3003) = 0
trigger1 = 1
space = space
anim = 3009+floor(root,fvar(35)/100)
facing = 1
id = 3003
pos =0,Screenheight-const720p(84)
scale = const720p(1.33), const720p(1.33)
postype = left
bindtime = -1
removetime = -1
ontop = 1
ignorehitpause = 0
removeongethit = 0
ownpal = 1
pausemovetime = 9999999
supermovetime = 9999999
[State 0,P2 Main Gauge Filler]
type = Explod
triggerall = root,var(12) = 0
triggerall = root,var(9) = 0
triggerall = roundstate >= 2
triggerall = teamside = 2
triggerall = numexplod(3003) = 0
trigger1 = 1
space = space
anim = 3009+floor(root,fvar(35)/100)
facing = -1
id = 3003
pos =0,Screenheight-const720p(84)
scale = const720p(1.33), const720p(1.33)
postype = right
bindtime = -1
removetime = -1
ontop = 1
ignorehitpause = 0
removeongethit = 0
ownpal = 1
pausemovetime = 9999999
supermovetime = 9999999
[State 0]
type = changestate
trigger1 = root,fvar(35) >= 700
value = 3016
[State 0]
type = changestate
trigger1 = root,fvar(35) < 600
value = 3014

[State 0, Explod]
type = Explod
triggerall = teamside = 1
triggerall = prevstateno = 3014
trigger1 = time = 0
space = space
pos =const240p(12),Screenheight-const240p(5)
scale = const720p(1), const720p(1)
anim = 3009
id = 3009
angle = -90
postype = left
bindtime = -1
ontop = 1
removetime = -2
ignorehitpause = 1
removeongethit = 0
ownpal = 1
pausemovetime = 9999999
supermovetime = 9999999
[State 0, Explod]
type = Explod
triggerall = teamside = 2
triggerall = prevstateno = 3014
trigger1 = time = 0
space = space
pos = -const240p(12),Screenheight-const240p(5)
scale = const720p(1), const720p(1)
anim = 3009
id = 3009
angle = 90
postype = right
bindtime = -1
ontop = 1
removetime = -2
ignorehitpause = 1
removeongethit = 0
ownpal = 1
pausemovetime = 9999999
supermovetime = 9999999

;---------------------------------------------------------------------------
;External
[Statedef 3016]
type    = A
movetype= I
physics = N
ctrl = 0
anim = 1
[State 0]
type = removeexplod
triggerall = 1
trigger1 = time = 0
trigger2 = root,var(12) != 0
trigger3 = root,var(9) != 0
id = 3003
[State 0]
type = bindtoroot
trigger1 = 1
pos = 0,-5
[State 0,P1 Main Gauge Filler]
type = Explod
triggerall = root,var(12) = 0
triggerall = root,var(9) = 0
triggerall = roundstate >= 2
triggerall = teamside = 1
triggerall = numexplod(3003) = 0
trigger1 = 1
space = space
anim = 3009+floor(root,fvar(35)/100)
facing = 1
id = 3003
pos =0,Screenheight-const720p(84)
scale = const720p(1.33), const720p(1.33)
postype = left
bindtime = -1
removetime = -1
ontop = 1
ignorehitpause = 0
removeongethit = 0
ownpal = 1
pausemovetime = 9999999
supermovetime = 9999999
[State 0,P2 Main Gauge Filler]
type = Explod
triggerall = root,var(12) = 0
triggerall = root,var(9) = 0
triggerall = roundstate >= 2
triggerall = teamside = 2
triggerall = numexplod(3003) = 0
trigger1 = 1
space = space
anim = 3009+floor(root,fvar(35)/100)
facing = -1
id = 3003
pos =0,Screenheight-const720p(84)
scale = const720p(1.33), const720p(1.33)
postype = right
bindtime = -1
removetime = -1
ontop = 1
ignorehitpause = 0
removeongethit = 0
ownpal = 1
pausemovetime = 9999999
supermovetime = 9999999
[State 0]
type = changestate
trigger1 = root,fvar(35) >= 800
value = 3017
[State 0]
type = changestate
trigger1 = root,fvar(35) < 700
value = 3015

[State 0, Explod]
type = Explod
triggerall = teamside = 1
triggerall = prevstateno = 3015
trigger1 = time = 0
space = space
pos =const240p(12),Screenheight-const240p(5)
scale = const720p(1), const720p(1)
anim = 3009
id = 3009
angle = -90
postype = left
bindtime = -1
ontop = 1
removetime = -2
ignorehitpause = 1
removeongethit = 0
ownpal = 1
pausemovetime = 9999999
supermovetime = 9999999
[State 0, Explod]
type = Explod
triggerall = teamside = 2
triggerall = prevstateno = 3015
trigger1 = time = 0
space = space
pos = -const240p(12),Screenheight-const240p(5)
scale = const720p(1), const720p(1)
anim = 3009
id = 3009
angle = 90
postype = right
bindtime = -1
ontop = 1
removetime = -2
ignorehitpause = 1
removeongethit = 0
ownpal = 1
pausemovetime = 9999999
supermovetime = 9999999

;---------------------------------------------------------------------------
;External
[Statedef 3017]
type    = A
movetype= I
physics = N
ctrl = 0
anim = 1
[State 0]
type = removeexplod
triggerall = 1
trigger1 = time = 0
trigger2 = root,var(12) != 0
trigger3 = root,var(9) != 0
id = 3003
[State 0]
type = bindtoroot
trigger1 = 1
pos = 0,-5
[State 0,P1 Main Gauge Filler]
type = Explod
triggerall = root,var(12) = 0
triggerall = root,var(9) = 0
triggerall = roundstate >= 2
triggerall = teamside = 1
triggerall = numexplod(3003) = 0
trigger1 = 1
space = space
anim = 3009+floor(root,fvar(35)/100)
facing = 1
id = 3003
pos =0,Screenheight-const720p(84)
scale = const720p(1.33), const720p(1.33)
postype = left
bindtime = -1
removetime = -1
ontop = 1
ignorehitpause = 0
removeongethit = 0
ownpal = 1
pausemovetime = 9999999
supermovetime = 9999999
[State 0,P2 Main Gauge Filler]
type = Explod
triggerall = root,var(12) = 0
triggerall = root,var(9) = 0
triggerall = roundstate >= 2
triggerall = teamside = 2
triggerall = numexplod(3003) = 0
trigger1 = 1
space = space
anim = 3009+floor(root,fvar(35)/100)
facing = -1
id = 3003
pos =0,Screenheight-const720p(84)
scale = const720p(1.33), const720p(1.33)
postype = right
bindtime = -1
removetime = -1
ontop = 1
ignorehitpause = 0
removeongethit = 0
ownpal = 1
pausemovetime = 9999999
supermovetime = 9999999
[State 0]
type = changestate
trigger1 = root,fvar(35) >= 900
value = 3018
[State 0]
type = changestate
trigger1 = root,fvar(35) < 800
value = 3016

[State 0, Explod]
type = Explod
triggerall = teamside = 1
triggerall = prevstateno = 3016
trigger1 = time = 0
space = space
pos =const240p(12),Screenheight-const240p(5)
scale = const720p(1), const720p(1)
anim = 3009
id = 3009
angle = -90
postype = left
bindtime = -1
ontop = 1
removetime = -2
ignorehitpause = 1
removeongethit = 0
ownpal = 1
pausemovetime = 9999999
supermovetime = 9999999
[State 0, Explod]
type = Explod
triggerall = teamside = 2
triggerall = prevstateno = 3016
trigger1 = time = 0
space = space
pos = -const240p(12),Screenheight-const240p(5)
scale = const720p(1), const720p(1)
anim = 3009
id = 3009
angle = 90
postype = right
bindtime = -1
ontop = 1
removetime = -2
ignorehitpause = 1
removeongethit = 0
ownpal = 1
pausemovetime = 9999999
supermovetime = 9999999

;---------------------------------------------------------------------------
;External
[Statedef 3018]
type    = A
movetype= I
physics = N
ctrl = 0
anim = 1
[State 0]
type = removeexplod
triggerall = 1
trigger1 = time = 0
trigger2 = root,var(12) != 0
trigger3 = root,var(9) != 0
id = 3003
[State 0]
type = bindtoroot
trigger1 = 1
pos = 0,-5
[State 0,P1 Main Gauge Filler]
type = Explod
triggerall = root,var(12) = 0
triggerall = root,var(9) = 0
triggerall = roundstate >= 2
triggerall = teamside = 1
triggerall = numexplod(3003) = 0
trigger1 = 1
space = space
anim = 3009+floor(root,fvar(35)/100)
facing = 1
id = 3003
pos =0,Screenheight-const720p(84)
scale = const720p(1.33), const720p(1.33)
postype = left
bindtime = -1
removetime = -1
ontop = 1
ignorehitpause = 0
removeongethit = 0
ownpal = 1
pausemovetime = 9999999
supermovetime = 9999999
[State 0,P2 Main Gauge Filler]
type = Explod
triggerall = root,var(12) = 0
triggerall = root,var(9) = 0
triggerall = roundstate >= 2
triggerall = teamside = 2
triggerall = numexplod(3003) = 0
trigger1 = 1
space = space
anim = 3009+floor(root,fvar(35)/100)
facing = -1
id = 3003
pos =0,Screenheight-const720p(84)
scale = const720p(1.33), const720p(1.33)
postype = right
bindtime = -1
removetime = -1
ontop = 1
ignorehitpause = 0
removeongethit = 0
pausemovetime = 9999999
supermovetime = 9999999
[State 0]
type = changestate
trigger1 = root,fvar(35) >= 1000
value = 3019
[State 0]
type = changestate
trigger1 = root,fvar(35) < 900
value = 3017

[State 0, Explod]
type = Explod
triggerall = teamside = 1
triggerall = prevstateno = 3017
trigger1 = time = 0
space = space
pos =const240p(12),Screenheight-const240p(5)
scale = const720p(1), const720p(1)
anim = 3009
id = 3009
angle = -90
postype = left
bindtime = -1
ontop = 1
removetime = -2
ignorehitpause = 1
removeongethit = 0
ownpal = 1
pausemovetime = 9999999
supermovetime = 9999999
[State 0, Explod]
type = Explod
triggerall = teamside = 2
triggerall = prevstateno = 3017
trigger1 = time = 0
space = space
pos = -const240p(12),Screenheight-const240p(5)
scale = const720p(1), const720p(1)
anim = 3009
id = 3009
angle = 90
postype = right
bindtime = -1
ontop = 1
removetime = -2
ignorehitpause = 1
removeongethit = 0
ownpal = 1
pausemovetime = 9999999
supermovetime = 9999999

;---------------------------------------------------------------------------
;External
[Statedef 3019]
type    = A
movetype= I
physics = N
ctrl = 0
anim = 1
[State 0]
type = removeexplod
triggerall = 1
trigger1 = time = 0
trigger2 = root,var(12) != 0
trigger3 = root,var(9) != 0
id = 3003
[State 0]
type = bindtoroot
trigger1 = 1
pos = 0,-5
[State 0,P1 Main Gauge Filler]
type = Explod
triggerall = root,var(12) = 0
triggerall = root,var(9) = 0
triggerall = roundstate >= 2
triggerall = teamside = 1
triggerall = numexplod(3003) = 0
trigger1 = 1
space = space
anim = 3019
facing = 1
id = 3003
pos =0,Screenheight-const720p(84)
scale = const720p(1.33), const720p(1.33)
postype = left
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
ignorehitpause = 0
removeongethit = 0
ownpal = 1
pausemovetime = 9999999
supermovetime = 9999999
[State 0,P2 Main Gauge Filler]
type = Explod
triggerall = root,var(12) = 0
triggerall = root,var(9) = 0
triggerall = roundstate >= 2
triggerall = teamside = 2
triggerall = numexplod(3003) = 0
trigger1 = 1
space = space
anim = 3019
facing = -1
id = 3003
pos =0,Screenheight-const720p(84)
scale = const720p(1.33), const720p(1.33)
postype = right
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
ignorehitpause = 0
removeongethit = 0
pausemovetime = 9999999
supermovetime = 9999999
[State 0]
type = changestate
trigger1 = root,fvar(35) < 1000
value = 3018

[State 0, Explod]
type = Explod
triggerall = teamside = 1
triggerall = prevstateno = 3018
trigger1 = time = 0
space = space
pos =const240p(12),Screenheight-const240p(5)
scale = const720p(1), const720p(1)
anim = 3009
id = 3009
angle = -90
postype = left
bindtime = -1
ontop = 1
removetime = -2
ignorehitpause = 1
removeongethit = 0
ownpal = 1
pausemovetime = 9999999
supermovetime = 9999999
[State 0, Explod]
type = Explod
triggerall = teamside = 2
triggerall = prevstateno = 3018
trigger1 = time = 0
space = space
pos = -const240p(12),Screenheight-const240p(5)
scale = const720p(1), const720p(1)
anim = 3009
id = 3009
angle = 90
postype = right
bindtime = -1
ontop = 1
removetime = -2
ignorehitpause = 1
removeongethit = 0
ownpal = 1
pausemovetime = 9999999
supermovetime = 9999999

;---------------------------------------------------------------------------
;External
[Statedef 6001]
type    = A
movetype= I
physics = N
ctrl = 0
anim = 1

[State 0]
type = bindtoroot
trigger1 = 1
pos = 0, -15

[State 0]
type = null
trigger1 = root,stateno != 400
trigger1 = var(1) := 0

[State 0]
type = varadd
trigger1 = root,stateno = 400 && root,prevstateno = 400
trigger1 = root,time = 1
var(1) = 1

[State 0]
type = null
triggerall = root,stateno = 52
trigger1 = root,prevstateno = 600
trigger1 = var(2) := 3
trigger2 = root,prevstateno = 610 || root,prevstateno = 820
trigger2 = var(2) := 6
trigger3 = root,prevstateno = 620
trigger3 = var(2) := 12
trigger4 = root,prevstateno = [50,51]
trigger4 = var(2) := 2
;trigger5 = (root,prevstateno = [1400,1409]) || (root,prevstateno = [1110,1112]) || (root,prevstateno = [1200,1229])
;trigger5 = var(2) := 6

[State 0]
type = varset
trigger1 = root,stateno = [60,61]
var(3) = 1

[State 0]
type = null
trigger1 = (root,stateno = [0,51]) || (root,stateno = [200,819]) || (root,stateno = [850,1099]) || (root,stateno = [1200,2999])
trigger1 = var(3) := 0
trigger2 = root,movetype = H
trigger2 = var(3) := 0

[State 0]
type = varset
trigger1 = root,fvar(0) < 270 && root,var(19) = 0
var(4) = 0
pausemovetime = 9999999
supermovetime = 9999999
[State 0]
type = varadd
trigger1 = root,fvar(0) >= 270 && root,var(19) = 0
var(4) = 1
pausemovetime = 9999999
supermovetime = 9999999

[State 0]
type = playsnd
trigger1 = var(4) = 1 && root,var(19) = 0
value = 1,3
abspan = 0
pausemovetime = 9999999
supermovetime = 9999999
[State 0, Explod]
type = Explod
triggerall = teamside = 1
trigger1 = var(4) = 1 && root,var(19) = 0
space = space
pos =const240p(13),Screenheight-const240p(10)
scale = const720p(1.5), const720p(1.5)
anim = 3040
id = 3040
angle = random
postype = left
bindtime = -1
ontop = 1
removetime = -2
ignorehitpause = 1
removeongethit = 1
ownpal = 1
pausemovetime = 9999999
supermovetime = 9999999
[State 0, Explod]
type = Explod
triggerall = teamside = 2 
trigger1 = var(4) = 1 && root,var(19) = 0
space = space
pos = -const240p(13),Screenheight-const240p(10)
scale = const720p(1.5), const720p(1.5)
anim = 3040
id = 3040
angle = random
postype = right
bindtime = -1
ontop = 1
removetime = -2
ignorehitpause = 1
removeongethit = 1
ownpal = 1
pausemovetime = 9999999
supermovetime = 9999999

;-----------
;FADE OUT SUPER BG

[State 0]
type = Explod
triggerall = numhelper(8000) != 0
triggerall = numexplod(8071) = 0
trigger1=root,movetype = H
trigger2=root,anim = 1600 && root,animelem = 68
trigger3 = numhelper(1711) != 0
trigger4 = root,stateno = 1704
space = space
anim = 8071
id = 8071
pos = screenwidth/2,const720p(1100)
scale = const720p(60),const720p(60)
bindtime = -1
postype = left
removetime = -2
sprpriority = -10
ignorehitpause = 1
removeongethit = 0
ownpal = 1
pausemovetime = 9999999
supermovetime = 9999999

[State 0]
type = varadd
trigger1 = numexplod(8071) != 0
var(50) = 1
[State 0]
type = varset
trigger1 = numexplod(8071) = 0
var(50) = 0

;-------

[State 0, Kuuga Dash Cancel Limit]
type = null
trigger1 = root,stateno = 100 && (root,prevstateno = [1000,1002])
trigger1 = var(5) := 1
trigger2 = enemynear,movetype != H
trigger2 = var(5) := 0

[State 0, Lose Count]
type = parentvaradd
triggerall = root,time = 1
trigger1 = lose
var(57) = 1
persistent = 0

[State 0, KO Voice]
type = playsnd
trigger1 = root,alive = 0
;trigger1= root,time = 1
value = ifelse(root,var(57)=0,111,112),ifelse(root,var(57)=0,random%4,random%1)
persistent = 0
pausemovetime = 9999999
supermovetime = 9999999

[State 0, Did you double jump]
type = null
trigger1 = root,stateno = 45 && root,animelem = 1
trigger1 = var(6) := 1
trigger2 = root,statetype != A && var(6) != 0
trigger2 = var(6) := 0

;REPEAT PRORATION
;==================66C==================
[State 0]
type = varset
triggerall = enemynear,gethitvar(hitshaketime) = 13
trigger1 = root,numtarget(860)
trigger2 = root,prevstateno = 860
var(10) = 1
[State 0]
type = varset
triggerall = var(10) = 1
triggerall = root,animelem = 1
trigger1 = root,stateno = 860
var(11) = 1
;resets
[State 0]
type = varset
trigger1 = root,var(17) = 0 && root,stateno != 860
var(10) = 0
[State 0]
type = varset
trigger1 = root,var(17) = 0 && root,stateno != 860
var(11) = 0
[State 0]; Repeat Proration set
type = parentvarset
triggerall = var(10) = 1 && var(11) = 1
trigger1 = root,stateno = 860 && root,animelemtime(1) = 0
fvar(14) = ifelse(fvar(14)=1,0.3,0.3*root,fvar(14))

;==================SOUSHITSU NO CONFUSION A FOLLOW UP==================
[State 0]
type = varset
triggerall = enemynear,gethitvar(hitshaketime) = 13
trigger1 = root,numtarget(1320)
trigger2 = root,prevstateno = 1320
var(12) = 1
[State 0]
type = varset
triggerall = var(12) = 1
triggerall = root,animelem = 1
trigger1 = root,stateno = 1320
var(13) = 1
;resets
[State 0]
type = varset
trigger1 = root,var(17) = 0 && root,stateno != 1320
var(12) = 0
[State 0]
type = varset
trigger1 = root,var(17) = 0 && root,stateno != 1320
var(13) = 0
[State 0]; Repeat Proration set
type = parentvarset
triggerall = var(12) = 1 && var(13) = 1
trigger1 = root,stateno = 1320 && root,animelemtime(1) = 0
fvar(14) = ifelse(fvar(14)=1,0.5,0.5*root,fvar(14))

;==================SOUSHITSU NO CONFUSION B FOLLOW UP==================
[State 0]
type = varset
triggerall = enemynear,gethitvar(hitshaketime) = 13
trigger1 = root,numtarget(1321)
trigger2 = root,prevstateno = 1321
var(14) = 1
[State 0]
type = varset
triggerall = var(14) = 1
triggerall = root,animelem = 1
trigger1 = root,stateno = 1321
var(15) = 1
;resets
[State 0]
type = varset
trigger1 = root,var(17) = 0 && root,stateno != 1321
var(14) = 0
[State 0]
type = varset
trigger1 = root,var(17) = 0 && root,stateno != 1321
var(15) = 0
[State 0]; Repeat Proration set
type = parentvarset
triggerall = var(14) = 1 && var(15) = 1
trigger1 = root,stateno = 1321 && root,animelemtime(1) = 0
fvar(14) = ifelse(fvar(14)=1,0.5,0.5*root,fvar(14))

;==================SOUSHITSU NO CONFUSION C FOLLOW UP==================
[State 0]
type = varset
triggerall = enemynear,gethitvar(hitshaketime) = 13
trigger1 = root,numtarget(1322)
trigger2 = root,prevstateno = 1322
var(16) = 1
[State 0]
type = varset
triggerall = var(16) = 1
triggerall = root,animelem = 1
trigger1 = root,stateno = 1322
var(17) = 1
;resets
[State 0]
type = varset
trigger1 = root,var(17) = 0 && root,stateno != 1322
var(16) = 0
[State 0]
type = varset
trigger1 = root,var(17) = 0 && root,stateno != 1322
var(17) = 0
[State 0]; Repeat Proration set
type = parentvarset
triggerall = var(16) = 1 && var(17) = 1
trigger1 = root,stateno = 1322 && root,animelemtime(1) = 0
fvar(14) = ifelse(fvar(14)=1,0.2,0.2*root,fvar(14))



;==============
;GAUGE OFFLINE CHARGE


[State 0]
type = null
triggerall = root,var(12) = 0
trigger1 = fvar(0) := 0
trigger2 = fvar(1) := 0
trigger3 = var(30) := 0
trigger4 = var(31) := 0
pausemovetime = 9999999
supermovetime = 9999999

[State 0]
type =null
;trigger1 = root,var(12) <= 898 && root,var(12) > 0
trigger1 = root,var(12) <= 1798 && root,var(12) > 0
trigger1 = fvar(0) := 1
trigger2 = root,var(12) = 0
trigger2 = fvar(0) := 0
trigger3 = root,var(12) = 0
trigger3 = fvar(1) := 0
pausemovetime = 9999999
supermovetime = 9999999

[State 0]
type = varadd
trigger1 = fvar(0) = 1
fvar(1) = 0.058;0.115
pausemovetime = 9999999
supermovetime = 9999999
[State 0]
type = varset
trigger1 = fvar(1) > 1
fvar(1) = 1
pausemovetime = 9999999
supermovetime = 9999999

[State 0]
type = varadd
trigger1 = fvar(1) = 1
var(30) = 1
pausemovetime = 9999999
supermovetime = 9999999
[State 0]
type = varset
trigger1 = fvar(1) = 1
fvar(1) = 0
pausemovetime = 9999999
supermovetime = 9999999

[State 0]
type = varadd
trigger1 = fvar(0) = 1
var(31) = 1
pausemovetime = 9999999
supermovetime = 9999999

[State 0]
type = removeexplod
trigger1 = root,var(19) = 1
id = 3081

[State -2] ;Ones
type=explod
triggerall = fvar(0) = 1
triggerall = root,var(19) = 0
triggerall = teamside = 1
trigger1=1
space = space
anim=3080+(var(30)%10)
id = 3081
bindtime=-1
removetime=1
facing=1
ontop=1
ownpal=1
pos = const720p(210),Screenheight-const720p(17)
scale = const720p(1),const720p(1)
postype=left
ontop = 1
ignorehitpause=1
pausemovetime = 9999999
supermovetime = 9999999
[State -2] ;Tens
type=explod
triggerall = fvar(0) = 1
triggerall = root,var(19) = 0
triggerall = teamside = 1
trigger1=var(30)>=0  ;;  replace with ""1"" if you want them to appear even when their value is 0
space = space
anim=3080+((var(30)/10)%10)
id = 3081
bindtime=-1
removetime=1
facing=1
ontop=1
ownpal=1
pos =const720p(195),Screenheight-const720p(17)
scale = const720p(1),const720p(1)
postype=left
ontop = 1
ignorehitpause=1
pausemovetime = 9999999
supermovetime = 9999999
[State -2] ;period
type=explod
triggerall = fvar(0) = 1
triggerall = root,var(19) = 0
triggerall = teamside = 1
trigger1=1
space = space
anim=3100
id = 3081
bindtime=-1
removetime=1
facing=1
ontop=1
ownpal=1
pos = const720p(220),Screenheight-const720p(12)
scale = const720p(1),const720p(1)
postype=left
ontop = 1
ignorehitpause=1
pausemovetime = 9999999
supermovetime = 9999999
[State -2] ;0.xx
type=explod
triggerall = fvar(0) = 1
triggerall = root,var(19) = 0
triggerall = teamside = 1
trigger1=1
space = space
anim=3090+((var(31))%10)
id = 3081
bindtime=-1
removetime=1
facing=1
ontop=1
ownpal=1
pos = const720p(230),Screenheight-const720p(15)
scale = const720p(1),const720p(1)
postype=left
ontop = 1
ignorehitpause=1
pausemovetime = 9999999
supermovetime = 9999999
[State -2] ;0.x
type=explod
triggerall = fvar(0) = 1
triggerall = root,var(19) = 0
triggerall = teamside = 1
trigger1=1
space = space
anim=3090+((var(31)*2)%10)
id = 3081
bindtime=-1
removetime=1
facing=1
ontop=1
ownpal=1
pos = const720p(243),Screenheight-const720p(15)
scale = const720p(1),const720p(1)
postype=left
ontop = 1
ignorehitpause=1
pausemovetime = 9999999
supermovetime = 9999999
[State -2] ; %
type=explod
triggerall = fvar(0) = 1
triggerall = root,var(19) = 0
triggerall = teamside = 1
trigger1=1
space = space
anim=3101
id = 3081
bindtime=-1
removetime=1
facing=1
ontop=1
ownpal=1
pos = const720p(260),Screenheight-const720p(17)
scale = const720p(1),const720p(1)
postype=left
ontop = 1
ignorehitpause=1
pausemovetime = 9999999
supermovetime = 9999999

[State -2] ;Ones
type=explod
triggerall = teamside = 2
triggerall = root,var(19) = 0
triggerall = fvar(0) = 1
trigger1=1
space = space
anim=3080+(var(30)%10)
id = 3081
bindtime=-1
removetime=1
facing=1
ontop=1
ownpal=1
pos = const720p(-115),Screenheight-const720p(17)
scale = const720p(1),const720p(1)
postype=right
ontop = 1
ignorehitpause=1
pausemovetime = 9999999
supermovetime = 9999999
[State -2] ;Tens
type=explod
triggerall = teamside = 2
triggerall = root,var(19) = 0
triggerall = fvar(0) = 1
trigger1=var(30)>=0  ;;  replace with ""1"" if you want them to appear even when their value is 0
space = space
anim=3080+((var(30)/10)%10)
id = 3081
bindtime=-1
removetime=1
facing=1
ontop=1
ownpal=1
pos =const720p(-130),Screenheight-const720p(17)
scale = const720p(1),const720p(1)
postype=right
ontop = 1
ignorehitpause=1
pausemovetime = 9999999
supermovetime = 9999999
[State -2] ;period
type=explod
triggerall = teamside = 2
triggerall = root,var(19) = 0
triggerall = fvar(0) = 1
trigger1=1
space = space
anim=3100
id = 3081
bindtime=-1
removetime=1
facing=1
ontop=1
ownpal=1
pos = const720p(-105),Screenheight-const720p(12)
scale = const720p(1),const720p(1)
postype=right
ontop = 1
ignorehitpause=1
pausemovetime = 9999999
supermovetime = 9999999
[State -2] ;0.xx
type=explod
triggerall = teamside = 2
triggerall = root,var(19) = 0
triggerall = fvar(0) = 1
trigger1=1
space = space
anim=3090+((var(31))%10)
id = 3081
bindtime=-1
removetime=1
facing=1
ontop=1
ownpal=1
pos = const720p(-95),Screenheight-const720p(15)
scale = const720p(1),const720p(1)
postype=right
ontop = 1
ignorehitpause=1
pausemovetime = 9999999
supermovetime = 9999999
[State -2] ;0.x
type=explod
triggerall = teamside = 2
triggerall = root,var(19) = 0
triggerall = fvar(0) = 1
trigger1=1
space = space
anim=3090+((var(31)*2)%10)
id = 3081
bindtime=-1
removetime=1
facing=1
ontop=1
ownpal=1
pos = const720p(-82),Screenheight-const720p(15)
scale = const720p(1),const720p(1)
postype=right
ontop = 1
ignorehitpause=1
pausemovetime = 9999999
supermovetime = 9999999
[State -2] ; %
type=explod
triggerall = fvar(0) = 1
triggerall = root,var(19) = 0
triggerall = teamside = 2
trigger1=1
space = space
anim=3101
id = 3081
bindtime=-1
removetime=1
facing=1
ontop=1
ownpal=1
pos = const720p(-65),Screenheight-const720p(17)
scale = const720p(1),const720p(1)
postype=right
ontop = 1
ignorehitpause=1
pausemovetime = 9999999
supermovetime = 9999999


;---------------------------------------------------------------------------
;GUARD!!!!
[Statedef 6002]
type=A
movetype=I
physics=N
velset = 0,0
anim = 1
ctrl=0
sprpriority=7

[State 0]
type = bindtoroot
trigger1 = 1
pos = 0,0

[State 0];LIGHT
type = varset
triggerall = root,var(6) = 0
triggerall = time = 0
triggerall = root,gethitvar(hittime) = [0,9]
trigger1 = root,stateno = 150
trigger2 = root,stateno = 152
trigger3 = root,stateno = 154
var(1) = 1
persistent = 0
[State 0];MEDIUM
type = varset
triggerall = root,var(6) = 0
triggerall = time = 0
triggerall = root,gethitvar(hittime) = [10,12]
trigger1 = root,stateno = 150
trigger2 = root,stateno = 152
trigger3 = root,stateno = 154
var(1) = 2
persistent = 0
[State 0];HARD
type = varset
triggerall = root,var(6) = 0
triggerall = time = 0
triggerall = root,gethitvar(hittime) >= 13
trigger1 = root,stateno = 150
trigger2 = root,stateno = 152
trigger3 = root,stateno = 154
var(1) = 3
persistent = 0
[State 0];GIRIGIRI GAADOU
type = varset
triggerall = root,var(6) != 0
triggerall = root,var(5) < 9
triggerall = time = 0
trigger1 = root,stateno = 150
trigger2 = root,stateno = 152
trigger3 = root,stateno = 154
var(1) = 4
persistent = 0
[State 0]
type = parentvaradd
triggerall = root,var(12) = 0
trigger1 = (root,stateno = 150 || root,stateno = 152 || root,stateno = 154) && root,var(6) = 1 && root,time = 1 && root,var(5) < 9
fvar(0) = 15

[State 0]
type = playsnd
trigger1 = var(1) = 1
value = 20,random%2
channel = 0
persistent = 0
[State 0]
type = playsnd
trigger1 = var(1) = 2
value = 21,random%2
channel = 0
persistent = 0
[State 0]
type = playsnd
trigger1 = var(1) = 3
value = 22,random%3
channel = 0
persistent = 0
[State 0]
type = playsnd
trigger1 = var(1) = 4
value = 23,random%2
channel = 0
persistent = 0

[State 0]
type = stopsnd
trigger1 = numhelper(6003) != 0
channel = 0
pausemovetime = 999999
supermovetime = 999999

[State 0]
type = destroyself
trigger1 = time = 35


;---------------------------------------------------------------------------
;PAIN!!!!
[Statedef 6003]
type=A
movetype=I
physics=N
velset = 0,0
anim = 1
ctrl=0
sprpriority=7

[State 0]
type = bindtoroot
trigger1 = 1
pos = 0,0

[State 0]
type = null;destroyself
triggerall=time = 0
triggerall = roundstate >= 2
trigger1=root,stateno = 5070
trigger1= (root,anim = 5070)
trigger2=root,stateno = 5040
trigger2= (root,anim = 5040)
trigger3=root,stateno = 5000
trigger3= (root,anim = 5052)
trigger4=root,stateno = 5020
trigger4= (root,anim = 5052)

[State 0]
type = varset
trigger1 = time = 0 
var(2) = 1

[State 0, Light]
type = varset
triggerall = root,alive=1
triggerall = time = 0
triggerall = root,gethitvar(hittime) = [0,9]
trigger1 = root,stateno = 5000
trigger2 = root,stateno = 5010
trigger3 = root,stateno = 5020
trigger4 = root,stateno = 5040
trigger5 = root,stateno = 5070
var(1) = 1
[State 0, Medium]
type = varset
triggerall = root,alive=1
triggerall = time = 0
triggerall = root,gethitvar(hittime) = [10,12]
trigger1 = root,stateno = 5000
trigger2 = root,stateno = 5010
trigger3 = root,stateno = 5020
trigger4 = root,stateno = 5040
trigger5 = root,stateno = 5070
var(1) = 2
[State 0, Hard]
type = varset
triggerall = root,alive=1
triggerall = time = 0
triggerall = root,gethitvar(hittime) >= 13
trigger1 = root,stateno = 5000
trigger2 = root,stateno = 5010
trigger3 = root,stateno = 5020
trigger4 = root,stateno = 5040
trigger5 = root,stateno = 5070
var(1) = 3

[State 0]
type = stopsnd
trigger1 = root,life < 0
channel = 10

[State 0]
type = playsnd
triggerall = root,alive=1
trigger1 = var(1) = 1
value = 30,random%2
channel = 10
persistent = 0
[State 0]
type = playsnd
triggerall = root,alive=1
trigger1 = var(1) = 2
value = 31,random%2
channel = 10
persistent = 0
[State 0]
type = playsnd
triggerall = root,alive=1
trigger1 = var(1) = 3
value = 32,random%4
channel = 10
persistent = 0

[State 0, Exclamation Pain]; EXCLAMATION PAIN STAND
type = playsnd
triggerall = root,alive=1
triggerall = roundstate >= 2
triggerall=time = 0
triggerall = (root,command = "holdback" || root,command = "holdupback" || root,command = "holddownback") && root,prevstateno != [5000,5999]
trigger1 = root,stateno = 5000
trigger2 = root,stateno = 5010
trigger3 = root,stateno = 5020
trigger4 = root,stateno = 5040
trigger5 = root,stateno = 5070
value = 26,random%2
channel = 10
persistent = 0

[State 0]
type = destroyself
trigger1 = time = 60

;---------------------------------------------------------------------------
;NOTIFICATIONS
[Statedef 6004]
type=A
movetype=I
physics=N
velset = 0,0
anim = 1
ctrl=0
sprpriority=99

[State 0]
type = bindtoroot
trigger1 = 1
pos = 0, -20

[State 0, DANGER]
type = varadd
trigger1 = root,life <= (root,lifemax*0.35)
var(1) = 1
[State 0]
type = null
trigger1 = var(1) = 10
trigger1 = var(1) := 10
trigger2 = root,life > (root,lifemax*0.35)
trigger2 = var(1) := 0


[State 0, FIRST ATTACK]
type = null
triggerall = var(2) = 0
trigger1 = enemynear,movetype = H
trigger1 = var(2) := 1
trigger2 = root,movetype=  H
trigger2 = var(2) := 10

[State 0]
type = varadd
trigger1 = root,var(18) = 1
trigger2 = root,stateno = 3000 && root,time = 1
trigger3 = root,stateno = 3002 && root,time = 1
trigger4 = root,stateno = 200 && root,prevstateno = 210 && root,time = 1
trigger5 = root,stateno = 200 && root,prevstateno = 220 && root,time = 1
trigger6 = root,stateno = 210 && root,prevstateno = 220 && root,time = 1
trigger7 = root,stateno = 400 && root,prevstateno = 410 && root,time = 1
trigger8 = root,stateno = 400 && root,prevstateno = 420 && root,time = 1
trigger9 = root,stateno = 410 && root,prevstateno = 420 && root,time = 1
trigger10 = root,stateno = 200 && root,prevstateno = 410 && root,time = 1
trigger11 = root,stateno = 200 && root,prevstateno = 420 && root,time = 1
trigger12 = root,stateno = 210 && root,prevstateno = 420 && root,time = 1
trigger13 = root,stateno = 400 && root,prevstateno = 210 && root,time = 1
trigger14 = root,stateno = 400 && root,prevstateno = 220 && root,time = 1
trigger15 = root,stateno = 410 && root,prevstateno = 220 && root,time = 1
trigger16 = root,stateno = 600 && root,prevstateno = 610 && root,time = 1
trigger17 = root,stateno = 600 && root,prevstateno = 620 && root,time = 1
trigger18 = root,stateno = 610 && root,prevstateno = 620 && root,time = 1
trigger19 = root,stateno = 5201 && root,animelemtime(1) = 0
trigger20 = root,stateno = 5210 && root,animelemtime(1) = 0
trigger21 = root,stateno = 1227 && root,time = 1 && root,movetype = I
trigger22 = (root,stateno = 755 || root,stateno = 955 || root,stateno = 957) && root,time = 1
trigger23 = (root,stateno = 150 || root,stateno = 152 || root,stateno = 154) && root,var(6) = 1 && root,time = 1 && root,var(5) < 9
trigger24 = var(1) = 1
trigger25 = var(2) != 0 && var(2) != 10
var(0) = 1
[State 0]
type =null
trigger1 = numexplod(3070) = 0
trigger1 = var(0) := 0
trigger2 = var(0) = 8
trigger2 = var(0) := 0

[State 0,Hud]
type = Explod
triggerall = teamside = 1
trigger1 = root,var(18) = 1
trigger2 = root,stateno = 3000 && root,time = 1
trigger3 = root,stateno = 3002 && root,time = 1
trigger4 = root,stateno = 200 && root,prevstateno = 210 && root,time = 1
trigger5 = root,stateno = 200 && root,prevstateno = 220 && root,time = 1
trigger6 = root,stateno = 210 && root,prevstateno = 220 && root,time = 1
trigger7 = root,stateno = 400 && root,prevstateno = 410 && root,time = 1
trigger8 = root,stateno = 400 && root,prevstateno = 420 && root,time = 1
trigger9 = root,stateno = 410 && root,prevstateno = 420 && root,time = 1
trigger10 = root,stateno = 200 && root,prevstateno = 410 && root,time = 1
trigger11 = root,stateno = 200 && root,prevstateno = 420 && root,time = 1
trigger12 = root,stateno = 210 && root,prevstateno = 420 && root,time = 1
trigger13 = root,stateno = 400 && root,prevstateno = 210 && root,time = 1
trigger14 = root,stateno = 400 && root,prevstateno = 220 && root,time = 1
trigger15 = root,stateno = 410 && root,prevstateno = 220 && root,time = 1
trigger16 = root,stateno = 600 && root,prevstateno = 610 && root,time = 1
trigger17 = root,stateno = 600 && root,prevstateno = 620 && root,time = 1
trigger18 = root,stateno = 610 && root,prevstateno = 620 && root,time = 1
trigger19 = root,stateno = 5201 && root,time = 1
trigger20 = root,stateno = 5210 && root,time = 1
trigger21 = root,stateno = 1227 && root,time = 1 && root,movetype = I
trigger22 = (root,stateno = 755 || root,stateno = 955 || root,stateno = 957) && root,time = 1
trigger23 = (root,stateno = 150 || root,stateno = 152 || root,stateno = 154) && root,var(6) = 1 && root,time = 1 && root,var(5) < 9
trigger24 = var(1) = 1
trigger25 = var(2) != 0 && var(2) != 10
space = space
anim = 3070
facing=1
id = 3070
pos =0,(screenheight/2)+(var(0)*11)
scale = const720p(1),const720p(1)
postype = left
bindtime = -1
removetime = -2
ontop = 1
ignorehitpause = 1
removeongethit = 0
ownpal = 1
pausemovetime = 9999999
supermovetime = 9999999
[State 0,Hud]
type = Explod
triggerall = teamside = 2
trigger1 = root,var(18) = 1
trigger2 = root,stateno = 3000 && root,time = 1
trigger3 = root,stateno = 3002 && root,time = 1
trigger4 = root,stateno = 200 && root,prevstateno = 210 && root,time = 1
trigger5 = root,stateno = 200 && root,prevstateno = 220 && root,time = 1
trigger6 = root,stateno = 210 && root,prevstateno = 220 && root,time = 1
trigger7 = root,stateno = 400 && root,prevstateno = 410 && root,time = 1
trigger8 = root,stateno = 400 && root,prevstateno = 420 && root,time = 1
trigger9 = root,stateno = 410 && root,prevstateno = 420 && root,time = 1
trigger10 = root,stateno = 200 && root,prevstateno = 410 && root,time = 1
trigger11 = root,stateno = 200 && root,prevstateno = 420 && root,time = 1
trigger12 = root,stateno = 210 && root,prevstateno = 420 && root,time = 1
trigger13 = root,stateno = 400 && root,prevstateno = 210 && root,time = 1
trigger14 = root,stateno = 400 && root,prevstateno = 220 && root,time = 1
trigger15 = root,stateno = 410 && root,prevstateno = 220 && root,time = 1
trigger16 = root,stateno = 600 && root,prevstateno = 610 && root,time = 1
trigger17 = root,stateno = 600 && root,prevstateno = 620 && root,time = 1
trigger18 = root,stateno = 610 && root,prevstateno = 620 && root,time = 1
trigger19 = root,stateno = 5201 && root,time = 1
trigger20 = root,stateno = 5210 && root,time = 1
trigger21 = root,stateno = 1227 && root,time = 1 && root,movetype = I
trigger22 = (root,stateno = 755 || root,stateno = 955 || root,stateno = 957) && root,time = 1
trigger23 = (root,stateno = 150 || root,stateno = 152 || root,stateno = 154) && root,var(6) = 1 && root,time = 1 && root,var(5) < 9
trigger24 = var(1) = 1
trigger25 = var(2) != 0 && var(2) != 10
space = space
anim = 3070
facing=-1
id = 3070
pos =0,(screenheight/2)+(var(0)*11)
scale = const720p(1),const720p(1)
postype = right
bindtime = -1
removetime = -2
ontop = 1
ignorehitpause = 1
removeongethit = 0
ownpal = 1
pausemovetime = 9999999
supermovetime = 9999999

;=================

[State 0,Hud]
type = Explod
triggerall = teamside = 1
triggerall = root,var(18) = 1
trigger1 = var(2) = 1
space = space
anim = 3070
facing=1
id = 3070
pos =0,(screenheight/2)-11
scale = const720p(1),const720p(1)
postype = left
bindtime = -1
removetime = -2
ontop = 1
ignorehitpause = 1
removeongethit = 0
ownpal = 1
pausemovetime = 9999999
supermovetime = 9999999
[State 0,Hud]
type = Explod
triggerall = teamside = 2
triggerall = root,var(18) = 1
trigger1 = var(2) = 1
space = space
anim = 3070
facing=-1
id = 3070
pos =0,(screenheight/2)-11
scale = const720p(1),const720p(1)
postype = right
bindtime = -1
removetime = -2
ontop = 1
ignorehitpause = 1
removeongethit = 0
ownpal = 1
pausemovetime = 9999999
supermovetime = 9999999

;=================
;COUNTER HIT
[State 0,Hud]
type = Explod
triggerall = teamside = 1
trigger1 = root,var(18) = 1
space = space
anim = 3071
facing=1
id = 3071
pos =const720p(135),(screenheight/2)+(var(0)*11)
scale = const720p(1),const720p(1)
postype = left
bindtime = -1
removetime = -2
ontop = 1
ignorehitpause = 1
removeongethit = 0
ownpal = 1
pausemovetime = 9999999
supermovetime = 9999999
[State 0,Hud]
type = Explod
triggerall = teamside = 2
trigger1 = root,var(18) = 1
space = space
anim = 3071
facing=1
id = 3071
pos =const720p(-135),(screenheight/2)+(var(0)*11)
scale = const720p(1),const720p(1)
postype = right
bindtime = -1
removetime = -2
ontop = 1
ignorehitpause = 1
removeongethit = 0
ownpal = 1
pausemovetime = 9999999
supermovetime = 9999999

;BURST
[State 0,Hud]
type = Explod
triggerall = teamside = 1
trigger1 = root,stateno = 3000 && root,time = 1
space = space
anim = 3072
facing=1
id = 3072
pos =const720p(130),(screenheight/2)+(var(0)*11)
scale = const720p(1),const720p(1)
postype = left
bindtime = -1
removetime = -2
ontop = 1
ignorehitpause = 1
removeongethit = 0
ownpal = 1
pausemovetime = 9999999
supermovetime = 9999999
[State 0,Hud]
type = Explod
triggerall = teamside = 2
trigger1 = root,stateno = 3000 && root,time = 1
space = space
anim = 3072
facing=1
id = 3072
pos =const720p(-130),(screenheight/2)+(var(0)*11)
scale = const720p(1),const720p(1)
postype = right
bindtime = -1
removetime = -2
ontop = 1
ignorehitpause = 1
removeongethit = 0
ownpal = 1
pausemovetime = 9999999
supermovetime = 9999999

;E BURST
[State 0,Hud]
type = Explod
triggerall = teamside = 1
trigger1 = root,stateno = 3002 && root,time = 1
space = space
anim = 3073
facing=1
id = 3073
pos =const720p(127),(screenheight/2)+(var(0)*11)
scale = const720p(1),const720p(1)
postype = left
bindtime = -1
removetime = -2
ontop = 1
ignorehitpause = 1
removeongethit = 0
ownpal = 1
pausemovetime = 9999999
supermovetime = 9999999
[State 0,Hud]
type = Explod
triggerall = teamside = 2
trigger1 = root,stateno = 3002 && root,time = 1
space = space
anim = 3073
facing=1
id = 3073
pos =const720p(-127),(screenheight/2)+(var(0)*11)
scale = const720p(1),const720p(1)
postype = right
bindtime = -1
removetime = -2
ontop = 1
ignorehitpause = 1
removeongethit = 0
ownpal = 1
pausemovetime = 9999999
supermovetime = 9999999

;REVERSE BEAT
[State 0,Hud]
type = Explod
triggerall = teamside = 1
trigger1 = root,stateno = 200 && root,prevstateno = 210 && root,time = 1
trigger2 = root,stateno = 200 && root,prevstateno = 220 && root,time = 1
trigger3 = root,stateno = 210 && root,prevstateno = 220 && root,time = 1
trigger4 = root,stateno = 400 && root,prevstateno = 410 && root,time = 1
trigger5 = root,stateno = 400 && root,prevstateno = 420 && root,time = 1
trigger6 = root,stateno = 410 && root,prevstateno = 420 && root,time = 1
trigger7 = root,stateno = 200 && root,prevstateno = 410 && root,time = 1
trigger8 = root,stateno = 200 && root,prevstateno = 420 && root,time = 1
trigger9 = root,stateno = 210 && root,prevstateno = 420 && root,time = 1
trigger10 = root,stateno = 400 && root,prevstateno = 210 && root,time = 1
trigger11 = root,stateno = 400 && root,prevstateno = 220 && root,time = 1
trigger12 = root,stateno = 410 && root,prevstateno = 220 && root,time = 1
trigger13 = root,stateno = 600 && root,prevstateno = 610 && root,time = 1
trigger14 = root,stateno = 600 && root,prevstateno = 620 && root,time = 1
trigger15 = root,stateno = 610 && root,prevstateno = 620 && root,time = 1
space = space
anim = 3074
facing=1
id = 3074
pos =const720p(133),(screenheight/2)+(var(0)*11)
scale = const720p(1),const720p(1)
postype = left
bindtime = -1
removetime = -2
ontop = 1
ignorehitpause = 1
removeongethit = 0
ownpal = 1
pausemovetime = 9999999
supermovetime = 9999999
[State 0,Hud]
type = Explod
triggerall = teamside = 2
trigger1 = root,stateno = 200 && root,prevstateno = 210 && root,time = 1
trigger2 = root,stateno = 200 && root,prevstateno = 220 && root,time = 1
trigger3 = root,stateno = 210 && root,prevstateno = 220 && root,time = 1
trigger4 = root,stateno = 400 && root,prevstateno = 410 && root,time = 1
trigger5 = root,stateno = 400 && root,prevstateno = 420 && root,time = 1
trigger6 = root,stateno = 410 && root,prevstateno = 420 && root,time = 1
trigger7 = root,stateno = 200 && root,prevstateno = 410 && root,time = 1
trigger8 = root,stateno = 200 && root,prevstateno = 420 && root,time = 1
trigger9 = root,stateno = 210 && root,prevstateno = 420 && root,time = 1
trigger10 = root,stateno = 400 && root,prevstateno = 210 && root,time = 1
trigger11 = root,stateno = 400 && root,prevstateno = 220 && root,time = 1
trigger12 = root,stateno = 410 && root,prevstateno = 220 && root,time = 1
trigger13 = root,stateno = 600 && root,prevstateno = 610 && root,time = 1
trigger14 = root,stateno = 600 && root,prevstateno = 620 && root,time = 1
trigger15 = root,stateno = 610 && root,prevstateno = 620 && root,time = 1
space = space
anim = 3074
facing=1
id = 3074
pos =const720p(-133),(screenheight/2)+(var(0)*11)
scale = const720p(1),const720p(1)
postype = right
bindtime = -1
removetime = -2
ontop = 1
ignorehitpause = 1
removeongethit = 0
ownpal = 1
pausemovetime = 9999999
supermovetime = 9999999

;RECOVERY
[State 0,Hud]
type = Explod
triggerall = teamside = 1
trigger1 = root,stateno = 5201 && root,animelemtime(1) = 0
trigger2 = root,stateno = 5210 && root,animelemtime(1) = 0
trigger3 = root,stateno = 1227 && root,time = 1 && root,movetype = I
space = space
anim = 3075
facing=1
id = 3075
pos =const720p(132),(screenheight/2)+(var(0)*11)
scale = const720p(1),const720p(1)
postype = left
bindtime = -1
removetime = -2
ontop = 1
ignorehitpause = 1
removeongethit = 0
ownpal = 1
pausemovetime = 9999999
supermovetime = 9999999
[State 0,Hud]
type = Explod
triggerall = teamside = 2
trigger1 = root,stateno = 5201 && root,animelemtime(1) = 0
trigger2 = root,stateno = 5210 && root,animelemtime(1) = 0
trigger3 = root,stateno = 1227 && root,time = 1 && root,movetype = I
space = space
anim = 3075
facing=1
id = 3075
pos =const720p(-132),(screenheight/2)+(var(0)*11)
scale = const720p(1),const720p(1)
postype = right
bindtime = -1
removetime = -2
ontop = 1
ignorehitpause = 1
removeongethit = 0
ownpal = 1
pausemovetime = 9999999
supermovetime = 9999999

;THROW ESCAPE
[State 0,Hud]
type = Explod
triggerall = teamside = 1
trigger1 = (root,stateno = 755 || root,stateno = 955 || root,stateno = 957) && root,time = 1
space = space
anim = 3076
facing=1
id = 3076
pos =const720p(132),(screenheight/2)+(var(0)*11)
scale = const720p(1),const720p(1)
postype = left
bindtime = -1
removetime = -2
ontop = 1
ignorehitpause = 1
removeongethit = 0
ownpal = 1
pausemovetime = 9999999
supermovetime = 9999999
[State 0,Hud]
type = Explod
triggerall = teamside = 2
trigger1 = (root,stateno = 755 || root,stateno = 955 || root,stateno = 957) && root,time = 1
space = space
anim = 3076
facing=1
id = 3076
pos =const720p(-132),(screenheight/2)+(var(0)*11)
scale = const720p(1),const720p(1)
postype = right
bindtime = -1
removetime = -2
ontop = 1
ignorehitpause = 1
removeongethit = 0
ownpal = 1
pausemovetime = 9999999
supermovetime = 9999999

;EX GUARD
[State 0,Hud]
type = Explod
triggerall = teamside = 1
trigger1 = (root,stateno = 150 || root,stateno = 152 || root,stateno = 154) && root,var(6) = 1 && root,time = 1 && root,var(5) < 9
space = space
anim = 3077
facing=1
id = 3077
pos =const720p(132),(screenheight/2)+(var(0)*11)
scale = const720p(1),const720p(1)
postype = left
bindtime = -1
removetime = -2
ontop = 1
ignorehitpause = 1
removeongethit = 0
ownpal = 1
pausemovetime = 9999999
supermovetime = 9999999
[State 0,Hud]
type = Explod
triggerall = teamside = 2
trigger1 = (root,stateno = 150 || root,stateno = 152 || root,stateno = 154) && root,var(6) = 1 && root,time = 1 && root,var(5) < 9
space = space
anim = 3077
facing=1
id = 3077
pos =const720p(-132),(screenheight/2)+(var(0)*11)
scale = const720p(1),const720p(1)
postype = right
bindtime = -1
removetime = -2
ontop = 1
ignorehitpause = 1
removeongethit = 0
ownpal = 1
pausemovetime = 9999999
supermovetime = 9999999

;DANGER
[State 0,Hud]
type = Explod
triggerall = teamside = 1
trigger1 = var(1) = 1
space = space
anim = 3078
facing=1
id = 3078
pos =const720p(132),(screenheight/2)+(var(0)*11)
scale = const720p(1),const720p(1)
postype = left
bindtime = -1
removetime = -2
ontop = 1
ignorehitpause = 1
removeongethit = 0
ownpal = 1
pausemovetime = 9999999
supermovetime = 9999999
[State 0,Hud]
type = Explod
triggerall = teamside = 2
trigger1 = var(1) = 1
space = space
anim = 3078
facing=1
id = 3078
pos =const720p(-132),(screenheight/2)+(var(0)*11)
scale = const720p(1),const720p(1)
postype = right
bindtime = -1
removetime = -2
ontop = 1
ignorehitpause = 1
removeongethit = 0
ownpal = 1
pausemovetime = 9999999
supermovetime = 9999999

;FIRST ATTACK
[State 0,Hud]
type = Explod
triggerall = teamside = 1
trigger1 = var(2) = 1
space = space
anim = 3079
facing=1
id = 3079
pos =const720p(132),ifelse(root,var(18)=1,(screenheight/2)-11,(screenheight/2)+(var(0)*11))
scale = const720p(1),const720p(1)
postype = left
bindtime = -1
removetime = -2
ontop = 1
ignorehitpause = 1
removeongethit = 0
ownpal = 1
pausemovetime = 9999999
supermovetime = 9999999
[State 0,Hud]
type = Explod
triggerall = teamside = 2
trigger1 = var(2) = 1
space = space
anim = 3079
facing=1
id = 3079
pos =const720p(-132),ifelse(root,var(18)=1,(screenheight/2)-11,(screenheight/2)+(var(0)*11))
scale = const720p(1),const720p(1)
postype = right
bindtime = -1
removetime = -2
ontop = 1
ignorehitpause = 1
removeongethit = 0
ownpal = 1
pausemovetime = 9999999
supermovetime = 9999999

[State 0]
type = varset
trigger1 = var(2) = 1
var(2) = 10

;---------------------------------------------------------------------------
;DANGER MODE
[Statedef 6005]
type=A
movetype=I
physics=N
velset = 0,0
anim = 1
ctrl=0
sprpriority=-99

[State 0]
type = turn
trigger1 = p2dist x < 0

[State 0, PalFX]
type = PalFX
trigger1 = 1
time = 100
add = 0,0,0
mul =255,0,0
sinadd = 0,0,0,255
color = 256

[State 0, DANGER]
type = varadd
trigger1 = root,life <= (root,lifemax*0.35)
var(1) = 1
[State 0]
type = null
trigger1 = var(1) = 10
trigger1 = var(1) := 10
trigger2 = root,life > (root,lifemax*0.35)
trigger2 = var(1) := 0

[State 0]
type = bindtoroot
trigger1 = root,statetype != C
pos = 0,-40
[State 0]
type = bindtoroot
trigger1 = root,statetype = C
pos = 0,0

[State 0, Explod]
type = Explod
triggerall = root,fvar(0) >= 270
trigger1 = (gametime%25)=0
pos = 0,0
anim = 6040+random%4
id = 6040
scale = 0.25,0.25
postype = p1
bindtime = -1
random = 40,20
facing = ifelse((random = [0,499]),-1,1)
removetime = -2
sprpriority = -5
ignorehitpause = 1
removeongethit = 0
ownpal = 0
pausemovetime = 999
supermovetime = 999

[State 0]
type = destroyself
trigger1 = var(1) = 0
trigger2 = root,alive = 0
trigger3 = root,var(19) = 1


;---------------------------------------------------------------------------
;THIS IS THE MIDDLE OF THE STAGE
[Statedef 6006]
type=A
movetype=I
physics=N
velset = 0,0
anim = 1
ctrl=0
sprpriority=-99

[State 0]
type = screenbound
trigger1 = root,anim = 1700 && root,time = 40 && root,stateno = 1701
movecamera = 1,1

[State 0]
type = width
triggerall = root,anim = 1700 && root,time = 40 && root,stateno = 1701
trigger1 = 1
value = 999,999

;---------------------------------------------------------------------------
; Initialize (at the start of the round)
[Statedef 5900]
type = S

[State 5900, 1] ;Clear all int variables
type = VarRangeSet
trigger1 = roundsexisted = 0
value = 0

[State 5900, 2] ;Clear all float variables
type = VarRangeSet
trigger1 = roundsexisted = 0
fvalue = 0

[State 5900, 3] ;Change palette
type = RemapPal
trigger1 = 1
source = 0,0
dest = 0,0

[State 0]
type = varset
trigger1 = roundno = 1
var(55) = palno

[State 0]
type = varset
trigger1 = 1
fvar(35) = 0

[State 5900, 4] ;Intro for round 1
type = ChangeState
trigger1 = roundno = 1
value = 190

[State 5900, 5] ;All other rounds
type = ChangeState
trigger1 = 1
value = 0

;---------------------------------------------------------------------------
[Statedef 5205]
type=A
movetype=H
physics=N

[State 5205, End]; Sends character back to his own recovery states
type = selfstate
trigger1 = 1
value = ifelse(pos y <-5, 5210, 5200)

;---------------------------------------------------------------------------
[Statedef 5206]
type=A
movetype=H
physics=N

[State 5205, End]; Sends character back to his own recovery states
type = selfstate
trigger1 = 1
value = 5200

;---------------------------------------------------------------------------
[Statedef 5207]
type=A
movetype=H
physics=N

[State 5205, End]; Sends character back to his own recovery states
type = selfstate
trigger1 = 1
value = 5201

;----------------------------------------------------------------------------------------------
; YOU WIN!!
;----------------------------------------------------------------------------------------------
[Statedef 50000]
ctrl = 0
anim = 1
ownpal = 1

[State 0]
type = parentvaradd
trigger1 = time = 0
var(56) = 1
persistent = 0
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999

[State 0]
type = playsnd
triggerall = time = 0
trigger1 = root,stateno = 210
value = 1,11
abspan = 0
persistent = 0
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999

[State 0]
type = playsnd
triggerall = time = 0
trigger1 = root,stateno = [700,799]
value = 1,13
abspan = 0
persistent = 0
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999

[State 0]
type = playsnd
triggerall = time = 0
trigger1 = root,stateno = 200
trigger2 = root,stateno = [220,229]
trigger3 = root,stateno = [400,420]
trigger4 = root,stateno = [600,699]
trigger5 = root,anim = [800,999]
trigger6 = root,stateno = [1000,1599]
value = 1,12
abspan = 0
persistent = 0
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999

[State 0]
type = playsnd
triggerall = time = 0
trigger1 = root,stateno = [1600,1799]
value = 0,3
abspan = 0
persistent = 0
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999

[State 0]
type = pause
trigger1= time = 0
time = 15
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999



;================================================================================

;---------------------------------------------------------------------------
; Override common states (use same number to override) :
;---------------------------------------------------------------------------

;---------------------------------------------------------------------------
; States that are always executed (use statedef -2)

[Statedef -2]

[State 0]
type = Helper
trigger1 = anim = 704 && animelemtime(5) = 0
pos = 25,-80
postype = p1
stateno = 4020
helpertype = normal
sprpriority = 99
ownpal = 1
ignorehitpause = 1
supermovetime = 9999999
pausemovetime = 9999999
size.xscale = 1
size.yscale = 1

[State -2, Resets]
type = null
;trigger1 = (stateno != [50,69]) || (stateno != [860,869]) && var(2) = 0
trigger1 = (statetype = A && animelemtime(1) = 1) || stateno = 105 || stateno = 700
trigger1 = var(0) := 0
trigger2 = command !="back"||command !="fwd"||command != "holdback"||command != "holdfwd"
trigger2 = stateno != 11 && command = "down"
trigger2 = var(1) := 12 ;high jump time
trigger3 = (stateno = [50,69]) || movetype = H
trigger3 = var(1) := 0
trigger4 = enemynear,movetype != H && movetype != A
trigger4 = var(15) := 0
trigger5 = movetype = H || (stateno != 830 && stateno != 221)
trigger5 = var(16) := 0
trigger6 = (stateno = [0,39]) && time = 1
trigger6 = var(0) := 0

[State 0]
type = varset
trigger1 = statetype = A
trigger1 = p2dist x < 0
trigger2 = stateno = 702
var(0) = 1

[State -2, High Jump]
type = varSet
triggerall = stateno != 40
triggerall = stateno != 66
trigger1 = var(1)>0
var(1) = var(1)-1
ignorehitpause = 1

[State -2, Afterimage Remover]
type = AfterImageTime
;triggerall = var(12) != [897,900]
triggerall = var(12) != [1797,1800]
trigger1 = MoveType = H
trigger2 = Stateno = [0,39]
trigger3 = stateno = 52
trigger4 = Stateno = [200,499]
trigger5 = Stateno = [1000,1099]
trigger6 = Stateno = [1300,1399]
trigger7 = Stateno = [1500,2999]
time = 0

[state 0, Guard Voice]
type = Helper
triggerall = numhelper(6002) = 0
triggerall = time = 0
triggerall = roundstate >= 2
trigger1 = stateno = 150
trigger2 = stateno = 152
trigger3 = stateno = 154
pos = 0, 0
postype = p1
stateno = 6002
name = "GUARD"
id = 6002
helpertype = normal
sprpriority = 9
ownpal = 1

[state 0, Pain Voice]
type = Helper
triggerall = numhelper(6003) = 0
triggerall = roundstate >= 2
triggerall = time = 0
trigger1=stateno = 5000
trigger2=stateno = 5010
trigger3=stateno = 5020
trigger4=stateno = 5030
trigger5=stateno = 5070
pos = 0, 0
postype = p1
stateno = 6003
name = "PAIN"
id = 6003
helpertype = normal
sprpriority = 9
ownpal = 1
ignorehitpause = 1
pausemovetime = 99999
supermovetime = 99999

[State 0, Win]
type = Helper
triggerall = numhelper(50000) = 0
trigger1 = win = 1
name = "WINNING"
id = 50000
pos = 0, 0
postype = p1
stateno = 50000
helpertype = normal
sprpriority = 5
ownpal = 1
persistent = 0
ignorehitpause = 1


[State 0, STANDARD]
type = varset
trigger1 = 1
fvar(38) = 786

[State 0, Kill Intro Voice]
type = stopsnd
trigger1 = roundstate >= 2
channel = 1
[State 0, other voice]
type = stopsnd
trigger1 = movetype = H
channel = 2

[State 0, Voice Pos]
type = sndpan
trigger1 = 1
channel = 0
pan = floor(pos x)
ignorehitpause = 1

[state 0, Ground FX]
type = Helper
triggerall = numhelper(4019) = 0
trigger1 = enemynear,stateno = 1221 && enemynear,movetype = H
id = 4019
pos = 0,0
postype = p2
stateno = 4019
helpertype = normal
sprpriority = 5
ownpal = 1
size.xscale = 1
size.yscale = 1
ignorehitpause = 1
[State 0, Explod]
type = Explod
triggerall = numexplod(6502) = 0
triggerall = enemynear,gethitvar(chainid) != 1000 && enemynear,gethitvar(chainid) != 1322
trigger1 = enemynear,stateno = 1225 && enemynear,movetype = H
pos = (Target,const(size.head.pos.x)) -15, (Target,const(size.head.pos.y)) - 10
anim = 6502
id = 6502
scale = 0.5,0.5
postype = p2
facing = -1
bindtime = -1
removetime = -2
ontop = 1
ignorehitpause = 1
removeongethit = 1
ownpal = 1
supermovetime = 999
[State 0]
type = removeexplod
trigger1 = enemynear,stateno != 1225
id = 6502
ignorehitpause = 1
supermovetime = 999


;-----------Gauge Offline
[State -2, Gauge Offline Time]
type = varSet
triggerall = stateno != [3000,3009]
trigger1 = var(12)>0
var(12) = var(12)-1
ignorehitpause = 1
pausemovetime = 9999999
supermovetime = 9999999

[State 0]
type = removeexplod
triggerall = roundstate >= 2
trigger1 = var(12) = 0
id = 3000
pausemovetime = 9999999
supermovetime = 9999999
[State 0]
type = removeexplod
triggerall = roundstate >= 2
trigger1 = var(12) = 0
id = 3002
pausemovetime = 9999999
supermovetime = 9999999

[State 0]
type = Explod
triggerall = teamside = 1
triggerall = movetype != H
trigger1 = (stateno = 3000 || stateno = 3002) && time = 3
trigger2 = stateno = 1002
trigger2 = animelemtime(1) = 1
trigger3 = stateno = 1102
trigger3 = animelemtime(1) = 1
trigger4 = stateno = 1202
trigger4 = animelemtime(1) = 1
trigger5 = stateno = 1302
trigger5 = animelemtime(1) = 1
trigger6 = stateno = 1404
trigger6 = animelemtime(1) = 1
trigger7 = stateno = 1600
trigger7 = animelemtime(1) = 1
space = space
anim = 3043
id = 3043
pos =0,Screenheight-const720p(84)
scale = const720p(1.33), const720p(1.33)
postype = left
bindtime = -1
removetime = -2
ontop = 1
ignorehitpause = 1
removeongethit = 0
ownpal = 1
pausemovetime = 9999999
supermovetime = 9999999
[State 0]
type = Explod
triggerall = teamside = 2
triggerall = movetype != H
trigger1 = (stateno = 3000 || stateno = 3002) && time = 3
trigger2 = stateno = 1002
trigger2 = animelemtime(1) = 1
trigger3 = stateno = 1102
trigger3 = animelemtime(1) = 1
trigger4 = stateno = 1202
trigger4 = animelemtime(1) = 1
trigger5 = stateno = 1302
trigger5 = animelemtime(1) = 1
trigger6 = stateno = 1404
trigger6 = animelemtime(1) = 1
trigger7 = stateno = 1600
trigger7 = animelemtime(1) = 1
space = space
anim = 3043
facing = -1
id = 3043
pos =0,Screenheight-const720p(84)
scale = const720p(1.33), const720p(1.33)
postype = right
bindtime = -1
removetime = -2
ontop = 1
ignorehitpause = 1
removeongethit = 0
ownpal = 1
pausemovetime = 9999999
supermovetime = 9999999

;-----------Intro Time
[State -2, Intro Time]
type = varSet
trigger1 = var(13)>0
var(13) = var(13)-1
ignorehitpause = 1
[State 0]
type = removeexplod
trigger1 = var(13) = 1
id = 3050

;------------------------------------------------

;-----------Cheap KO nonsense
[State 0, fall face down if collapse]
type = varset
trigger1 = anim = 5950 || anim = 5955 || anim = 5954 || anim = 5309 || anim = 5307
var(8) = 1
[State 0]
type = posadd
triggerall =anim = 5950 || anim = 5955
trigger1 = animelemtime(3) = 0
trigger32= animelemtime(4) = 0
x = 8
[State 0]
type = posadd
triggerall =anim = 5950 || anim = 5955
trigger1 = animelemtime(5) = 0
x = 15
ignorehitpause = 1
pausemovetime = 999
supermovetime = 999
[State 0]
type = posadd
triggerall =anim = 5309
trigger1 = animelemtime(2) = 0
trigger2 = animelemtime(3) = 0
x = 8
ignorehitpause = 1
pausemovetime = 999
supermovetime = 999
[State 0]
type = posadd
triggerall =anim = 5309
trigger1 = animelemtime(4) = 0
x = 15
ignorehitpause = 1
pausemovetime = 999
supermovetime = 999

[State 0]
type = playsnd
triggerall = anim = 5309 || anim = 5307
triggerall = numexplod(6090)=0
trigger1 = animelem = 7
value = 0,4
pausemovetime = 999
supermovetime = 999
[State 0, Explod]
type = Explod
triggerall = anim = 5309 || anim = 5307
triggerall = numexplod(6090)=0
trigger1= animelem = 7
anim = 6090
id = 6090
pos = 0,0
scale = 0.7,0.7
postype = p1
bindtime = 1
removetime = -2
sprpriority = 2
ignorehitpause = 1
removeongethit = 0
ownpal = 1
pausemovetime = 999
supermovetime = 999


[State 0, Reverse Beat Glow]
type = PalFX
trigger1 = stateno = 200 && prevstateno = 210 && time = 1
trigger2 = stateno = 200 && prevstateno = 220 && time = 1
trigger3 = stateno = 210 && prevstateno = 220 && time = 1
trigger4 = stateno = 400 && prevstateno = 410 && time = 1
trigger5 = stateno = 400 && prevstateno = 420 && time = 1
trigger6 = stateno = 410 && prevstateno = 420 && time = 1
trigger7 = stateno = 200 && prevstateno = 410 && time = 1
trigger8 = stateno = 200 && prevstateno = 420 && time = 1
trigger9 = stateno = 210 && prevstateno = 420 && time = 1
trigger10 = stateno = 400 && prevstateno = 210 && time = 1
trigger11 = stateno = 400 && prevstateno = 220 && time = 1
trigger12 = stateno = 410 && prevstateno = 220 && time = 1
trigger13 = stateno = 600 && prevstateno = 610 && time = 1
trigger14 = stateno = 600 && prevstateno = 620 && time = 1
trigger15 = stateno = 610 && prevstateno = 620 && time = 1
time = 10
sinadd = 128,128,128,20
invertall = 0
color = 256
;persistent = 0
ignorehitpause = 1

[State 0, Stop Custom Voice]
type = stopsnd
trigger1 = numhelper(6003) != 0
trigger1 = helper(6003),var(2) != 0
trigger2= !alive
channel = 10

[State 0,Throw Escape]
type = playsnd
trigger1 = anim = 704 && animelemtime(1)=1
trigger2 = anim = 724 && animelemtime(1)=1
value = 14,2+random%2

[State 0]
type = Helper
trigger1 = anim = 704 && animelemtime(1)=1
trigger2 = anim = 724 && animelemtime(1)=1
pos = 0,0
postype = p1
stateno = 4028
id = 4028
helpertype = normal
sprpriority = 99
ownpal = 1
ignorehitpause = 1
supermovetime = 9999999
pausemovetime = 9999999
size.xscale = 1
size.yscale = 1

[State -2, Hit Wall voice]
type=PlaySnd
trigger1=anim = 5953 && animelemtime(1)=1
value = 32,random%4
channel = 10


[State 0, Turn Voice]
type = playsnd
triggerall = random = [0,149]
triggerall = enemynear,movetype != H && enemynear,pos y <= -60 && enemynear,statetype = A
trigger1 = anim = 5 && animelemtime(1) = 1
trigger2 = anim = 6 && animelemtime(1) = 1
value = 18,2
channel = 0



[State 0]
type = playsnd
triggerall = numexplod(6062) = 0
trigger1 = enemynear,stateno = 713 && enemynear,animelemtime(1) = 1
value = 0,14
abspan = ceil(enemynear,pos x)
pausemovetime = 999
supermovetime = 999
[State 0]
type = Helper
triggerall = numexplod(6062) = 0
trigger1 = enemynear,stateno = 713 && enemynear,animelemtime(1) = 1
pos = -30,(enemynear,const(size.mid.pos.y))
postype = p2
stateno = 4000
helpertype = normal
sprpriority = 99
ownpal = 1
persistent = 0
ignorehitpause = 1
supermovetime = 9999999
pausemovetime = 9999999
[State 0,Enemy Hit Wall FX]
type = Explod
triggerall = numexplod(6062) = 0
trigger1 = enemynear,stateno = 713 && enemynear,animelemtime(1) = 1
anim = 6062
id = 6062
pos = -30,(enemynear,const(size.mid.pos.y))
scale = 0.5,0.5
postype = p2
bindtime = 1
removetime = -2
sprpriority = 5
trans = sub
ignorehitpause = 1
removeongethit = 0
ownpal = 1
pausemovetime = 999
supermovetime = 999

;----------------------
;TRIP
[State 0]
type = varSet
triggerall = var(8) = 0
trigger1 = anim = 5070
var(8) = 1
ignorehitpause = 1
[State 0]
type = varSet
trigger1 = stateno = [0,52]
trigger2 = stateno = [5000,5069]
var(8) = 0
ignorehitpause = 1

[State -2]
trigger1 = 1
type = DisplayToClipboard
ignorehitpause = 1
text = "X = %f Y = %f ComingssssssssssssssssssssssssssssssssssssRESULT = %d P1 = %d P2 = %d"
params = Vel X, Vel Y, fvar(9), var(32) , enemynear,gethitvar(chainid)

;==============GAUGE SYSTEM===================

[State 0,P1 Main Gauge]
type = Explod
triggerall = roundstate >= 2
triggerall = teamside = 1
triggerall = var(19) = 0
triggerall = numexplod(3000) = 0
trigger1 = 1
space = space
anim = 3000
facing = 1
id = 3000
pos =0,Screenheight-const720p(84)
scale = const720p(1.33), const720p(1.33)
postype = left
bindtime = -1
removetime = -1
ontop = 1
sprpriority = 98
ignorehitpause = 1
removeongethit = 0
ownpal = 1
pausemovetime = 9999999
supermovetime = 9999999
[State 0,P2 Main Gauge]
type = Explod
triggerall = roundstate >= 2
triggerall = teamside = 2
triggerall = var(19) = 0
triggerall = numexplod(3000) = 0
trigger1 = 1
space = space
anim = 3000
facing = -1
id = 3000
pos =0,Screenheight-const720p(84)
scale = const720p(1.33), const720p(1.33)
postype = right
bindtime = -1
removetime = -1
ontop = 1
sprpriority = 98
ignorehitpause = 1
removeongethit = 0
ownpal = 1
pausemovetime = 9999999
supermovetime = 9999999

;--------OFFLINE
[State 0,P1 Main Gauge]
type = Explod
triggerall = roundstate >= 2
triggerall = teamside = 1
triggerall = var(19) = 0
triggerall = numexplod(3003) = 0
triggerall = var(12) != 0
trigger1 = 1
space = space
anim = 3003
facing = 1
id = 3003
pos =0,Screenheight-const720p(84)
scale = const720p(1.33), const720p(1.33)
postype = left
bindtime = -1
removetime = -1
ontop = 1
sprpriority = 98
ignorehitpause = 1
removeongethit = 0
ownpal = 1
pausemovetime = 9999999
supermovetime = 9999999
[State 0,P2 Main Gauge]
type = Explod
triggerall = roundstate >= 2
triggerall = teamside = 2
triggerall = var(19) = 0
triggerall = numexplod(3003) = 0
;triggerall = numexplod(3002) = 0
triggerall = var(12) != 0
trigger1 = 1
space = space
anim = 3003
facing = -1
id = 3003
pos =0,Screenheight-const720p(84)
scale = const720p(1.33), const720p(1.33)
postype = right
bindtime = -1
removetime = -1
ontop = 1
sprpriority = 98
ignorehitpause = 1
removeongethit = 0
ownpal = 1
pausemovetime = 9999999
supermovetime = 9999999

[State 0,P1 RAINBOW]
type = Explod
triggerall = roundstate >= 2
triggerall = teamside = 1
triggerall = var(19) = 0
triggerall = numexplod(3006) = 0
trigger1 = var(12) != 0
space = space
anim = 3007
facing = 1
id = 3006
pos =0,Screenheight-const720p(84)
scale = const720p(1.33), const720p(1.33)
postype = left
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
ignorehitpause = 1
removeongethit = 0
ownpal = 1
pausemovetime = 9999999
supermovetime = 9999999
[State 0,P2 RAINBOW]
type = Explod
triggerall = roundstate >= 2
triggerall = teamside = 2
triggerall = var(19) = 0
triggerall = numexplod(3006) = 0
trigger1 = var(12) != 0
space = space
anim = 3007
facing = -1
id = 3006
pos =0,Screenheight-const720p(84)
scale = const720p(1.33), const720p(1.33)
postype = right
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
ignorehitpause = 1
removeongethit = 0
pausemovetime = 9999999
supermovetime = 9999999

[State 0,P1 Main Gauge]
type = Explod
triggerall = roundstate >= 2
triggerall = teamside = 1
triggerall = numexplod(3005) = 0
triggerall = var(12) != 0
trigger1 = 1
space = space
anim = 3005
facing = 1
id = 3005
pos =0,Screenheight-const720p(84)
scale = const720p(1.33), const720p(1.33)
postype = left
bindtime = -1
removetime = -1
ontop = 1
sprpriority = 98
ignorehitpause = 1
removeongethit = 0
ownpal = 1
pausemovetime = 9999999
supermovetime = 9999999
[State 0,P2 Main Gauge]
type = Explod
triggerall = roundstate >= 2
triggerall = teamside = 2
triggerall = numexplod(3005) = 0
triggerall = var(12) != 0
trigger1 = 1
space = space
anim = 3006
facing = -1
id = 3005
pos =0,Screenheight-const720p(84)
scale = const720p(1.33), const720p(1.33)
postype = right
bindtime = -1
removetime = -1
ontop = 1
sprpriority = 98
ignorehitpause = 1
removeongethit = 0
ownpal = 1
pausemovetime = 9999999
supermovetime = 9999999

[State 0, Explod]
type = Explod
triggerall = teamside = 1
triggerall = var(9) != 0
trigger1 = numexplod(3008)=0
space = space
pos =const240p(12),Screenheight-const240p(5)
scale = const720p(1), const720p(1)
anim = 3008
id = 3008
angle = -90
postype = left
bindtime = -1
ontop = 1
removetime = -2
ignorehitpause = 1
removeongethit = 0
ownpal = 1
pausemovetime = 9999999
supermovetime = 9999999
[State 0, Explod]
type = Explod
triggerall = teamside = 2
triggerall = var(9) != 0
trigger1 = numexplod(3008)=0
space = space
pos = -const240p(12),Screenheight-const240p(5)
scale = const720p(1), const720p(1)
anim = 3008
id = 3008
angle = 90
postype = right
bindtime = -1
ontop = 1
removetime = -2
ignorehitpause = 1
removeongethit = 0
ownpal = 1
pausemovetime = 9999999
supermovetime = 9999999

[State 0]
type = removeexplod
trigger1 = var(12) = 0
trigger2 = var(19) = 1
id = 3003
pausemovetime = 9999999
supermovetime = 9999999
ignorehitpause = 1
[State 0]
type = removeexplod
trigger1 = var(9) = 0
trigger2 = var(19) = 1
id = 3005
pausemovetime = 9999999
supermovetime = 9999999
ignorehitpause = 1
[State 0]
type = removeexplod
trigger1 = var(9) = 0
trigger2 = var(19) = 1
id = 3006
pausemovetime = 9999999
supermovetime = 9999999
ignorehitpause = 1
[State 0]
type = removeexplod
trigger1 = var(12) = 0
trigger2 = var(19) = 1
id = 3002
pausemovetime = 9999999
supermovetime = 9999999
ignorehitpause = 1

[State 0]
type = null
triggerall = var(19) = 1
trigger1 = fvar(0) := 0
trigger2 = fvar(35) := 0
trigger3 = var(12) := 0
pausemovetime = 9999999
supermovetime = 9999999
ignorehitpause = 1

[State 0]
type = varset
trigger1 = numexplod(3005) != 0
fvar(35) = 1000
pausemovetime = 9999999
supermovetime = 9999999
ignorehitpause = 1
[State 0]
type = varset
trigger1 = numexplod(3005) = 0 && var(12) != 0
fvar(35) = 0
pausemovetime = 9999999
supermovetime = 9999999
ignorehitpause = 1

;----------------------
FULLY OFFLINE GAUGE
[State 0,P1 Main Gauge]
type = Explod
triggerall = roundstate >= 2
triggerall = teamside = 1
triggerall = var(19) = 1
triggerall = numexplod(3036) = 0
trigger1 = 1
space = space
anim = 3036
facing = 1
id = 3036
pos =0,Screenheight-const720p(84)
scale = const720p(1.33), const720p(1.33)
postype = left
bindtime = -1
removetime = -1
ontop = 1
sprpriority = 98
ignorehitpause = 1
removeongethit = 0
ownpal = 1
pausemovetime = 9999999
supermovetime = 9999999
[State 0,P2 Main Gauge]
type = Explod
triggerall = roundstate >= 2
triggerall = teamside = 2
triggerall = var(19) = 1
triggerall = numexplod(3036) = 0
trigger1 = 1
space = space
anim = 3036
facing = -1
id = 3036
pos =0,Screenheight-const720p(84)
scale = const720p(1.33), const720p(1.33)
postype = right
bindtime = -1
removetime = -1
ontop = 1
sprpriority = 98
ignorehitpause = 1
removeongethit = 0
ownpal = 1
pausemovetime = 9999999
supermovetime = 9999999

;----------------------

[State 0,P1 Main Gauge Pointer]
type = Explod
triggerall = roundstate >= 2
triggerall = teamside = 1
triggerall = var(19) = 0
triggerall = numexplod(3002) = 0
trigger1 = 1
space = space
anim = ifelse(var(12)!=0,3004,3002)
facing = 1
id = 3002
pos =const720p(49),Screenheight-const720p(45)
scale = const720p(1.33), const720p(1.33)
angle = ceil(fvar(0))
postype = left
bindtime = -1
removetime = -1
ontop = 1
ignorehitpause = 1
removeongethit = 0
ownpal = 1
pausemovetime = 9999999
supermovetime = 9999999
[State 0,P2 Main Gauge Pointer]
type = Explod
triggerall = roundstate >= 2
triggerall = teamside = 2
triggerall = var(19) = 0
triggerall = numexplod(3002) = 0
trigger1 = 1
space = space
anim = ifelse(var(12)!=0,3004,3002)
facing = -1
id = 3002
pos =-const720p(49),Screenheight-const720p(45)
scale = const720p(1.33), const720p(1.33)
angle = -ceil(fvar(0))
postype = right
bindtime = -1
removetime = -1
ontop = 1
ignorehitpause = 1
removeongethit = 0
ownpal = 1
pausemovetime = 9999999
supermovetime = 9999999

[State 0,P1 Main Gauge Pointer]
type = Explod
triggerall = roundstate >= 2
triggerall = teamside = 1
triggerall = var(19) = 0
triggerall = numexplod(3002) = 0
triggerall = numexplod(3003) = 1 && var(12) != 0
trigger1 = 1
space = space
anim = ifelse(var(12)!=0,3004,3002)
facing = 1
id = 3002
pos =const720p(49),Screenheight-const720p(45)
scale = const720p(1.33), const720p(1.33)
angle = ceil(fvar(0))
postype = left
bindtime = -1
removetime = -1
ontop = 1
ignorehitpause = 1
removeongethit = 0
ownpal = 1
pausemovetime = 9999999
supermovetime = 9999999
[State 0,P2 Main Gauge Pointer]
type = Explod
triggerall = roundstate >= 2
triggerall = teamside = 2
triggerall = var(19) = 0
triggerall = numexplod(3002) = 0
triggerall = numexplod(3003) = 1 && var(12) != 0
trigger1 = 1
space = space
anim = ifelse(var(12)!=0,3004,3002)
facing = -1
id = 3002
pos =-const720p(49),Screenheight-const720p(45)
scale = const720p(1.33), const720p(1.33)
angle = -ceil(fvar(0))
postype = right
bindtime = -1
removetime = -1
ontop = 1
ignorehitpause = 1
removeongethit = 0
ownpal = 1
pausemovetime = 9999999
supermovetime = 9999999
[State 0]
type = modifyexplod
trigger1 = 1
angle = -ceil(fvar(0))
id = 3002
ignorehitpause = 1

[State 0,P1 Main Gauge Glow]
type = Explod
triggerall = roundstate >= 2
triggerall = teamside = 1
triggerall = numexplod(3001) = 0
trigger1 = 1
space = space
anim = 3001
facing = 1
id = 3001
pos =0,Screenheight-const720p(84)
scale = const720p(1.33), const720p(1.33)
postype = left
bindtime = -1
removetime = -1
ontop = 1
ignorehitpause = 1
removeongethit = 0
ownpal = 1
pausemovetime = 9999999
supermovetime = 9999999
[State 0,P2 Main Gauge Glow]
type = Explod
triggerall = roundstate >= 2
triggerall = teamside = 2
triggerall = numexplod(3001) = 0
trigger1 = 1
space = space
anim = 3001
facing = -1
id = 3001
pos =0,Screenheight-const720p(84)
scale = const720p(1.33), const720p(1.33)
postype = right
bindtime = -1
removetime = -1
ontop = 1
ignorehitpause = 1
removeongethit = 0
ownpal = 1
pausemovetime = 9999999
supermovetime = 9999999



;-----------------------
[State 0, Make sure we never go over capacity]
type = null
trigger1 = fvar(0) > 270
trigger1:= fvar(0) := 270
trigger2 = fvar(0) < 0
trigger2 = fvar(0) := 0
trigger3 = fvar(35) > 1000
trigger3 = fvar(35) := 1000
trigger4 = fvar(35) < 0
trigger4 = fvar(35) := 0
ignorehitpause = 1
pausemovetime = 9999999
supermovetime = 9999999

[State 0]
type = varset
trigger1 = fvar(0) > 270
fvar(0) = 270
ignorehitpause = 1
pausemovetime = 9999999
supermovetime = 9999999
[State 0, Burst Normal]
type = varadd
triggerall = stateno != [3000,3009]
trigger1 = var(9) = 1
fvar(0) = -0.5;-0.35
ignorehitpause = 1
pausemovetime = 9999999
supermovetime = 9999999
[State 0, Burst Green]
type = varadd
triggerall = stateno != [3000,3009]
trigger1 = var(9) = 2
fvar(0) = -4;-1.05
ignorehitpause = 1
pausemovetime = 9999999
supermovetime = 9999999
[State 0]
type = varset
trigger1 = fvar(0) <= 0
var(9) = 0
ignorehitpause = 1
pausemovetime = 9999999
supermovetime = 9999999

[State 0,Drain Burst]
type = varadd
triggerall = var(9) != 0
triggerall = time <= 20
trigger1 = stateno = 1002
trigger2 = stateno = 1102
trigger3 = stateno = 1202
trigger4 = stateno = 1402
trigger5 = stateno = 1502
fvar(0) = -2
ignorehitpause = 1
supermovetime = 999999
pausemovetime = 999999
[State 0]
type = varadd
triggerall = var(9) != 0
triggerall = time <= 20
trigger1 = stateno = 1600
fvar(0) = -13.5
ignorehitpause = 1
supermovetime = 999999
pausemovetime = 999999

[State 0]
type = varset
trigger1 = var(9) != 0
var(12) = 1800;900
ignorehitpause = 1
pausemovetime = 9999999
supermovetime = 9999999
[State 0]
type = removeexplod
trigger1 = var(9) != 0 && numexplod(3003) = 0
id = 3002
ignorehitpause = 1
pausemovetime = 9999999
supermovetime = 9999999

[State 0,Hud]
type = Explod
triggerall = teamside = 1
triggerall = numexplod(3035)= 0
trigger1 = var(12) = 1798;898
space = space
anim = 3035
facing=1
id = 3035
pos =const720p(125),Screenheight-const720p(66)
scale = const720p(1),const720p(1)
postype = left
bindtime = -1
removetime = -1
ontop = 1
ignorehitpause = 1
removeongethit = 0
ownpal = 1
pausemovetime = 9999999
supermovetime = 9999999
[State 0,Hud]
type = Explod
triggerall = teamside = 2
triggerall = numexplod(3035)= 0
trigger1 = var(12) = 1798;898
space = space
anim = 3035
facing=1
id = 3035
pos =const720p(-200),Screenheight-const720p(66)
scale = const720p(1),const720p(1)
postype = right
bindtime = -1
removetime = -1
ontop = 1
ignorehitpause = 1
removeongethit = 0
ownpal = 1
pausemovetime = 9999999
supermovetime = 9999999

[State 0,Hud]
type = Explod
triggerall = teamside = 1
triggerall = numexplod(3037)= 0
trigger1 = var(19) = 1
space = space
anim = 3037
facing=1
id = 3037
pos =const720p(160),Screenheight-const720p(83)
scale = const720p(1.33),const720p(1.33)
postype = left
bindtime = -1
removetime = -1
ontop = 1
ignorehitpause = 1
removeongethit = 0
ownpal = 1
pausemovetime = 9999999
supermovetime = 9999999
[State 0,Hud]
type = Explod
triggerall = teamside = 2
triggerall = numexplod(3037)= 0
trigger1 = var(19) = 1
space = space
anim = 3037
facing=1
id = 3037
pos =const720p(-160),Screenheight-const720p(83)
scale = const720p(1.33),const720p(1.33)
postype = right
bindtime = -1
removetime = -1
ontop = 1
ignorehitpause = 1
removeongethit = 0
ownpal = 1
pausemovetime = 9999999
supermovetime = 9999999

[State 0]
type = playsnd
trigger1 = var(12) = 1
value = 1,3
abspan = 0
[State 0, Explod]
type = Explod
triggerall = teamside = 1
trigger1 = var(12) = 1
space = space
pos =const240p(13),Screenheight-const240p(10)
scale = const720p(1.5), const720p(1.5)
anim = 3040
id = 3040
angle = random
postype = left
bindtime = -1
ontop = 1
removetime = -2
ignorehitpause = 1
removeongethit = 1
ownpal = 1
pausemovetime = 9999999
supermovetime = 9999999
[State 0, Explod]
type = Explod
triggerall = teamside = 2
trigger1 = var(12) = 1
space = space
pos = -const240p(13),Screenheight-const240p(10)
scale = const720p(1.5), const720p(1.5)
anim = 3040
id = 3040
angle = random
postype = right
bindtime = -1
ontop = 1
removetime = -2
ignorehitpause = 1
removeongethit = 1
ownpal = 1
pausemovetime = 9999999
supermovetime = 9999999

[State 0]
type = removeexplod
trigger1 = var(12) = 0
trigger2 = var(19) = 1
id = 3035
ignorehitpause = 1
pausemovetime = 9999999
supermovetime = 9999999
[State 0]
type = removeexplod
trigger1 = var(9) != 0 && numexplod(3003) = 0
id = 3001
ignorehitpause = 1
pausemovetime = 9999999
supermovetime = 9999999

;================================================================================
; ------- KOF Cornerpush System--------
;================================================================================
[State -2, Superpause Check]
type = VarAdd
trigger1 = Var(3)
var(3) = -1

[State -2, Reset Time]
type = VarSet
trigger1 = movecontact = 1
var(4) = 0

[State -2, Accel]
type = VarSet
triggerall = roundstate >= 2
triggerall = Var(3) <= 0
triggerall = numtarget >= 1
trigger1 = target, hitshakeover
fvar(2) = (target, gethitvar(xvel)*exp((-0.1886)*((var(4)))))

[State -2, Push]
type = PosAdd
triggerall = !var(3)
triggerall = numtarget >= 1
triggerall = (target, BackEdgeBodyDist <= 0) || (target, FrontEdgeBodyDist <= 0)
triggerall = ProjContact = 0, < 50 
trigger1 = roundstate >= 2
x = ifelse(facing = -1,fvar(2),-fvar(2))

[State -2, Increase]
type = VarSet
triggerall = numtarget >= 1
triggerall = target, hitshakeover
trigger1 = Var(3) <= 0
trigger1 = var(4)
var(4) = var(4)+1

[State -2, Time]
type = VarSet
trigger1 = !var(4)
trigger1 = fvar(2)
var(4) = 1

[State -2, Freeze Pos During Superpause]
type = PosFreeze
trigger1 = Var(3)
value = 1

[State -2, Drop]
type = VarSet
triggerall = fvar(2)
trigger1 = !numtarget
trigger2 = movecontact = 1
trigger3 = stateno = 1002
trigger4 = stateno = 1102
trigger5 = stateno = 1202
trigger6 = stateno = 1402
trigger7 = stateno = 1502
trigger8 = stateno = 1600
fvar(2) = 0
ignorehitpause = 1

;================JUST GUARD=============
[State 0];JUST GUARD
type = varadd
;triggerall = stateno != [140,159]
trigger1 = command = "holdback" || stateno = [150,159]
var(5) = 1
[State 0]
type = varset
triggerall = stateno != [140,159]
trigger1 = command != "holdback"
var(5) = 0
[State 0]
type = varset
trigger1 = stateno != [140,159]
var(6) = 0

;================================================================================
; ------- Cheap K.O. system By Warusaki3 --------
;===============================================================================
[State 1100, ChangeState]
type = ChangeState
triggerall = !alive
triggerall = pos y>-2
triggerall = statetype!=L
triggerall = prevstateno!=[5950,5951]
trigger1 = stateno=[5000,5001]
trigger2 = stateno=[5010,5011]
value = 5950

[State 0]
type = posset
trigger1 = anim = 5950
y = 0

[State -2,KO]
type = Varset
triggerall = StateNo = [120,159]
trigger1 = StateType = S
ignorehitpause = 1
var(11) = 0

[State -2,KO]
type = Varset
triggerall = StateNo = [120,159]
trigger1 = StateType = C
ignorehitpause = 1
var(11) = 1

[State -2,KO]
type = Varset
triggerall = StateNo = [120,159]
trigger1 = StateType = A
ignorehitpause = 1
var(11) = 2

;=================DAMPENER TECH TIME

[State 0,1]
type = varset
trigger1 = fvar(11) > 0.37
var(30) = 0
ignorehitpause = 1
[State 0,1]
type = varset
trigger1 = fvar(11) <= 0.37 && fvar(11) >= 0.32
var(30) = -2
ignorehitpause = 1
[State 0,1]
type = varset
trigger1 = fvar(11) < 0.32 && fvar(11) >= 0.27
var(30) = -3
ignorehitpause = 1
[State 0,2]
type = varset
trigger1 = fvar(11) < 0.27 && fvar(11) >= 0.22
var(30) = -4
ignorehitpause = 1
[State 0,3]
type = varset
trigger1 = fvar(11) < 0.22 && fvar(11) >= 0.18
var(30) = -5
ignorehitpause = 1
[State 0,4]
type = varset
trigger1 = fvar(11) < 0.18 && fvar(11) >= 0.14
var(30) = -6
ignorehitpause = 1
[State 0,5]
type = varset
trigger1 = fvar(11) < 0.14 && fvar(11) >= 0.10
var(30) = -8
ignorehitpause = 1
[State 0,6]
type = varset
trigger1 = fvar(11) < 0.10 && fvar(11) >= 0.07
var(30) = -10
ignorehitpause = 1
[State 0,7]
type = varset
trigger1 = fvar(11) < 0.07 && fvar(11) >= 0.04
var(30) = -13
ignorehitpause = 1
[State 0,8]
type = varset
trigger1 = fvar(11) < 0.04 && fvar(11) >= 0.02
var(30) = -17
ignorehitpause = 1
[State 0,9]
type = varset
trigger1 = fvar(11) < 0.02
var(30) = -999
ignorehitpause = 1

;================================================================================
; ------- THE DAMAGE DAMPENER --------
;================================================================================

[State -2]
type = varset
trigger1 = 1
fvar(13) = 1

[STate 0]
type = varadd
triggerall = enemynear,hitshakeover
trigger1 = var(17) = 1
var(14) = 1
ignorehitpause = 1
[STate 0]
type = varset
trigger1 = var(17) = 0
trigger2 = enemynear,hitshakeover = 0
var(14) = 0
ignorehitpause = 1 

[State 0]; Reset Base Damage
type = varset
trigger1 = var(17) = 0
fvar(9) = 0
[State 0]; Reset P1 Proration
type = varset
trigger1 = var(17) = 0
fvar(10) = 0
[State 0]; Reset P2 Proration
type = varset
trigger1 = var(17) = 0
fvar(11) = 1
[State 0]; Reset Repeat Proration
type = varset
trigger1 = var(17) = 0
fvar(14) = 1

[State 0]; PING!! Set P2 Proration down
type = varset
trigger1 = stateno = 200
trigger1 = animelemtime(2) = 0
trigger2 = stateno = 210
trigger2 = animelemtime(4) = 0
trigger3 = stateno = 220
trigger3 = animelemtime(5) = 0 || animelemtime(6) = 0
trigger4 = stateno = 221 && anim = 222
trigger4 = animelemtime(2) = 0
trigger5 = stateno = 400
trigger5 = animelemtime(3) = 0
trigger6 = stateno = 410
trigger6 = animelemtime(2) = 0
trigger7 = stateno = 420
trigger7 = animelemtime(3) = 0
trigger8 = stateno = 600
trigger8 = animelemtime(2) = 0
trigger9 = stateno = 610
trigger9 = animelemtime(2) = 0
trigger10 = stateno = 620
trigger10 = animelemtime(3) = 0
trigger11 = stateno = 701
trigger11 = animelemtime(13) = 0
trigger12 = stateno = 800
trigger12 = animelemtime(5) = 0
trigger13 = stateno = 801
trigger13 = animelemtime(4) = 0
trigger14 = stateno = 802
trigger14 = animelemtime(6) = 0
trigger15 = stateno = 810
trigger15 = animelemtime(3) = 0
trigger16 = stateno = 820
trigger16 = animelemtime(3) = 0 || animelemtime(4) = 0
trigger17 = stateno = 830 && anim = 831
trigger17 = animelemtime(2) = 0
trigger18 = stateno = 850
trigger18 = animelemtime(3) = 0
trigger19 = stateno = 860
trigger19 = animelemtime(5) = 0
trigger20 = stateno = 901
trigger20 = animelemtime(3) = 0
trigger21 = stateno = 902
trigger21 = animelemtime(6) = 0
trigger22 = stateno = 903
trigger22 = animelemtime(6) = 0
trigger23 = stateno = 904
trigger23 = animelemtime(5) = 0
trigger24 = stateno = 1200
trigger24 = animelemtime(3) = 0 || animelemtime(6) = 0
trigger25 = stateno = 1201
trigger25 = animelemtime(5) = 0 || animelemtime(9) = 0
trigger26 = stateno = 1210
trigger26 = animelemtime(2) = 0
trigger27 = stateno = 1211
trigger27 = animelemtime(3) = 0
trigger28 = stateno = 1212
trigger28 = animelemtime(2) = 0
trigger29 = stateno = 1202
trigger29 = animelemtime(5) = 0
trigger30 = stateno = 1203
trigger30 = animelemtime(4) = 0 || animelemtime(6) = 0 || animelemtime(10) = 0 || animelemtime(6) = 0 || animelemtime(12) = 0 || animelemtime(16) = 0 || animelemtime(18) = 0 || animelemtime(24) = 0
trigger31 = stateno = 1300
trigger31 = animelemtime(4) = 0 || animelemtime(5) = 0
trigger32 = stateno = 1301
trigger32 = animelemtime(2) = 0 || animelemtime(3) = 0 || animelemtime(4) = 0 || animelemtime(5) = 0 || animelemtime(6) = 0 || animelemtime(15) = 0
trigger33 = stateno = 1302
trigger33 = animelemtime(2) = 0 || animelemtime(3) = 0 || animelemtime(4) = 0 || animelemtime(5) = 0 || animelemtime(6) = 0 || animelemtime(15) = 0 || animelemtime(16) = 0 || animelemtime(17) = 0 || animelemtime(25) = 0 || animelemtime(26) = 0 || animelemtime(27) = 0
trigger34 = stateno = 1600
trigger34 = animelemtime(23) = 0 || animelemtime(31) = 0 || animelemtime(39) = 0 || animelemtime(47) = 0 || animelemtime(53) = 0
trigger35 = stateno = 1401
trigger35 = animelemtime(2) = 0 || animelemtime(3) = 0
trigger36 = stateno = 1402
trigger36 = animelemtime(11) = 0 || animelemtime(12) = 0
trigger37 = stateno = 1405
trigger37 = animelemtime(2) = 0 || animelemtime(3) = 0 || animelemtime(4) = 0 || animelemtime(5) = 0
fvar(12) = 1

;=======5A=======
[State 0]; P1 Proration set
type = varset
triggerall = var(17) = 0
triggerall = stateno = 200
trigger1 = animelemtime(2) >= 0 && animelemtime(3) < 0
fvar(10) = 0.85
[State 0]; Damage Product
type = varset
triggerall = stateno = 200
trigger1 = animelemtime(2) >= 0 && animelemtime(3) < 0
fvar(9) = ifelse(var(17) != 0 && numtarget(3000)=0,18*1*fvar(10)*fvar(11)*fvar(13),18) 
[State 0]; P2 Proration set
type = varset
triggerall = fvar(12) = 1
triggerall = stateno = 200
trigger1 = animelemtime(2) >= 0 && animelemtime(3) < 0
fvar(11) = ifelse(fvar(14)=1,0.87*fvar(11),0.87*fvar(11)*fvar(14))
;=======5B=======
[State 0]; P1 Proration set
type = varset
triggerall = var(17) = 0
triggerall = stateno = 210
trigger1 = animelemtime(4) >= 0 && animelemtime(5) < 0
fvar(10) = 0.87
[State 0]; Damage Product
type = varset
triggerall = stateno = 210
trigger1 = animelemtime(4) >= 0 && animelemtime(5) < 0
fvar(9) = ifelse(var(17) != 0 && numtarget(3000)=0,38*1*fvar(10)*fvar(11)*fvar(13),38) 
[State 0]; P2 Proration set
type = varset
triggerall = fvar(12) = 1
triggerall = stateno = 210
trigger1 = animelemtime(4) >= 0 && animelemtime(5) < 0
fvar(11) = ifelse(fvar(14)=1,0.88*fvar(11),0.88*fvar(11)*fvar(14))
;=======5C=======
[State 0]; P1 Proration set
type = varset
triggerall = var(17) = 0
triggerall = stateno = 220
trigger1 = animelemtime(5) >= 0 && animelemtime(7) < 0
fvar(10) = 0.89
[State 0]; Damage Product
type = varset
triggerall = stateno = 220
trigger1 = animelemtime(5) >= 0 && animelemtime(7) < 0
fvar(9) = ifelse(var(17) != 0 && numtarget(3000)=0,35*1*fvar(10)*fvar(11)*fvar(13),35) 
[State 0]; P2 Proration set
type = varset
triggerall = fvar(12) = 1
triggerall = stateno = 220
trigger1 = animelemtime(5) >= 0 && animelemtime(7) < 0
fvar(11) = ifelse(fvar(14)=1,0.88*fvar(11),0.88*fvar(11)*fvar(14))
;=======5CC UNCHARGED=======
[State 0]; P1 Proration set
type = varset
triggerall = var(17) = 0
triggerall = stateno = 221 && anim = 222 && var(16) != 1
trigger1 = animelemtime(2) >= 0 && animelemtime(3) < 0
fvar(10) = 0.88
[State 0]; Damage Product
type = varset
triggerall = stateno = 221 && anim = 222 && var(16) != 1
trigger1 = animelemtime(2) >= 0 && animelemtime(3) < 0
fvar(9) = ifelse(var(17) != 0 && numtarget(3000)=0,28*1*fvar(10)*fvar(11)*fvar(13),28) 
[State 0]; P2 Proration set
type = varset
triggerall = fvar(12) = 1
triggerall = stateno = 221 && anim = 222 && var(16) != 1
trigger1 = animelemtime(2) >= 0 && animelemtime(3) < 0
fvar(11) = ifelse(fvar(14)=1,0.85*fvar(11),0.85*fvar(11)*fvar(14))
;=======5CC CHARGED=======
[State 0]; P1 Proration set
type = varset
triggerall = var(17) = 0
triggerall = stateno = 221 && anim = 222 && var(16) = 1
trigger1 = animelemtime(2) >= 0 && animelemtime(3) < 0
fvar(10) = 0.95
[State 0]; Damage Product
type = varset
triggerall = stateno = 221 && anim = 222 && var(16) = 1
trigger1 = animelemtime(2) >= 0 && animelemtime(3) < 0
fvar(9) = ifelse(var(17) != 0 && numtarget(3000)=0,80*1*fvar(10)*fvar(11)*fvar(13),80) 
[State 0]; P2 Proration set
type = varset
triggerall = fvar(12) = 1
triggerall = stateno = 221 && anim = 222 && var(16) = 1
trigger1 = animelemtime(2) >= 0 && animelemtime(3) < 0
fvar(11) = ifelse(fvar(14)=1,0.88*fvar(11),0.88*fvar(11)*fvar(14))
;=======2A=======
[State 0]; P1 Proration set
type = varset
triggerall = var(17) = 0
triggerall = stateno = 400
trigger1 = animelemtime(3) >= 0 && animelemtime(4) < 0
fvar(10) = 0.8
[State 0]; Damage Product
type = varset
triggerall = stateno = 400
trigger1 = animelemtime(3) >= 0 && animelemtime(4) < 0
fvar(9) = ifelse(var(17) != 0 && numtarget(3000)=0,14*1*fvar(10)*fvar(11)*fvar(13),14) 
[State 0]; P2 Proration set
type = varset
triggerall = fvar(12) = 1
triggerall = stateno = 400
trigger1 = animelemtime(3) >= 0 && animelemtime(4) < 0
fvar(11) = ifelse(fvar(14)=1,0.75*fvar(11),0.75*fvar(11)*fvar(14))
;=======2B=======
[State 0]; P1 Proration set
type = varset
triggerall = var(17) = 0
triggerall = stateno = 410
trigger1 = animelemtime(2) >= 0 && animelemtime(3) < 0
fvar(10) = 0.84
[State 0]; Damage Product
type = varset
triggerall = stateno = 410
trigger1 = animelemtime(2) >= 0 && animelemtime(3) < 0
fvar(9) = ifelse(var(17) != 0 && numtarget(3000)=0,39*1*fvar(10)*fvar(11)*fvar(13),39) 
[State 0]; P2 Proration set
type = varset
triggerall = fvar(12) = 1
triggerall = stateno = 410
trigger1 = animelemtime(2) >= 0 && animelemtime(3) < 0
fvar(11) = ifelse(fvar(14)=1,0.87*fvar(11),0.87*fvar(11)*fvar(14))
;=======2C=======
[State 0]; P1 Proration set
type = varset
triggerall = var(17) = 0
triggerall = stateno = 420
trigger1 = animelemtime(3) >= 0 && animelemtime(4) < 0
fvar(10) = 0.9
[State 0]; Damage Product
type = varset
triggerall = stateno = 420
trigger1 = animelemtime(3) >= 0 && animelemtime(4) < 0
fvar(9) = ifelse(var(17) != 0 && numtarget(3000)=0,60*1*fvar(10)*fvar(11)*fvar(13),60) 
[State 0]; P2 Proration set
type = varset
triggerall = fvar(12) = 1
triggerall = stateno = 420
trigger1 = animelemtime(3) >= 0 && animelemtime(4) < 0
fvar(11) = ifelse(fvar(14)=1,0.85*fvar(11),0.85*fvar(11)*fvar(14))
;=======j.A=======
[State 0]; P1 Proration set
type = varset
triggerall = var(17) = 0
triggerall = stateno = 600
trigger1 = animelemtime(2) >= 0 && animelemtime(3) < 0
fvar(10) = 0.83
[State 0]; Damage Product
type = varset
triggerall = stateno = 600
trigger1 = animelemtime(2) >= 0 && animelemtime(3) < 0
fvar(9) = ifelse(var(17) != 0 && numtarget(3000)=0,13*1*fvar(10)*fvar(11)*fvar(13),13) 
[State 0]; P2 Proration set
type = varset
triggerall = fvar(12) = 1
triggerall = stateno = 600
trigger1 = animelemtime(2) >= 0 && animelemtime(3) < 0
fvar(11) = ifelse(fvar(14)=1,0.85*fvar(11),0.85*fvar(11)*fvar(14))
;=======j.B=======
[State 0]; P1 Proration set
type = varset
triggerall = var(17) = 0
triggerall = stateno = 610
trigger1 = animelemtime(2) >= 0 && animelemtime(3) < 0
fvar(10) = 0.85
[State 0]; Damage Product
type = varset
triggerall = stateno = 610
trigger1 = animelemtime(2) >= 0 && animelemtime(3) < 0
fvar(9) = ifelse(var(17) != 0 && numtarget(3000)=0,38*1*fvar(10)*fvar(11)*fvar(13),38) 
[State 0]; P2 Proration set
type = varset
triggerall = fvar(12) = 1
triggerall = stateno = 610
trigger1 = animelemtime(2) >= 0 && animelemtime(3) < 0
fvar(11) = ifelse(fvar(14)=1,0.87*fvar(11),0.87*fvar(11)*fvar(14))
;=======j.C=======
[State 0]; P1 Proration set
type = varset
triggerall = var(17) = 0
triggerall = stateno = 620
trigger1 = animelemtime(3) >= 0 && animelemtime(4) < 0
fvar(10) = 0.9
[State 0]; Damage Product
type = varset
triggerall = stateno = 620
trigger1 = animelemtime(3) >= 0 && animelemtime(4) < 0
fvar(9) = ifelse(var(17) != 0 && numtarget(3000)=0,56*1*fvar(10)*fvar(11)*fvar(13),56) 
[State 0]; P2 Proration set
type = varset
triggerall = fvar(12) = 1
triggerall = stateno = 620
trigger1 = animelemtime(3) >= 0 && animelemtime(4) < 0
fvar(11) = ifelse(fvar(14)=1,0.89*fvar(11),0.89*fvar(11)*fvar(14))

;=======THROW FWD=======
[State 0]; P1 Proration set
type = varset
triggerall = fvar(10) = 0
triggerall = stateno = 701
trigger1 = animelemtime(13) >= 0 && animelemtime(14) < 0
fvar(10) = 1
[State 0]; Damage Product
type = varset
triggerall = stateno = 701
trigger1 = animelemtime(13) >= 0 && animelemtime(14) < 0
fvar(9) = ifelse(var(17) != 0 && numtarget(3000)=0,152*1*fvar(10)*fvar(11)*fvar(13),152) 
[State 0]; P2 Proration set
type = varset
triggerall = fvar(12) = 1
triggerall = stateno = 701
trigger1 = animelemtime(13) >= 0 && animelemtime(14) < 0
fvar(11) = ifelse(fvar(14)=1,0.90*fvar(11),0.90*fvar(11)*fvar(14))
;=======THROW BACK=======
[State 0]; P1 Proration set
type = varset
triggerall = fvar(10) = 0
triggerall = stateno = 702
trigger1 = animelemtime(8) >= 0 && animelemtime(9) < 0
fvar(10) = 1
[State 0]; Damage Product
type = varset
triggerall = stateno = 702
trigger1 = animelemtime(8) >= 0 && animelemtime(9) < 0
fvar(9) = ifelse(var(17) != 0 && numtarget(3000)=0,130*1*fvar(10)*fvar(11)*fvar(13),130) 
[State 0]; P2 Proration set
type = varset
triggerall = fvar(12) = 1
triggerall = stateno = 702
trigger1 = animelemtime(8) >= 0 && animelemtime(9) < 0
fvar(11) = ifelse(fvar(14)=1,0.90*fvar(11),0.90*fvar(11)*fvar(14))

;=======6C=======
[State 0]; P1 Proration set
type = varset
triggerall = var(17) = 0
triggerall = stateno = 800
trigger1 = animelemtime(5) >= 0 && animelemtime(6) < 0
fvar(10) = 0.85
[State 0]; Damage Product
type = varset
triggerall = stateno = 800
trigger1 = animelemtime(5) >= 0 && animelemtime(6) < 0
fvar(9) = ifelse(var(17) != 0 && numtarget(3000)=0,50*1*fvar(10)*fvar(11)*fvar(13),50)
[State 0]; P2 Proration set
type = varset
triggerall = fvar(12) = 1
triggerall = stateno = 800
trigger1 = animelemtime(5) >= 0 && animelemtime(6) < 0
fvar(11) = ifelse(fvar(14)=1,0.9*fvar(11),0.9*fvar(11)*fvar(14))
;=======6CC=======
[State 0]; P1 Proration set
type = varset
triggerall = var(17) = 0
triggerall = stateno = 801
trigger1 = animelemtime(4) >= 0 && animelemtime(5) < 0
fvar(10) = 0.85
[State 0]; Damage Product
type = varset
triggerall = stateno = 801
trigger1 = animelemtime(4) >= 0 && animelemtime(5) < 0
fvar(9) = ifelse(var(17) != 0 && numtarget(3000)=0,40*1*fvar(10)*fvar(11)*fvar(13),40)
[State 0]; P2 Proration set
type = varset
triggerall = fvar(12) = 1
triggerall = stateno = 801
trigger1 = animelemtime(4) >= 0 && animelemtime(5) < 0
fvar(11) = ifelse(fvar(14)=1,0.9*fvar(11),0.9*fvar(11)*fvar(14))
;=======6CCC=======
[State 0]; P1 Proration set
type = varset
triggerall = var(17) = 0
triggerall = stateno = 802
trigger1 = animelemtime(6) >= 0 && animelemtime(7) < 0
fvar(10) = 0.85
[State 0]; Damage Product
type = varset
triggerall = stateno = 802
trigger1 = animelemtime(6) >= 0 && animelemtime(7) < 0
fvar(9) = ifelse(var(17) != 0 && numtarget(3000)=0,48*1*fvar(10)*fvar(11)*fvar(13),48)
[State 0]; P2 Proration set
type = varset
triggerall = fvar(12) = 1
triggerall = stateno = 802
trigger1 = animelemtime(6) >= 0 && animelemtime(7) < 0
fvar(11) = ifelse(fvar(14)=1,0.9*fvar(11),0.9*fvar(11)*fvar(14))
;=======6B=======
[State 0]; P1 Proration set
type = varset
triggerall = var(17) = 0
triggerall = stateno = 810
trigger1 = animelemtime(3) >= 0 && animelemtime(4) < 0
fvar(10) = 0.81
[State 0]; Damage Product
type = varset
triggerall = stateno = 810
trigger1 = animelemtime(3) >= 0 && animelemtime(4) < 0
fvar(9) = ifelse(var(17) != 0 && numtarget(3000)=0,42*1*fvar(10)*fvar(11)*fvar(13),42) 
[State 0]; P2 Proration set
type = varset
triggerall = fvar(12) = 1
triggerall = stateno = 810
trigger1 = animelemtime(3) >= 0 && animelemtime(4) < 0
fvar(11) = ifelse(fvar(14)=1,0.85*fvar(11),0.85*fvar(11)*fvar(14))
;=======j.2B=======
[State 0]; P1 Proration set
type = varset
triggerall = var(17) = 0
triggerall = stateno = 820
trigger1 = animelemtime(3) >= 0
fvar(10) = 0.8
[State 0]; Damage Product
type = varset
triggerall = stateno = 820
trigger1 = animelemtime(3) >= 0
fvar(9) = ifelse(var(17) != 0 && numtarget(3000)=0,31*1*fvar(10)*fvar(11)*fvar(13),31) 
[State 0]; P2 Proration set
type = varset
triggerall = fvar(12) = 1
triggerall = stateno = 820
trigger1 = animelemtime(3) >= 0
fvar(11) = ifelse(fvar(14)=1,0.85*fvar(11),0.85*fvar(11)*fvar(14))
;=======j.6B UNCHARGED=======
[State 0]; P1 Proration set
type = varset
triggerall = var(17) = 0
triggerall = stateno = 830 && anim = 831 && var(16) != 1
trigger1 = animelemtime(2) >= 0 && animelemtime(3) < 0
fvar(10) = 0.8
[State 0]; Damage Product
type = varset
triggerall = stateno = 830 && anim = 831 && var(16) != 1
trigger1 = animelemtime(2) >= 0 && animelemtime(3) < 0
fvar(9) = ifelse(var(17) != 0 && numtarget(3000)=0,37*1*fvar(10)*fvar(11)*fvar(13),37) 
[State 0]; P2 Proration set
type = varset
triggerall = fvar(12) = 1
triggerall = stateno = 830 && anim = 831 && var(16) != 1
trigger1 = animelemtime(2) >= 0 && animelemtime(3) < 0
fvar(11) = ifelse(fvar(14)=1,0.85*fvar(11),0.85*fvar(11)*fvar(14))
;=======j.6B CHARGED=======
[State 0]; P1 Proration set
type = varset
triggerall = var(17) = 0
triggerall = stateno = 830 && anim = 831 && var(16) = 1
trigger1 = animelemtime(2) >= 0 && animelemtime(3) < 0
fvar(10) = 0.85
[State 0]; Damage Product
type = varset
triggerall = stateno = 830 && anim = 831 && var(16) = 1
trigger1 = animelemtime(2) >= 0 && animelemtime(3) < 0
fvar(9) = ifelse(var(17) != 0 && numtarget(3000)=0,42*1*fvar(10)*fvar(11)*fvar(13),42) 
[State 0]; P2 Proration set
type = varset
triggerall = fvar(12) = 1
triggerall = stateno = 830 && anim = 831 && var(16) = 1
trigger1 = animelemtime(2) >= 0 && animelemtime(3) < 0
fvar(11) = ifelse(fvar(14)=1,0.89*fvar(11),0.89*fvar(11)*fvar(14))
;=======66B=======
[State 0]; P1 Proration set
type = varset
triggerall = var(17) = 0
triggerall = stateno = 850
trigger1 = animelemtime(3) >= 0 && animelemtime(4) < 0
fvar(10) = 0.82
[State 0]; Damage Product
type = varset
triggerall = stateno = 850
trigger1 = animelemtime(3) >= 0 && animelemtime(4) < 0
fvar(9) = ifelse(var(17) != 0 && numtarget(3000)=0,74*1*fvar(10)*fvar(11)*fvar(13),74) 
[State 0]; P2 Proration set
type = varset
triggerall = fvar(12) = 1
triggerall = stateno = 850
trigger1 = animelemtime(3) >= 0 && animelemtime(4) < 0
fvar(11) = ifelse(fvar(14)=1,0.86*fvar(11),0.86*fvar(11)*fvar(14))
;=======66C=======
[State 0]; P1 Proration set
type = varset
triggerall = var(17) = 0
triggerall = stateno = 860
trigger1 = animelemtime(5) >= 0 && animelemtime(7) < 0
fvar(10) = 0.85
[State 0]; Damage Product
type = varset
triggerall = stateno = 860
trigger1 = animelemtime(5) >= 0 && animelemtime(7) < 0
fvar(9) = ifelse(var(17) != 0 && numtarget(3000)=0,89*1*fvar(10)*fvar(11)*fvar(13),89) 
[State 0]; P2 Proration set
type = varset
triggerall = fvar(12) = 1
triggerall = stateno = 860
trigger1 = animelemtime(5) >= 0 && animelemtime(7) < 0
fvar(11) = ifelse(fvar(14)=1,0.88*fvar(11),0.88*fvar(11)*fvar(14))
;=======FORCE FUNCTION PT.1=======
[State 0]; P1 Proration set
type = varset
triggerall = var(17) = 0
triggerall = stateno = 901
trigger1 = animelemtime(3) >= 0 && animelemtime(4) < 0
fvar(10) = 0.85
[State 0]; Damage Product
type = varset
triggerall = stateno = 901
trigger1 = animelemtime(3) >= 0 && animelemtime(4) < 0
fvar(9) = ifelse(var(17) != 0 && numtarget(3000)=0,60*1*fvar(10)*fvar(11)*fvar(13),60) 
[State 0]; P2 Proration set
type = varset
triggerall = fvar(12) = 1
triggerall = stateno = 901
trigger1 = animelemtime(3) >= 0 && animelemtime(4) < 0
fvar(11) = ifelse(fvar(14)=1,0.98*fvar(11),0.98*fvar(11)*fvar(14))
;=======FORCE FUNCTION PT.2=======
[State 0]; P1 Proration set
type = varset
triggerall = var(17) = 0
triggerall = stateno = 902
trigger1 = animelemtime(6) >= 0 && animelemtime(7) < 0
fvar(10) = 0.85
[State 0]; Damage Product
type = varset
triggerall = stateno = 902
trigger1 = animelemtime(6) >= 0 && animelemtime(7) < 0
fvar(9) = ifelse(var(17) != 0 && numtarget(3000)=0,40*1*fvar(10)*fvar(11)*fvar(13),40) 
[State 0]; P2 Proration set
type = varset
triggerall = fvar(12) = 1
triggerall = stateno = 902
trigger1 = animelemtime(6) >= 0 && animelemtime(7) < 0
fvar(11) = ifelse(fvar(14)=1,0.96*fvar(11),0.96*fvar(11)*fvar(14))
;=======FORCE FUNCTION PT.3=======
[State 0]; P1 Proration set
type = varset
triggerall = var(17) = 0
triggerall = stateno = 903
trigger1 = animelemtime(6) >= 0 && animelemtime(7) < 0
fvar(10) = 0.85
[State 0]; Damage Product
type = varset
triggerall = stateno = 903
trigger1 = animelemtime(6) >= 0 && animelemtime(7) < 0
fvar(9) = ifelse(var(17) != 0 && numtarget(3000)=0,40*1*fvar(10)*fvar(11)*fvar(13),40) 
[State 0]; P2 Proration set
type = varset
triggerall = fvar(12) = 1
triggerall = stateno = 903
trigger1 = animelemtime(6) >= 0 && animelemtime(7) < 0
fvar(11) = ifelse(fvar(14)=1,0.96*fvar(11),0.96*fvar(11)*fvar(14))
;=======FORCE FUNCTION PT.4=======
[State 0]; P1 Proration set
type = varset
triggerall = var(17) = 0
triggerall = stateno = 904
trigger1 = animelemtime(5) >= 0 && animelemtime(6) < 0
fvar(10) = 0.85
[State 0]; Damage Product
type = varset
triggerall = stateno = 904
trigger1 = animelemtime(5) >= 0 && animelemtime(6) < 0
fvar(9) = ifelse(var(17) != 0 && numtarget(3000)=0,50*1*fvar(10)*fvar(11)*fvar(13),50) 
[State 0]; P2 Proration set
type = varset
triggerall = fvar(12) = 1
triggerall = stateno = 904
trigger1 = animelemtime(5) >= 0 && animelemtime(6) < 0
fvar(11) = ifelse(fvar(14)=1,0.96*fvar(11),0.96*fvar(11)*fvar(14))

;=======MUJIN A=======
[State 0]; P1 Proration set
type = varset
triggerall = var(17) = 0
triggerall = stateno = 1200
trigger1 = animelemtime(3) >= 0 && animelemtime(4) < 0
trigger2 = animelemtime(6) >= 0 && animelemtime(7) < 0
fvar(10) = 0.85
[State 0]; Damage Product
type = varset
triggerall = stateno = 1200
trigger1 = animelemtime(3) >= 0 && animelemtime(4) < 0
trigger2 = animelemtime(6) >= 0 && animelemtime(7) < 0
fvar(9) = ifelse(var(17) != 0 && numtarget(3000)=0,50*1*fvar(10)*fvar(11)*fvar(13),50) 
[State 0]; P2 Proration set
type = varset
triggerall = fvar(12) = 1
triggerall = stateno = 1200
trigger1 = animelemtime(3) >= 0 && animelemtime(4) < 0
trigger2 = animelemtime(6) >= 0 && animelemtime(7) < 0
fvar(11) = ifelse(fvar(14)=1,0.8*fvar(11),0.8*fvar(11)*fvar(14))
;=======MUJIN B=======
[State 0]; P1 Proration set
type = varset
triggerall = var(17) = 0
triggerall = stateno = 1201
trigger1 = animelemtime(5) >= 0 && animelemtime(6) < 0
trigger2 = animelemtime(9) >= 0 && animelemtime(10) < 0
fvar(10) = 0.85
[State 0]; Damage Product
type = varset
triggerall = stateno = 1201
trigger1 = animelemtime(5) >= 0 && animelemtime(6) < 0
trigger2 = animelemtime(9) >= 0 && animelemtime(10) < 0
fvar(9) = ifelse(var(17) != 0 && numtarget(3000)=0,50*1*fvar(10)*fvar(11)*fvar(13),50) 
[State 0]; P2 Proration set
type = varset
triggerall = fvar(12) = 1
triggerall = stateno = 1201
trigger1 = animelemtime(5) >= 0 && animelemtime(6) < 0
trigger2 = animelemtime(9) >= 0 && animelemtime(10) < 0
fvar(11) = ifelse(fvar(14)=1,0.8*fvar(11),0.8*fvar(11)*fvar(14))

;=======MUJIN 1=======
[State 0]; P1 Proration set
type = varset
triggerall = var(17) = 0
triggerall = stateno = 1210
trigger1 = animelemtime(2) >= 0 && animelemtime(3) < 0
fvar(10) = 0.92
[State 0]; Damage Product
type = varset
triggerall = stateno = 1210
trigger1 = animelemtime(2) >= 0 && animelemtime(3) < 0
fvar(9) = ifelse(var(17) != 0 && numtarget(3000)=0,35*1*fvar(10)*fvar(11)*fvar(13),35)
[State 0]; P2 Proration set
type = varset
triggerall = fvar(12) = 1
triggerall = stateno = 1210
trigger1 = animelemtime(2) >= 0 && animelemtime(3) < 0
fvar(11) = ifelse(fvar(14)=1,0.92*fvar(11),0.92*fvar(11)*fvar(14))
;=======MUJIN 2=======
[State 0]; P1 Proration set
type = varset
triggerall = var(17) = 0
triggerall = stateno = 1211
trigger1 = animelemtime(3) >= 0 && animelemtime(4) < 0
fvar(10) = 0.92
[State 0]; Damage Product
type = varset
triggerall = stateno = 1211
trigger1 = animelemtime(3) >= 0 && animelemtime(4) < 0
fvar(9) = ifelse(var(17) != 0 && numtarget(3000)=0,35*1*fvar(10)*fvar(11)*fvar(13),35)
[State 0]; P2 Proration set
type = varset
triggerall = fvar(12) = 1
triggerall = stateno = 1211
trigger1 = animelemtime(3) >= 0 && animelemtime(4) < 0
fvar(11) = ifelse(fvar(14)=1,0.92*fvar(11),0.92*fvar(11)*fvar(14))
;=======MUJIN 3=======
[State 0]; P1 Proration set
type = varset
triggerall = var(17) = 0
triggerall = stateno = 1212
trigger1 = animelemtime(2) >= 0 && animelemtime(3) < 0
fvar(10) = 0.8
[State 0]; Damage Product
type = varset
triggerall = stateno = 1212
trigger1 = animelemtime(2) >= 0 && animelemtime(3) < 0
fvar(9) = ifelse(var(17) != 0 && numtarget(3000)=0,66*1*fvar(10)*fvar(11)*fvar(13),66) 
[State 0]; P2 Proration set
type = varset
triggerall = fvar(12) = 1
triggerall = stateno = 1212
trigger1 = animelemtime(2) >= 0 && animelemtime(3) < 0
fvar(11) = ifelse(fvar(14)=1,0.82*fvar(11),0.82*fvar(11)*fvar(14))

;=======MUJIN EX=======
[State 0]; P1 Proration set
type = varset
triggerall = var(17) = 0
triggerall = stateno = 1202
trigger1 = animelemtime(5) >= 0 && animelemtime(6) < 0
fvar(10) = 0.85
[State 0]; Damage Product
type = varset
triggerall = stateno = 1202
trigger1 = animelemtime(5) >= 0 && animelemtime(6) < 0
fvar(9) = ifelse(var(17) != 0 && numtarget(3000)=0,50*1*fvar(10)*fvar(11)*fvar(13),50) 
[State 0]; P2 Proration set
type = varset
triggerall = fvar(12) = 1
triggerall = stateno = 1202
trigger1 = animelemtime(5) >= 0 && animelemtime(6) < 0
fvar(11) = ifelse(fvar(14)=1,0.95*fvar(11),0.95*fvar(11)*fvar(14))
;=======MUJIN EX ENGAGE=======
[State 0]; P1 Proration set
type = varset
triggerall = var(17) = 0
triggerall = stateno = 1203
trigger1 = animelemtime(4) >= 0
fvar(10) = 0.85
[State 0]; Damage Product
type = varset
triggerall = stateno = 1203
trigger1 = animelemtime(4) >= 0
fvar(9) = ifelse(var(17) != 0 && numtarget(3000)=0,34*1*fvar(10)*fvar(11)*fvar(13),34) 
[State 0]; P2 Proration set
type = varset
triggerall = fvar(12) = 1
triggerall = stateno = 1203
trigger1 = animelemtime(4) >= 0
fvar(11) = ifelse(fvar(14)=1,0.95*fvar(11),0.95*fvar(11)*fvar(14))

;=======GETSURIN A=======
[State 0]; P1 Proration set
type = varset
triggerall = var(17) = 0
triggerall = stateno = 1300
trigger1 = animelemtime(4) >= 0 && animelemtime(5) < 0
trigger2 = animelemtime(5) >= 0 && animelemtime(6) < 0
fvar(10) = 0.85
[State 0]; Damage Product
type = varset
triggerall = stateno = 1300
trigger1 = animelemtime(4) >= 0 && animelemtime(5) < 0
trigger2 = animelemtime(5) >= 0 && animelemtime(6) < 0
fvar(9) = ifelse(var(17) != 0 && numtarget(3000)=0,48*1*fvar(10)*fvar(11)*fvar(13),48) 
[State 0]; P2 Proration set
type = varset
triggerall = fvar(12) = 1
triggerall = stateno = 1300
trigger1 = animelemtime(4) >= 0 && animelemtime(5) < 0
trigger2 = animelemtime(5) >= 0 && animelemtime(6) < 0
fvar(11) = ifelse(fvar(14)=1,0.8*fvar(11),0.8*fvar(11)*fvar(14))
;=======GETSURIN B=======
[State 0]; P1 Proration set
type = varset
triggerall = var(17) = 0
triggerall = stateno = 1301
trigger1 = animelemtime(2) >= 0
fvar(10) = 0.85
[State 0]; Damage Product
type = varset
triggerall = stateno = 1301
trigger1 = animelemtime(2) >= 0
fvar(9) = ifelse(var(17) != 0 && numtarget(3000)=0,47*1*fvar(10)*fvar(11)*fvar(13),47) 
[State 0]; P2 Proration set
type = varset
triggerall = fvar(12) = 1
triggerall = stateno = 1301
trigger1 = animelemtime(2) >= 0
fvar(11) = ifelse(fvar(14)=1,0.8*fvar(11),0.8*fvar(11)*fvar(14))
;=======GETSURIN EX=======
[State 0]; P1 Proration set
type = varset
triggerall = var(17) = 0
triggerall = stateno = 1302
trigger1 = animelemtime(3) >= 0
fvar(10) = 0.85
[State 0]; Damage Product
type = varset
triggerall = stateno = 1302
trigger1 = animelemtime(3) >= 0
fvar(9) = ifelse(var(17) != 0 && numtarget(3000)=0,35*1*fvar(10)*fvar(11)*fvar(13),35) 
[State 0]; P2 Proration set
type = varset
triggerall = fvar(12) = 1
triggerall = stateno = 1302
trigger1 = animelemtime(3) >= 0
fvar(11) = ifelse(fvar(14)=1,0.93*fvar(11),0.93*fvar(11)*fvar(14))
;=======HIEN A=======
[State 0]; P1 Proration set
type = varset
triggerall = var(17) = 0
triggerall = stateno = 1401
trigger1 = animelemtime(2) >= 0
fvar(10) = 0.9
[State 0]; Damage Product
type = varset
triggerall = stateno = 1401
trigger1 = animelemtime(2) >= 0
fvar(9) = ifelse(var(17) != 0 && numtarget(3000)=0,60*1*fvar(10)*fvar(11)*fvar(13),60) 
[State 0]; P2 Proration set
type = varset
triggerall = fvar(12) = 1
triggerall = stateno = 1401
trigger1 = animelemtime(2) >= 0
fvar(11) = ifelse(fvar(14)=1,0.9*fvar(11),0.9*fvar(11)*fvar(14))
;=======HIEN B=======
[State 0]; P1 Proration set
type = varset
triggerall = var(17) = 0
triggerall = stateno = 1402
trigger1 = animelemtime(11) >= 0
fvar(10) = 0.9
[State 0]; Damage Product
type = varset
triggerall = stateno = 1402
trigger1 = animelemtime(11) >= 0
fvar(9) = ifelse(var(17) != 0 && numtarget(3000)=0,68*1*fvar(10)*fvar(11)*fvar(13),68) 
[State 0]; P2 Proration set
type = varset
triggerall = fvar(12) = 1
triggerall = stateno = 1402
trigger1 = animelemtime(11) >= 0
fvar(11) = ifelse(fvar(14)=1,0.9*fvar(11),0.9*fvar(11)*fvar(14))
;=======HIEN EX=======
[State 0]; P1 Proration set
type = varset
triggerall = var(17) = 0
triggerall = stateno = 1405
trigger1 = animelemtime(2) >= 0
fvar(10) = 0.95
[State 0]; Damage Product
type = varset
triggerall = stateno = 1405
trigger1 = animelemtime(2) >= 0
fvar(9) = ifelse(var(17) != 0 && numtarget(3000)=0,58*1*fvar(10)*fvar(11)*fvar(13),58) 
[State 0]; P2 Proration set
type = varset
triggerall = fvar(12) = 1
triggerall = stateno = 1405
trigger1 = animelemtime(2) >= 0
fvar(11) = ifelse(fvar(14)=1,0.95*fvar(11),0.95*fvar(11)*fvar(14))

;=======KANNAGI=======
[State 0]; P1 Proration set
type = varset
triggerall = var(17) = 0
triggerall = stateno = 1600
trigger1 = animelemtime(23) >= 0
fvar(10) = 0.9
[State 0]; Damage Product
type = varset
triggerall = stateno = 1600
trigger1 = animelemtime(23) >= 0
fvar(9) = ifelse(var(17) != 0 && numtarget(3000)=0,80*1*fvar(10)*fvar(11)*fvar(13),80) 
[State 0]; P2 Proration set
type = varset
triggerall = fvar(12) = 1
triggerall = stateno = 1600
trigger1 = animelemtime(23) >= 0
fvar(11) = ifelse(fvar(14)=1,0.8*fvar(11),0.8*fvar(11)*fvar(14))



;=======DANGER MODE=======
[State 0]; P1 Proration set
type = varset
triggerall = fvar(10) = 0
trigger1 = stateno = 1700
trigger1 = animelemtime(5) >= 0 && animelemtime(6) < 0
fvar(10) = 1
[State 0]; Damage Product
type = varset
trigger1 = stateno = [1700,1799]
;trigger1 = animelemtime(3) >= 0 && animelemtime(4) < 0
fvar(9) = ifelse(var(17) != 0 && numtarget(3000)=0,368*1*fvar(10)*fvar(11)*fvar(13),368)  
[State 0]; P2 Proration set
type = varset
triggerall = fvar(12) = 1
trigger1 = stateno = 1700
trigger1 = animelemtime(5) >= 0 && animelemtime(6) < 0
fvar(11) = ifelse(fvar(14)=1,1*fvar(11),5*fvar(11)*fvar(14))

;=======BURST=======
[State 0]; P1 Proration set
type = varset
triggerall = var(17) = 0
triggerall = stateno = 3000 || stateno = 3002
trigger1 = animelemtime(1) >= 0
fvar(10) = 0.5
[State 0]; Damage Product
type = varset
triggerall = stateno = 3000 || stateno = 3002
trigger1 = animelemtime(1) >= 0
fvar(9) = ifelse(var(17) != 0 && numtarget(3000)=0,0*1*fvar(10)*fvar(11)*fvar(13),0) 
[State 0]; P2 Proration set
type = varset
triggerall = fvar(12) = 1
triggerall = stateno = 3000 || stateno = 3002
trigger1 = animelemtime(1) >= 0
fvar(11) = ifelse(fvar(14)=1,0.75*fvar(11),0.75*fvar(11)*fvar(14))


[State -2, PING STOP]
type = varSet
trigger1 = fvar(12)>0
fvar(12) = fvar(12)-1



;---------------------------------------------------------------------------
; States that are executed when in self's state file (use statedef -3)
;--------------------------------------------------------------------------

[Statedef -3]

[State 0]; Custom Numtarget Retainer
type = varset
trigger1 = movehit && enemynear,movetype = H
var(17) = 1
ignorehitpause = 1
[State 0]
type = varset
trigger1 = enemynear,stateno = [5110,5119]
trigger1 = enemynear,time >= 20
trigger2 = enemynear,movetype != H
trigger2 = !movehit
trigger3 = enemynear,movetype = A || enemynear,movetype = I
var(17) = 0

[State -3, BURST]
type = changestate
triggerall = stateno != [3000,3009]
triggerall = roundstate >= 2
triggerall = fvar(0) >= 50
triggerall = var(9) = 0
triggerall = alive
trigger1 = movetype = H
trigger1 = command = "chainshift"
trigger2 = stateno = 150
trigger2 = command = "chainshift"
trigger3 = stateno = 152
trigger3 = command = "chainshift"
trigger4 = stateno = 154
trigger4 = command = "chainshift"
value = 3002
ignorehitpause = 1

;----------------------GAUGE FXs
[State 0, Explod]
type = Explod
triggerall = teamside = 1
triggerall = (stateno = 3000 || stateno = 3002) && time = 1
trigger1 = var(9) != 0
space = space
pos =const240p(12),Screenheight-const240p(11)
scale = const720p(1), const720p(1)
anim = 3049
id = 3041
angle = random
postype = left
bindtime = -1
ontop = 1
removetime = -2
ignorehitpause = 1
removeongethit = 0
ownpal = 1
pausemovetime = 9999999
supermovetime = 9999999
[State 0, Explod]
type = Explod
triggerall = teamside = 2
triggerall = (stateno = 3000 || stateno = 3002) && time = 1
trigger1 = var(9) != 0
space = space
pos = -const240p(12),Screenheight-const240p(11)
scale = const720p(1), const720p(1)
anim = 3049
id = 3041
angle = random
postype = right
bindtime = -1
ontop = 1
removetime = -2
ignorehitpause = 1
removeongethit = 0
ownpal = 1
pausemovetime = 9999999
supermovetime = 9999999

;-------------------------------

[state 0]
type = Helper
triggerall = numhelper(3010) = 0
trigger1 = time = 0
name = "Meter"
id = 3010
pos = 0,-5
postype = p1
stateno = 3010
helpertype = normal
sprpriority = -5
ownpal = 1
persistent = 0
pausemovetime = 9999999
supermovetime = 9999999
[state 0]
type = Helper
triggerall = ailevel = 0
triggerall = numhelper(6000) = 0
trigger1 = time = 0
name = "Buffer System"
id = 6000
pos = 0,-10
postype = p1
stateno = 6000
helpertype = normal
sprpriority = -5
ownpal = 1
keyctrl = 1
pausemovetime = 9999999
supermovetime = 9999999
[state 0]
type = Helper
triggerall = numhelper(6001) = 0
trigger1 = time = 0
name = "External"
id = 6001
pos = 0,-15
postype = p1
stateno = 6001
helpertype = normal
sprpriority = -5
ownpal = 1
pausemovetime = 9999999
supermovetime = 9999999
[state 0]
type = Helper
triggerall = numhelper(6004) = 0
trigger1 = time = 0
name = "Notifications"
id = 6004
pos = 0,-20
postype = p1
stateno = 6004
helpertype = normal
sprpriority = -5
ownpal = 1
pausemovetime = 9999999
supermovetime = 9999999
[state 0]
type = Helper
triggerall = numhelper(6005) = 0
triggerall = alive
triggerall = var(19) = 0
trigger1 = life <= (lifemax*0.35)
name = "DANGER MODE"
id = 6005
pos = 0,0
postype = p1
stateno = 6005
helpertype = normal
sprpriority = -5
ownpal = 1
pausemovetime = 9999999
supermovetime = 9999999
[state 0]
type = Helper
triggerall = numhelper(6006) = 0
trigger1 = time = 0
name = "THIS IS THE MIDDLE OF THE STAGE"
id = 6006
pos = screenwidth/2,0
postype = left
stateno = 6006
helpertype = normal
sprpriority = -5
ownpal = 1
pausemovetime = 9999999
supermovetime = 9999999

[state 0]
type = Helper
triggerall = numhelper(8001) = 0
trigger1 = time = 0
name = "COMPANION"
id = 8001
pos =-25,-80
postype = p1
stateno = 8001
helpertype = normal
sprpriority = -5
ownpal = 1
persistent = 0
pausemovetime = 9999999
supermovetime = 9999999

[State -3]
type=PlaySnd
triggerall=time = 1
triggerall = roundstate >= 2
trigger1=stateno = 5070
trigger1= (anim = 5070)
trigger2=stateno = 5040
trigger2= (anim = 5040)
trigger3=stateno = 5000
trigger3= (anim = 5052)
trigger4=stateno = 5020
trigger4= (anim = 5052)
value = 35,random%5
channel = 10


;-------Target Modifications
[State 0]
type = targetstate
triggerall = numtarget
trigger1 = target,stateno = 5080
value = 500
ignorehitpause = 1
[State 0]
type = targetvelset
triggerall = numtarget
trigger1 = target,stateno = 5000
x = 0
y = 0
ignorehitpause = 1
[State -2, P2 Facing]
type = targetfacing
triggerall = (stateno != [1202,1209]) && stateno != 1324 && (stateno != [1500,1509])
trigger1 = movecontact=1 && numtarget=1
trigger1 = !(target,hitshakeover) && (target,time<=1)
value = ifelse(p2dist x>=0, -1, 1)
ignorehitpause = 1
[State -3, Prevent Underground Juggles]
type= targetbind
trigger1= movehit=1
trigger1= numtarget=1 && numenemy
trigger1= (target,time<=1) && (target,ID=enemynear,ID); this is just to prevent Simul issues as usual
trigger1= !(target,hitshakeover) && (target, hitfall) && (target, pos y>0)
pos= ceil(p2dist x), ceil(-pos y); keeps P2 at the same horizontal distance, but resets his Y position
ignorehitpause= 1
[State -2, P2 Safe Fall]
type = targetstate
trigger1 = numtarget=1; Just to prevent Simul mode shenanigans
trigger1 = target,command="recovery"
trigger1 = target,pos y >=0 && target,vel y>0
trigger1 = target,alive && target,hitfall && target,gethitvar(fall.recover) && target,canrecover
trigger1 = target,stateno=5030 || target,stateno=5035 || target,stateno=5050 || target,stateno=5071
value = 5205
ignorehitpause = 1
[State -2, P2 Safe Fall]
type =targetstate
triggerall = numtarget=1; Just to prevent Simul mode shenanigans
trigger1 = target,command="recovery"
trigger1 = target,alive && target,hitfall && target,gethitvar(fall.recover)
trigger1 = target,stateno=[5100,5109]
value = 5206
ignorehitpause = 1
[State -2, P2 Safe Fall]
type =targetstate
triggerall = numtarget=1; Just to prevent Simul mode shenanigans
trigger1 = target,name = "Training"
trigger1 = target,alive && (var(32) >= target,gethitvar(fall.recovertime))  && target,gethitvar(fall.recover)
trigger1 = target,stateno=[5100,5110]
value = 5207
ignorehitpause = 1

;-------

[State -3, step sounds]
type = playsnd
trigger1 = anim = 20 && (animelemtime(6) = 0 || animelemtime(12) = 1)
trigger2 = anim = 21 && (animelemtime(5) = 0 || animelemtime(10) = 1)
trigger3 = anim = 100 && (animelemtime(4) = 1 || animelemtime(8) = 0)
trigger4 = anim = 102 && (animelemtime(4) = 0 || animelemtime(9) = 0)
value = 0,0
[State -3, step sounds 2]
type = playsnd
trigger1 = (anim = 47 || anim = 48 || anim = 49 || anim = 50) && animelemtime(1) = 1
trigger2 = (anim = 62 || anim = 63) && animelemtime(1) = 1
trigger3 = anim = 106 && animelemtime(1) = 1
trigger4 = anim = 103 && animelemtime(1) = 1
trigger5 = anim = 1060 && animelemtime(21) = 0
value = 0,7

;================================================================================
; ------- COUNTER=HIT--------
;================================================================================

[State -2]
type = varset
trigger1 = enemynear,movetype = A
var(7) = 1
ignorehitpause = 1
[State 0]
type = varset
triggerall = var(7) = 1
trigger1 = movehit && var(17) = 1 && enemynear,movetype = H
var(18) = 2
ignorehitpause = 1
[State -2]
type = varset
triggerall = var(7) = 1
trigger1 = movehit && var(17) = 1 && enemynear,movetype = H
var(7) = 2
ignorehitpause = 1
[State -2]
type = varset
trigger1 = enemynear,movetype = I
trigger2 = movetype = H && time >= 2
var(7) = 0
ignorehitpause = 1
[State -2, decreasing]
type = varSet
trigger1 = var(18)>0
var(18) = var(18)-1
ignorehitpause = 1

;================================================================================
; ------- PALETTES--------
;================================================================================

[State -2]
type = remappal
trigger1 = 1
source = 0,0
dest = 10,var(55)
ignorehitpause = 1

;================================================================================
; ------- LVL BASED HITSTUNS--------
;================================================================================

[State 0];Reset stuns
type = varset
trigger1 = var(33) = 0
var(31) = 0
ignorehitpause =  1
[State -2];Reset opponent fall time
type = varset
trigger1 = enemynear,movetype != H
trigger2 = enemynear,stateno = [5200,5209]
trigger3 = enemynear,GetHitVar(hitshaketime) = 1
var(32) = 0
ignorehitpause = 1
[State -2];Set opponent fall time
type = varadd
triggerall = enemynear,stateno != 713
trigger1 = enemynear,movetype = H
var(32) = 1
ignorehitpause = 1

;===========LIGHT ATTACKS===========
[State 0];Stuns
type = varset
trigger1 = stateno = 200
trigger1 = animelemtime(2) >= 0 && animelemtime(3) < 0
trigger2 = stateno = 400
trigger2 = animelemtime(3) >= 0 && animelemtime(4) < 0
trigger3 = stateno = 600
trigger3 = animelemtime(2) >= 0 && animelemtime(3) < 0
trigger4 = stateno = 1212
trigger4 = animelemtime(2) >= 0 && animelemtime(3) < 0
var(31) = 10
ignorehitpause = 1
;===========MEDIUM ATTACKS===========
[State 0];Stuns
type = varset
trigger1 = stateno = 210
trigger1 = animelemtime(4) >= 0 && animelemtime(5) < 0
trigger2 = stateno = 410
trigger2 = animelemtime(2) >= 0 && animelemtime(3) < 0
trigger3 = stateno = 610
trigger3 = animelemtime(2) >= 0 && animelemtime(3) < 0
var(31) = 15
ignorehitpause = 1
;===========HARD ATTACKS===========
[State 0];Stuns
type = varset
trigger1 = stateno = 220
trigger1 = animelemtime(5) >= 0 && animelemtime(7) < 0
trigger2 = stateno = 420
trigger2 = animelemtime(3) >= 0 && animelemtime(4) < 0
trigger3 = stateno = 221 && anim = 222
trigger3 = animelemtime(2) >= 0 && animelemtime(3) < 0
trigger4 = stateno = 620
trigger4 = animelemtime(3) >= 0 && animelemtime(4) < 0
trigger5 = stateno = 810
trigger5 = animelemtime(3) >= 0 && animelemtime(4) < 0
trigger6 = stateno = 830 && anim = 831
trigger6 = animelemtime(2) >= 0 && animelemtime(3) < 0
trigger7 = stateno = 850
trigger7 = animelemtime(3) >= 0 && animelemtime(4) < 0
trigger8 = stateno = 860
trigger8= animelemtime(5) >= 0 && animelemtime(7) < 0
var(31) = 20
ignorehitpause = 1
;===========VERY HARD ATTACKS===========
[State 0];Stuns
type = varset
trigger1 = stateno = 800
trigger1 = animelemtime(5) >= 0 && animelemtime(6) < 0
trigger2 = stateno = 801
trigger2 = animelemtime(4) >= 0 && animelemtime(5) < 0
trigger3 = stateno = 802
trigger3 = animelemtime(6) >= 0 && animelemtime(7) < 0
trigger4 = stateno = 820
trigger4 = animelemtime(3) >= 0
trigger5 = stateno = 1200
trigger5 = animelemtime(3) >= 0 && animelemtime(4) < 0
trigger6 = stateno = 1200
trigger6 = animelemtime(6) >= 0 && animelemtime(7) < 0
trigger7 = stateno = 1201
trigger7 = animelemtime(5) >= 0 && animelemtime(6) < 0
trigger8 = stateno = 1201
trigger8 = animelemtime(9) >= 0 && animelemtime(10) < 0
trigger9 = stateno = 1210
trigger9 = animelemtime(2) >= 0 && animelemtime(3) < 0
trigger10 = stateno = 1211
trigger10 = animelemtime(3) >= 0 && animelemtime(4) < 0
trigger11 = stateno = 1202
trigger11 = animelemtime(5) >= 0 && animelemtime(6) < 0
trigger12 = stateno = 1203
trigger12 = animelemtime(4) >= 0
trigger13 = stateno = 1300
trigger13 = animelemtime(4) >= 0
trigger14 = stateno = 1301
trigger14 = animelemtime(2) >= 0
trigger15 = stateno = 1302
trigger15 = animelemtime(3) >= 0
trigger16 = stateno = 1401
trigger16= animelemtime(2) >= 0 && animelemtime(4) < 0
trigger17 = stateno = 1402
trigger17 = animelemtime(11) >= 0
trigger18 = stateno = 1405
trigger18 = animelemtime(2) >= 0 && animelemtime(6) < 0
var(31) = 35
ignorehitpause = 1

;===========VERY HARD ATTACKS===========
[State 0];Stuns
type = varset
trigger1 = stateno = 901
trigger1 = animelemtime(3) >= 0 && animelemtime(4) < 0
trigger2 = stateno = 902
trigger2 = animelemtime(6) >= 0 && animelemtime(7) < 0
trigger3 = stateno = 903
trigger3 = animelemtime(6) >= 0 && animelemtime(7) < 0
trigger4 = stateno = 904
trigger4 = animelemtime(5) >= 0 && animelemtime(6) < 0
trigger5 = stateno = 1600
trigger5 = animelemtime(1) >= 0
var(31) = 38
ignorehitpause = 1

;===========STUN DECAY
[State 0];GROUND
type = varset
trigger1 = var(31) > 0
trigger1 = 1
var(31) = var(31)+var(30)
ignorehitpause = 1


;================================================================================
; ------- BUFFER SYSTEM--------
;================================================================================

[State -3]
type = varset
triggerall = var(2) != 60
trigger1 = movetype = H
var(2) = 0
ignorehitpause = 0

[State -3]
type = changestate
triggerall = ifelse(var(14) !=0,ctrl = 1,1)
triggerall = movetype != H
trigger1 = var(2) = 1
value = 200
ctrl = 0
ignorehitpause = 0
[State -3]
type = changestate
triggerall = ifelse(var(14) !=0,ctrl = 1,1)
triggerall = movetype != H
trigger1 = var(2) = 2
value = 210
ctrl = 0
ignorehitpause = 0
[State -3]
type = changestate
triggerall = ifelse(var(14) !=0,ctrl = 1,1)
triggerall = movetype != H
trigger1 = var(2) = 3
value = 220
ctrl = 0
ignorehitpause = 0

[State -3]
type = changestate
triggerall = ifelse(var(14) !=0,ctrl = 1,1)
triggerall = movetype != H
triggerall = helper(6001),var(1) < 2
trigger1 = var(2) = 4
value = 400
ctrl = 0
ignorehitpause = 0
[State -3]
type = changestate
triggerall = ifelse(var(14) !=0,ctrl = 1,1)
triggerall = movetype != H
trigger1 = var(2) = 5
value = 410
ctrl = 0
ignorehitpause = 0
[State -3]
type = changestate
triggerall = ifelse(var(14) !=0,ctrl = 1,1)
triggerall = movetype != H
trigger1 = var(2) = 6
value = 420
ctrl = 0
ignorehitpause = 0

[State -3]
type = changestate
triggerall = ifelse(var(14) !=0,ctrl = 1,1)
triggerall = movetype != H
trigger1 = var(2) = 7
value = 600
ctrl = 0
ignorehitpause = 0
[State -3]
type = changestate
triggerall = ifelse(var(14) !=0,ctrl = 1,1)
triggerall = movetype != H
trigger1 = var(2) = 8
value = 610
ctrl = 0
ignorehitpause = 0
[State -3]
type = changestate
triggerall = ifelse(var(14) !=0,ctrl = 1,1)
triggerall = movetype != H
trigger1 = var(2) = 9
value = 620
ctrl = 0
ignorehitpause = 0

[State -3]
type = changestate
triggerall = ifelse(var(14) !=0,ctrl = 1,1)
triggerall = movetype != H
triggerall = stateno != 60
triggerall = ailevel = 0
trigger1 = var(2) = 10
value = 60
ctrl = 0
ignorehitpause = 0
[State -3]
type = changestate
triggerall = ifelse(var(14) !=0,ctrl = 1,1)
triggerall = movetype != H
triggerall = stateno != 61
triggerall = ailevel = 0
trigger1 = var(2) = 11
value = 61
ctrl = 0
ignorehitpause = 0

;=============
;COMMAND MOVES

[State -3]
type = changestate
triggerall = ifelse(var(14) !=0,ctrl = 1,1)
triggerall = movetype != H
trigger1 = var(2) = 14
value = 800
ctrl = 0
ignorehitpause = 0
[State -3]
type = changestate
triggerall = ifelse(var(14) !=0,ctrl = 1,1)
triggerall = movetype != H
triggerall = stateno = 800
trigger1 = var(2) = 15
value = 801
ctrl = 0
ignorehitpause = 0
[State -3]
type = changestate
triggerall = ifelse(var(14) !=0,ctrl = 1,1)
triggerall = movetype != H
triggerall = stateno = 801
trigger1 = var(2) = 15
value = 802
ctrl = 0
ignorehitpause = 0

[State -3]
type = changestate
triggerall = ifelse(var(14) !=0,ctrl = 1,1)
triggerall = movetype != H
trigger1 = var(2) = 16
value = 810
ctrl = 0
ignorehitpause = 0
[State -3]
type = changestate
triggerall = ifelse(var(14) !=0,ctrl = 1,1)
triggerall = movetype != H
trigger1 = var(2) = 17
value = 820
ctrl = 0
ignorehitpause = 0
[State -3]
type = changestate
triggerall = ifelse(var(14) !=0,ctrl = 1,1)
triggerall = movetype != H
trigger1 = var(2) = 18
value = 830
ctrl = 0
ignorehitpause = 0
[State -3]
type = changestate
triggerall = ifelse(var(14) !=0,ctrl = 1,1)
triggerall = movetype != H
trigger1 = var(2) = 19
value = 221
ctrl = 0
ignorehitpause = 0


;========================
;SPECIAL MOVES

[State -3]
type = changestate
triggerall = ifelse(var(14) !=0,ctrl = 1,1)
triggerall = movetype != H
trigger1 = var(2) = 20
value = ifelse(statetype!=A,1000,1100)
ctrl = 0
ignorehitpause = 0

[State -3]
type = changestate
triggerall = ifelse(var(14) !=0,ctrl = 1,1)
triggerall = movetype != H
trigger1 = var(2) = 21
value = ifelse(statetype!=A,1001,1101)
ctrl = 0
ignorehitpause = 0

[State -3]
type = changestate
triggerall = ifelse(var(14) !=0,ctrl = 1,1)
triggerall = movetype != H
trigger1 = var(2) = 22
value = ifelse(statetype!=A,1002,1102)
ctrl = 0
ignorehitpause = 0

[State -3]
type = changestate
triggerall = ifelse(var(14) !=0,ctrl = 1,1)
triggerall = movetype != H
trigger1 = var(2) = 23
value = 1200
ctrl = 0
ignorehitpause = 0

[State -3]
type = changestate
triggerall = ifelse(var(14) !=0,ctrl = 1,1)
triggerall = movetype != H
trigger1 = var(2) = 24
value = 1201
ctrl = 0
ignorehitpause = 0

[State -3]
type = changestate
triggerall = ifelse(var(14) !=0,ctrl = 1,1)
triggerall = movetype != H
trigger1 = var(2) = 25
value = 1202
ctrl = 0
ignorehitpause = 0

[State -3]
type = changestate
triggerall = ifelse(var(14) !=0,ctrl = 1,1)
triggerall = movetype != H
trigger1 = var(2) = 26
value = 1300
ctrl = 0
ignorehitpause = 0

[State -3]
type = changestate
triggerall = ifelse(var(14) !=0,ctrl = 1,1)
triggerall = movetype != H
trigger1 = var(2) = 27
value = 1301
ctrl = 0
ignorehitpause = 0

[State -3]
type = changestate
triggerall = ifelse(var(14) !=0,ctrl = 1,1)
triggerall = movetype != H
trigger1 = var(2) = 28
value = 1302
ctrl = 0
ignorehitpause = 0

[State -3]
type = changestate
triggerall = ifelse(var(14) !=0,ctrl = 1,1)
triggerall = movetype != H
trigger1 = var(2) = 29
value = 1400
ctrl = 0
ignorehitpause = 0

[State -3]
type = changestate
triggerall = ifelse(var(14) !=0,ctrl = 1,1)
triggerall = movetype != H
trigger1 = var(2) = 30
value = 1402
ctrl = 0
ignorehitpause = 0

[State -3]
type = changestate
triggerall = ifelse(var(14) !=0,ctrl = 1,1)
triggerall = movetype != H
trigger1 = var(2) = 31
value = 1404
ctrl = 0
ignorehitpause = 0



;========================


[State -3]
type = changestate
triggerall = ifelse(var(14) !=0,ctrl = 1,1)
triggerall = movetype != H
triggerall = ailevel = 0
trigger1 = var(2) = 39
value = 1700
ctrl = 0
ignorehitpause = 0




[State -3]
type = changestate
triggerall = ifelse(var(14) !=0,ctrl = 1,1)
triggerall = movetype != H
triggerall = statetype != A
trigger1 = var(2) = 40
value = 40
ctrl = 0
ignorehitpause = 1
[State -3]
type = changestate
triggerall = ifelse(var(14) !=0,ctrl = 1,1)
triggerall = movetype != H
triggerall = statetype != A
trigger1 = var(2) = 41
value = 40
ctrl = 0
ignorehitpause = 1
[State -3]
type = changestate
triggerall = ifelse(var(14) !=0,ctrl = 1,1)
triggerall = movetype != H
triggerall = statetype != A
trigger1 = var(2) = 42
value = 40
ctrl = 0
ignorehitpause = 1

[State -3]
type = changestate
triggerall = ifelse(var(14) !=0,ctrl = 1,1)
triggerall = movetype != H
triggerall = statetype = A
triggerall = helper(6001),var(6) = 0
trigger1 = var(2) = 40
value = 45
ctrl = 0
ignorehitpause = 1
[State -3]
type = changestate
triggerall = ifelse(var(14) !=0,ctrl = 1,1)
triggerall = movetype != H
triggerall = statetype = A
triggerall = helper(6001),var(6) = 0
trigger1 = var(2) = 41
value = 45
ctrl = 0
ignorehitpause = 1
[State -3]
type = changestate
triggerall = ifelse(var(14) !=0,ctrl = 1,1)
triggerall = movetype != H
triggerall = statetype = A
triggerall = helper(6001),var(6) = 0
trigger1 = var(2) = 42
value = 45
ctrl = 0
ignorehitpause = 1







[State -3]
type = changestate
triggerall = ifelse(var(14) !=0,ctrl = 1,1)
triggerall = movetype != H
triggerall = stateno != [105,107]
trigger1 = var(2) = 50
value = 100
ctrl = 0
ignorehitpause = 1
[State -3]
type = changestate
triggerall = ifelse(var(14) !=0,ctrl = 1,1)
triggerall = movetype != H
triggerall = statetype != A
trigger1 = var(2) = 51
value = 105
ctrl = 0
ignorehitpause = 1

[State -3]
type = changestate
triggerall = ifelse(var(14) !=0,ctrl = 1,1)
trigger1 = var(2) = 60
value = 3000
ctrl = 0
ignorehitpause = 1

[State -3]
type = changestate
triggerall = ifelse(var(14) !=0,ctrl = 1,1)
trigger1 = var(2) = 70
value = 1600
ctrl = 0
ignorehitpause = 1

[State -3]
type = changestate
triggerall = ifelse(var(14) !=0,ctrl = 1,1)
trigger1 = var(2) = 80
value = 107
ctrl = 0
ignorehitpause = 1
[State -3]
type = changestate
triggerall = ifelse(var(14) !=0,ctrl = 1,1)
trigger1 = var(2) = 82
value = 900
ctrl = 0
ignorehitpause = 1



;--------------------------------------------------------------------
